<!doctype html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8" />
    <title>Trumpet Genie</title>
    <meta name="viewport" content="viewport-fit=cover, width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <link rel="manifest" href="/trumpet_genie/assets/manifest-2QzXyYp_.json" />
    <link rel="icon" type="image/x-icon" href="/trumpet_genie/assets/icon-CrJPZfDj.svg">
  <script type="module" crossorigin src="/trumpet_genie/assets/index-BotD2MRp.js"></script>
</head>
<body onload="init_staff()">
    <style>
        @font-face {
            font-family: "Figtree";
            font-style: normal;
            src: url(/trumpet_genie/assets/Figtree-Bm0mD-Tr.ttf);
        }
        @font-face {
            font-family: "JetBrains Mono";
            font-style: normal;
            src: url(/trumpet_genie/assets/JetBrainsMono-BzXBp1x2.ttf);
        }
        ignore {
            src: url(/trumpet_genie/assets/tick_0-DMTS0I_l.wav);
            src: url(/trumpet_genie/assets/tick_1-B0--lrU8.wav);
            src: url(/trumpet_genie/assets/tick_2-LM7Avgww.wav);
        }
        * {
            -webkit-tap-highlight-color: transparent;
            font-family: "figtree", sans-serif;
        }
        body {
            background-color: var(--bg1);
            margin: 0px;
            display: grid;
            grid-template-rows: auto 1fr;
            width: 100dvw;
            height: 100dvh;
            overflow: hidden;
        }
        html {
            height: 100dvh;
            overflow: hidden;
        }
        .h3 {
            color: var(--txt1);
            font-size: 18px;
            font-weight: 700;
        }
        .navigation {
            background-color: var(--bg2);
            padding: 16px 24px;
            border-bottom: 2px solid var(--str2);
            display: grid;
            align-items: center;
            grid-template-columns: 1fr auto 1fr;
            z-index: 998;
        }
        .title-wrapper > .h3 {
            font-weight: 500;
        }
        .link-wrapper {
            display: flex;
            column-gap: 12px;
            align-items: center;
            font-weight: 500;
        }
        .nav-icon {
            height: 18px;
            width: 18px;
        }
        .nav-icon > svg {
            height: 18px;
            width: 18px;
        }
        .nav-icon > svg path {
            stroke: var(--txt1);
        }
        .nav-title {
            color: var(--txt1);
            font-size: 15px;
            font-weight: 500;
        }
        .nav-link {
            display: flex;
            align-items: center;
            column-gap: 8px;
            padding: 8px 18px;
            background-color: var(--bg2);
            border-radius: 5px;
            cursor: pointer;
            user-select: none;
            transition: background-color 0.2s ease;
        }
        .nav-link[active="true"] {
            background-color: var(--str2);
        }
        .nav-link[active="true"] .nav-title {
            font-weight: 600;
            color: var(--txt1);
        }
        .page-wrapper {
            height: 100%;
            width: 100%;
            overflow: hidden;
            position: relative;
        }
        .page {
            height: 100%;
            width: 100%;
            position: absolute;
            left: 0px;
            top: 0px;
            transition: 0.2s ease transform;
            transform: translateX(100dvw);
            overflow: hidden;
            display: grid;
        }
        .chart-page {
            grid-template-columns: 630px calc(100% - 630px);
            transform: translateX(0px);
        }
        .tuner-page {
            grid-template-columns: calc(100% - 430px) 430px;
        }
        .metronome-page {
            grid-template-columns: calc(100% - 560px) 560px;
        }
        .settings-page {
            height: fit-content;
            max-height: 100%;
        }
        .artwork {
            width: calc(100% + 20px);
            margin: -10px;
        }
        .artwork-wrapper {
            position: relative;
            width: 100%;
            height: fit-content;
            aspect-ratio: 8/5;
        }
        .profile-wrapper {
            padding: 28px 22px;
            display: grid;
            grid-template-columns: auto 1fr;
            column-gap: 20px;
            row-gap: 16px;
            border-bottom: 2px solid var(--str2);
            border-top: 2px solid var(--str2);
            z-index: 1;
            background-color: var(--bg1);
        }
        .profile-pic {
            height: 80px;
            width: 80px;
            background-color: var(--bg2);
            border: 2px solid var(--str2);
            border-radius: 5px;
            display: grid;
            place-items: center;
            font-weight: 600;
            font-family: "Jetbrains Mono";
            color: var(--txt1);
            font-size: 36px;
        }
        .profile-card {
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .profile-card > .h3 {
            position: relative;
            width: 100%;
        }
        .two-buttons {
            grid-column: -1/1;
            display: grid;
            grid-template-columns: auto auto;
            column-gap: 12px;
        }
        .button {
            width: 100%;
            height: 40px;
            background-color: dodgerblue;
            display: grid;
            place-items: center;
            font-weight: 600;
            color: white;
            border: 2px solid #1979D6;
            border-radius: 7px;
            font-size: 14px;
            box-sizing: border-box;
        }
        .tag {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            right: 0px;
            font-size: 11px;
            color: white;
            background: dodgerblue;
            font-weight: 600;
            box-sizing: border-box;
            padding: 4px 11px;
            border-radius: 30px;
            width: fit-content;
        }
        .progress {
            transform: translateY(calc(-100% - 4px));
            position: absolute;
            left: 0px;
            top: 0px;
            height: fit-content;
            width: 100%;
            background-color: var(--bg2);
            padding: 2px;
            box-sizing: border-box;
            border-bottom: 2px solid var(--str2);
            transition: 0.2s ease transform;
            z-index: 996;
        }
        .progress[expanded="true"] {
            position: fixed;
        }
        .progress[rotated="true"] {
            transform: translate(calc(100dvw + 16px), 0dvh) rotate(90deg);
            transform-origin: top left;
            width: 100dvh;
        }
        .progress[active="true"] {
            z-index: 996;
            transform: translateY(0px);
        }
        .progress[rotated="true"][active="true"] {
            transform: translate(100dvw, 0dvh) rotate(90deg);
            transform-origin: top left;
            width: 100dvh;
        }
        .inner {
            background-color: var(--txt2);
            width: 0px;
            height: 10px;
        }
        .tuning-wrapper {
            background-color: var(--bg2);
            border-left: 2px solid var(--str2);
            width: 100%;
            height: 100%;
            grid-template-rows: auto 1fr;
            padding: 32px 40px;
            box-sizing: border-box;
            display: grid;
            row-gap: 18px;
        }
        .info-wrapper {
            position: relative;
            display: grid;
            background-color: var(--bg2);
            border-left: 2px solid var(--str2);
            height: 100%;
            overflow-y: auto;
            z-index: 9;
        }
        .info-wrapper > .card:last-child {
            border-bottom: none;
        }
        .metronome-page .info-wrapper {
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
        }
        .card {
            padding: 32px 40px;
            border-bottom: 2px solid var(--str2);
            border-right: 2px solid var(--str2);
            display: grid;
            grid-gap: 18px;
        }
        .card > .search-wrapper > .search-box {
            background-color: var(--bg1);
            outline-color: var(--str2);
        }
        .indicator-card {
            aspect-ratio: 3/4;
        }
        .octave-card {
            grid-template-rows: auto 1fr;
        }
        .octaves-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            column-gap: 16px;
            height: 100%;
            width: 100%;
        }
        .octaves-grid > div {
            background-color: var(--bg1);
            border: 2px solid var(--str1);
            box-sizing: border-box;
            width: 100%;
            height: 100%;
            display: grid;
            place-items: center;
            border-radius: 6px;
            color: var(--txt2);
            font-weight: 500;
            font-size: 15px;
            cursor: pointer;
            transition: 0.2s ease all;
            user-select: none;
        }
        .octaves-grid > div[active="true"] {
            background-color: dodgerblue;
            border-color: #1979D6;
            color: white;
        }
        .low-btn {
            margin-top: auto;
        }
        .middle-btn {
            margin-block: auto;
        }
        .info-header {
            width: 100%;
            height: fit-content;
            display: grid;
            grid-template-columns: auto 1fr;
        }
        .note-indicator {
            color: var(--txt1);
            font-size: 96px;
            font-weight: 900;
            font-family: "JetBrains Mono";
            text-align: center;
            position: relative;
            width: fit-content;
            margin: 0px auto;
            transition: 0.15s transform ease;
        }
        .sharp {
            transition: 0.15s transform ease;
            transform: translateX(-17px);
        }
        .sharp::before {
            content: "";
            background-repeat: no-repeat;
            display: block;
            height: 72px;
            width: 27px;
            transform: translate(100%, -50%);
            top: 50%;
            right: -10px;
            position: absolute;
        }
        .sharp[theme="dark"]::before {
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 9 24' fill='white' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8.38229 8.24175C8.60155 8.208 8.78145 7.95502 8.78145 7.73576V5.61631C8.78145 5.27616 8.55532 5.12695 8.25513 5.11167C8.22013 5.10989 8.1851 5.11404 8.15082 5.12135L7.62044 5.23446C7.30931 5.30081 7.01615 5.06358 7.01615 4.74545V0.5C7.01615 0.223858 6.78913 0 6.51299 0V0C6.23685 0 6.00982 0.223858 6.00982 0.5V5.16845C6.00982 5.40616 5.84246 5.611 5.60953 5.65841L3.40505 6.10704C3.09519 6.1701 2.80534 5.93329 2.80534 5.61708V1.65252C2.80534 1.37638 2.57832 1.15252 2.30218 1.15252V1.15252C2.02603 1.15252 1.79901 1.37638 1.79901 1.65252V6.03444C1.79901 6.27206 1.63178 6.47685 1.39896 6.52435L0.393534 6.72946C0.179901 6.76879 0 7.01615 0 7.23542V9.32116C0 9.69332 0.25642 9.81409 0.560051 9.82611C0.595077 9.8275 0.630074 9.82345 0.664356 9.81613L1.19472 9.70302C1.50585 9.63667 1.79901 9.8739 1.79901 10.192V15.1026C1.79901 15.3402 1.63178 15.545 1.39895 15.5925L0.393534 15.7976C0.179901 15.8314 0 16.0843 0 16.3036V18.3893C0 18.762 0.257064 18.8775 0.561194 18.8888C0.595465 18.89 0.629711 18.8862 0.663283 18.8792L1.19694 18.7679C1.50746 18.7031 1.79901 18.9401 1.79901 19.2573V23.5C1.79901 23.7761 2.02603 24 2.30218 24V24C2.57832 24 2.80534 23.7761 2.80534 23.5V18.8323C2.80534 18.5942 2.97313 18.3892 3.20645 18.3421L5.41093 17.8974C5.72056 17.8349 6.00982 18.0716 6.00982 18.3875V22.3531C6.00982 22.6293 6.23685 22.8531 6.51299 22.8531V22.8531C6.78913 22.8531 7.01615 22.6293 7.01615 22.3531V17.9788C7.01615 17.7378 7.1881 17.5311 7.4251 17.4872L8.38229 17.3099C8.60155 17.2706 8.78145 17.0232 8.78145 16.8039V14.6845C8.78145 14.3443 8.55533 14.1951 8.25513 14.1798C8.22013 14.178 8.1851 14.1822 8.15082 14.1895L7.62044 14.3026C7.30932 14.369 7.01615 14.1317 7.01615 13.8136V8.91064C7.01615 8.66962 7.18811 8.46289 7.42511 8.419L8.38229 8.24175ZM2.80534 9.76409C2.80534 9.52606 2.97313 9.32104 3.20645 9.27396L5.41094 8.8292C5.72056 8.76673 6.00982 9.00345 6.00982 9.31932V14.2408C6.00982 14.4766 5.84506 14.6804 5.61447 14.7297L3.40999 15.2016C3.09876 15.2682 2.80534 15.0309 2.80534 14.7126V9.76409Z'/%3E%3C/svg%3E");
        }
        .sharp[theme="light"]::before {
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 9 24' fill='black' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8.38229 8.24175C8.60155 8.208 8.78145 7.95502 8.78145 7.73576V5.61631C8.78145 5.27616 8.55532 5.12695 8.25513 5.11167C8.22013 5.10989 8.1851 5.11404 8.15082 5.12135L7.62044 5.23446C7.30931 5.30081 7.01615 5.06358 7.01615 4.74545V0.5C7.01615 0.223858 6.78913 0 6.51299 0V0C6.23685 0 6.00982 0.223858 6.00982 0.5V5.16845C6.00982 5.40616 5.84246 5.611 5.60953 5.65841L3.40505 6.10704C3.09519 6.1701 2.80534 5.93329 2.80534 5.61708V1.65252C2.80534 1.37638 2.57832 1.15252 2.30218 1.15252V1.15252C2.02603 1.15252 1.79901 1.37638 1.79901 1.65252V6.03444C1.79901 6.27206 1.63178 6.47685 1.39896 6.52435L0.393534 6.72946C0.179901 6.76879 0 7.01615 0 7.23542V9.32116C0 9.69332 0.25642 9.81409 0.560051 9.82611C0.595077 9.8275 0.630074 9.82345 0.664356 9.81613L1.19472 9.70302C1.50585 9.63667 1.79901 9.8739 1.79901 10.192V15.1026C1.79901 15.3402 1.63178 15.545 1.39895 15.5925L0.393534 15.7976C0.179901 15.8314 0 16.0843 0 16.3036V18.3893C0 18.762 0.257064 18.8775 0.561194 18.8888C0.595465 18.89 0.629711 18.8862 0.663283 18.8792L1.19694 18.7679C1.50746 18.7031 1.79901 18.9401 1.79901 19.2573V23.5C1.79901 23.7761 2.02603 24 2.30218 24V24C2.57832 24 2.80534 23.7761 2.80534 23.5V18.8323C2.80534 18.5942 2.97313 18.3892 3.20645 18.3421L5.41093 17.8974C5.72056 17.8349 6.00982 18.0716 6.00982 18.3875V22.3531C6.00982 22.6293 6.23685 22.8531 6.51299 22.8531V22.8531C6.78913 22.8531 7.01615 22.6293 7.01615 22.3531V17.9788C7.01615 17.7378 7.1881 17.5311 7.4251 17.4872L8.38229 17.3099C8.60155 17.2706 8.78145 17.0232 8.78145 16.8039V14.6845C8.78145 14.3443 8.55533 14.1951 8.25513 14.1798C8.22013 14.178 8.1851 14.1822 8.15082 14.1895L7.62044 14.3026C7.30932 14.369 7.01615 14.1317 7.01615 13.8136V8.91064C7.01615 8.66962 7.18811 8.46289 7.42511 8.419L8.38229 8.24175ZM2.80534 9.76409C2.80534 9.52606 2.97313 9.32104 3.20645 9.27396L5.41094 8.8292C5.72056 8.76673 6.00982 9.00345 6.00982 9.31932V14.2408C6.00982 14.4766 5.84506 14.6804 5.61447 14.7297L3.40999 15.2016C3.09876 15.2682 2.80534 15.0309 2.80534 14.7126V9.76409Z'/%3E%3C/svg%3E");
        }
        .flat {
            transition: 0.15s transform ease;
            transform: translateX(-17px);
        }
        .flat::before {
            content: "";
            background-repeat: no-repeat;
            display: block;
            height: 72px;
            width: 27px;
            transform: translate(100%, -50%);
            top: 50%;
            right: -10px;
            position: absolute;
        }
        .flat[theme="dark"]::before {
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 9 24' fill='white' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5.09732 11.3709C4.22946 11.3709 3.5269 11.6152 3.00085 11.9033C2.58627 12.1305 1.90143 11.8308 1.90741 11.3581L2.0444 0.530674C2.0444 0.226603 1.81782 0 1.50776 0H1.05459C0.744528 0 0.517944 0.226603 0.517944 0.530674L0.708752 23.4693C0.708752 23.7734 0.935335 24 1.2454 24C1.31695 24 1.47198 23.9642 1.5495 23.9284C4.829 22.2827 8.26353 19.1582 8.26353 15.2228C8.26353 13.2432 7.35125 11.3709 5.09732 11.3709ZM2.59184 21.4711C2.27036 21.7428 1.78566 21.5045 1.79207 21.0835L1.88859 14.7437C1.88911 14.7094 1.89257 14.6757 1.90233 14.6429C2.01848 14.2525 2.6057 13.2432 4.06577 13.2432C5.44317 13.2432 5.55644 14.5371 5.55644 15.3421C5.55644 18.3469 4.56962 19.7989 2.59184 21.4711Z'/%3E%3C/svg%3E");
        }
        .flat[theme="light"]::before {
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 9 24' fill='black' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5.09732 11.3709C4.22946 11.3709 3.5269 11.6152 3.00085 11.9033C2.58627 12.1305 1.90143 11.8308 1.90741 11.3581L2.0444 0.530674C2.0444 0.226603 1.81782 0 1.50776 0H1.05459C0.744528 0 0.517944 0.226603 0.517944 0.530674L0.708752 23.4693C0.708752 23.7734 0.935335 24 1.2454 24C1.31695 24 1.47198 23.9642 1.5495 23.9284C4.829 22.2827 8.26353 19.1582 8.26353 15.2228C8.26353 13.2432 7.35125 11.3709 5.09732 11.3709ZM2.59184 21.4711C2.27036 21.7428 1.78566 21.5045 1.79207 21.0835L1.88859 14.7437C1.88911 14.7094 1.89257 14.6757 1.90233 14.6429C2.01848 14.2525 2.6057 13.2432 4.06577 13.2432C5.44317 13.2432 5.55644 14.5371 5.55644 15.3421C5.55644 18.3469 4.56962 19.7989 2.59184 21.4711Z'/%3E%3C/svg%3E");
        }
        .error {
            display: grid;
            grid-template-columns: auto 1fr auto auto;
            background-color: var(--bg1);
            margin: 2px;
            width: calc(100% - 4px);
            outline: 2px solid var(--str2);
            border-radius: 4px;
            height: fit-content;
            align-items: center;
        }
        .error > .h2 {
            padding-left: 12px;
            color: var(--txt2);
        }
        .error-icon {
            display: grid;
            place-items: center;
            border-radius: 4px 0px 0px 4px;
            position: relative;
            background-color: var(--bg2);
            padding: 14px 10px;
            border-right: 2px solid var(--str2);
            height: 100%;
            box-sizing: border-box;
        }
        .error-icon svg path {
            stroke: var(--txt1);
        }
        .note-card {
            position: relative;
            display: grid;
            grid-template-columns: auto 1fr auto auto;
            background-color: var(--bg1);
            margin: 2px;
            width: calc(100% - 2px);
            outline: 2px solid var(--str2);
            border-radius: 4px;
            height: fit-content;
            align-items: center;
            transform-origin: top left;
        }
        .note-card::after {
            content: "Opened in floating panel";
            padding-left: 16px;
            display: grid;
            align-items: center;
            position: absolute;
            box-sizing: border-box;
            color: var(--txt3);
            font-weight: 500;
            font-size: 17px;
            left: 0px;
            top: 0px;
            width: 100%;
            height: 100%;
            background-color: var(--bg1);
            z-index: 9;
            outline: 2px solid var(--str2);
            border-radius: 4px;
            pointer-events: none;
            opacity: 0;
            transition: 0.4s opacity ease;
        }
        .note-card[disabled="true"]::after {
            opacity: 1;
            transition: 0.4s opacity ease;
        }
        .note-card[disabled="true"], .note-card[disabled="true"] .note-nav {
            outline-color: transparent;
        }
        .note-card > .h3 {
            font-weight: 500;
            padding-left: 16px;
            text-transform: capitalize;
        }
        .note-card > .clef-box > svg {
            height: 24px;
        }
        .note-card > div {
            transition: 0.3s ease opacity;
        }
        #hidden-note {
            position: absolute;
            pointer-events: none;
            opacity: 0;
            left: 0px;
            top: 0px;
            max-width: 100%;
            width: fit-content;
            transform-origin: top left;
            transition: 0.3s ease opacity, 0.3s ease transform;
        }
        #hidden-note > .scale-nav {
            display: none;
        }
        #hidden-note .scale-svg-wrapper {
            border: 2px solid #E4E4E4 !important;
            border-radius: 5px;
        }
        .scale-container {
            position: relative;
            width: 100%;
            max-width: 100%;
            display: grid;
            grid-template-columns: 1fr auto;
            column-gap: 2px;
            will-change: transform;
        }
        .scale-container::after {
            content: "Opened in floating panel";
            padding: 16px;
            display: grid;
            position: absolute;
            box-sizing: border-box;
            color: var(--txt3);
            font-weight: 500;
            font-size: 17px;
            left: 0px;
            top: 0px;
            width: calc(100% + 2px);
            height: 100%;
            background-color: var(--bg1);
            z-index: 9;
            border: 2px solid var(--str2);
            border-radius: 6px;
            pointer-events: none;
            opacity: 0;
            transition: 0.4s opacity ease;
        }
        .scale-container[disabled="true"]::after {
            opacity: 1;
            transition: 0.4s opacity ease;
        }
        .scale-svg-wrapper {
            height: 240px;
            border: 2px solid #E4E4E4;
            border-right: none;
            border-radius: 5px 0px 0px 5px;
            width: 100%;
            overflow-y: hidden;
            overflow-x: auto;
            background-color: white;
        }
        .scale-svg-wrapper[scrolling="true"] {
            padding-bottom: 18px;
        }
        .listen-selector {
            border: 3.5px solid dodgerblue;
            box-sizing: border-box;
            position: absolute;
            left: 0px;
            top: 2px;
            height: calc(100% - 4px);
            z-index: 999999;
            opacity: 0;
            pointer-events: none;
            transition: 0.2s ease transform, 0.3s ease opacity;
        }
        .scale-svg-wrapper[scrolling="true"] .listen-selector {
            height: calc(100% - 24px);
        }
        .scale-svg {
            display: block;
            height: inherit;
            width: fit-content;
        }
        .clef-box {
            border-radius: 4px 0px 0px 4px;
            position: relative;
            background-color: var(--bg2);
            padding: 20px 16px;
            border-right: 2px solid var(--str2);
        }
        .clef-box svg path {
            fill: var(--txt1);
        }
        .clef-box svg {
            opacity: 0;
        }
        .clef-box .flat_svg, .clef-box .sharp_svg {
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
        }
        .clef-box[accidental="flat"] .flat_svg {
            opacity: 1;
        }
        .clef-box[accidental="natural"] .natural_svg {
            opacity: 1;
        }
        .clef-box[accidental="sharp"] .sharp_svg {
            opacity: 1;
        }
        .finger-box {
            display: grid;
            align-items: center;
            grid-template-columns: 1fr 1fr 1fr;
            column-gap: 8px;
            background-color: white;
            padding: 0px 16px;
            height: 100%;
            border: 2px solid #E4E4E4;
            border-right: none;
            z-index: 1;
            margin-right: 2px;
        }
        .closed-finger {
            border: 3px solid black;
            background-color: black;
            border-radius: 50px;
            height: 30px;
            width: 30px;
        }
        .open-finger {
            border: 3px solid black;
            background-color: white;
            border-radius: 50px;
            height: 30px;
            width: 30px;
        }
        .note-nav {
            display: grid;
            grid-template-columns: 1fr 1fr;
            column-gap: 2px;
            width: fit-content;
            height: 100%;
            z-index: 9;
        }
        .scale-nav {
            display: grid;
            grid-template-rows: 1fr 1fr 1fr 1fr;
            row-gap: 2px;
            width: fit-content;
            height: calc(100% - 4px);
            padding: 2px;
            z-index: 9;
            overflow: hidden;
            margin-left: -1px;
        }
        .listen-nav {
            grid-column: -1/1;
            display: grid;
            grid-template-columns: 1fr 1fr;
            column-gap: 2px;
            width: fit-content;
            height: fit-content;
            margin: auto;
            z-index: 9;
        }
        .shadow-nav {
            position: absolute;
            left: 50%;
            transform: translate(-50%, 16px);
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            column-gap: 2px;
            width: fit-content;
            height: fit-content;
            z-index: 9;
        }
        .click-area {
            position: relative;
            box-sizing: border-box;
            background-color: dodgerblue;
            outline: 2px solid #1979d6;
            color: white;
            height: 100%;
            width: 100%;
        }
        .click-area > div {
            box-sizing: border-box;
            height: 100%;
            padding: 12px;
            display: grid;
            place-items: center;
            cursor: pointer;
            user-select: none;
        }
        .click-area > div > svg {
            height: 20px;
            width: 20px;
        }
        .click-area > div > svg path {
            stroke: white;
        }
        .click-area > .alt-icon {
            display: none;
        }
        .click-area[active="true"] {
            background-color: var(--bg1);
            outline-color: var(--str2);
            z-index: 9;
        }
        .click-area[active="true"] > div > svg path {
            stroke: var(--txt1);
        }
        .click-area[active="true"] > .alt-icon {
            display: grid;
        }
        .click-area[active="true"]:has(.alt-icon) > :not(.alt-icon) {
            display: none;
        }
        .click-area > .alt-icon {
            display: none;
        }
        .click-area[disabled="true"] {
            opacity: 0.5;
            pointer-events: none;
        }
        .click-area[premium="true"]::after {
            content: "Pro";
            color: white;
            font-size: 11px;
            font-weight: 600;
            z-index: 99;
            position: absolute;
            left: 3px;
            bottom: 1px;
        }
        .note-nav > .click-area:last-child {
            border-radius: 0px 5px 5px 0px;
        }
        .scale-nav > .click-area:first-child {
            border-radius: 0px 5px 0px 0px;
        }
        .scale-nav > .click-area:last-child {
            border-radius: 0px 0px 5px 0px;
        }
        .listen-nav > .click-area:first-child, .shadow-nav > .click-area:first-child {
            border-radius: 5px 0px 0px 5px;
        }
        .listen-nav > .click-area:last-child, .shadow-nav > .click-area:last-child {
            border-radius: 0px 5px 5px 0px;
        }
        .clef-wrapper {
            position: relative;
            display: grid;
            place-items: center;
            grid-template-rows: auto 1fr;
            padding: 32px 40px;
        }
        .clef-wrapper > .h3 {
            font-weight: 500;
        }
        .unlock-btn {
            height: 42px;
            padding: 0px 30px;
            border: 2px solid #FFBF00;
            box-sizing: border-box;
            border-radius: 40px;
            font-size: 15px;
            font-weight: 600;
            display: grid;
            place-items: center;
            color: black;
            background-color: yellow;
            width: fit-content;
            cursor: pointer;
            user-select: none;
        }
        .search-wrapper {
            max-width: 350px;
            margin: 0px auto;
            width: 100%;
            height: fit-content;
            position: relative;
        }
        .search-wrapper > svg {
            height: 16px;
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
        }
        .search-wrapper > svg path {
            stroke: var(--txt1);
        }
        .search-box {
            font-size: 14px;
            width: 100%;
            box-sizing: border-box;
            background-color: var(--bg2);
            outline: 2px solid var(--str1);
            border-radius: 30px;
            height: 36px;
            font-weight: 500;
            padding: 0px 16px;
            color: var(--txt1);
            border: none;
        }
        .search-box::placeholder {
            color: var(--txt2);
        }
        .search-box:focus::placeholder {
            color: transparent;
        }
        .scale-staff-wrapper {
            background-color: white;
            width: 100%;
            position: relative;
            box-sizing: border-box;
        }
        .scale-staff-wrapper .pill {
            transform: translateY(1px);
        }
        .note-grid {
            padding: 0px 20px;
            width: fit-content;
            height: fit-content;
            position: relative;
            display: flex;
            z-index: 9;
        }
        .note-grid .finger-box {
            z-index: 9;
            grid-gap: 4px;
            padding: 3px 5px;
            border-radius: 40px;
            height: fit-content;
            border: none;
        }
        .note-grid .closed-finger, .note-grid .open-finger {
            height: 18px;
            width: 18px;
        }
        .note-grid > div:nth-child(even) {
            background-color: rgba(127, 127, 127, 0.08);
        }
        .note-grid > div:nth-child(even) .finger-box {
            background-color: #F5F5F5;
        }
        .note-grid > div:nth-child(odd) .finger-box {
            background-color: white;
        }
        .reverse {
            flex-direction: row-reverse;
        }
        .reverse .clef-position-div {
            order: 1;
        }
        .reverse > div:nth-child(even) {
            background-color: transparent;
        }
        .reverse > div:nth-child(odd) {
            background-color: rgba(127, 127, 127, 0.08);
        }
        .reverse > div:nth-child(odd) .finger-box {
            background-color: #F5F5F5;
        }
        .reverse > div:nth-child(even) .finger-box {
            background-color: white;
        }
        .volume {
            width: 8px;
            position: absolute;
            background: rgba(30, 144, 255, 0.2);
            bottom: -20px;
            right: 0px;
            border-radius: 10px 10px 0px 0px;
            transition: 0.05s ease height;
        }
        .position-div {
            padding: 20px 0px;
            margin: 0px -1px;
            position: relative;
            height: fit-content;
            width: fit-content;
            box-sizing: border-box;
            border-color: transparent;
            display: grid;
            grid-template-columns: auto auto;
            overflow: hidden;
            transition: 0.2s ease border-color;
        }
        .position-div > div > div, .clef-position-div > div {
            position: relative;
            height: 10px;
            width: 100%;
            display: grid;
            place-content: center;
        }
        .position-div > div:last-child {
            position: relative;
            width: 0px;
            will-change: width;
            transition: 0.2s ease width;
        }
        .position-div .helper_line::after {
            content: "";
            background-color: black;
            height: 1px;
            width: 40px;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scaleY(1.5);
            pointer-events: none;
            margin-left: inherit;
        }
        .position-div .selected-pill {
            position: relative;
            pointer-events: auto;
            width: fit-content;
            margin: auto 40px;
            transform: none;
            top: -1px;
        }
        .clef-position-div {
            padding: 20px 0px;
            position: relative;
            height: fit-content;
            width: 80px;
            box-sizing: border-box;
            background-color: white !important;
        }
        .mini-treble-cleff {
            z-index: 9;
            pointer-events: none;
            height: 140px;
            position: absolute;
            top: 0px;
            left: 50%;
            transform: translate(-50%, 58px);
        }
        .position-div[active="true"] {
            background-color: rgba(30, 144, 255, 0.2) !important;
        }
        .position-div[active="true"] .finger-box {
            background-color: #D2E9FF !important;
        }
        .position-div[listening="true"] {
            background-color: rgba(30, 144, 255, 0.2) !important;
        }
        .position-div[listening="true"] > div:last-child {
            width: 100px;
        }
        .position-div[listening="true"] .finger-box {
            background-color: #D2E9FF !important;
        }
        .position-div[listening="true"] > div:last-child::after {
            content: "You";
            color: black;
            position: absolute;
            left: 50%;
            top: -10px;
            transform: translateX(-50%);
            font-weight: 500;
            font-size: 14px;
        }
        .position-div[listening="true"] > div:last-child:has(#you-pill[tail="bottom"])::after {
            top: unset;
            bottom: -10px;
        }
        .position-div[:not(listening="true")] #you-pill {
            opacity: 0 !important;
        }
        .position-div[correct="true"] {
            background-color: rgba(13, 173, 87, 0.2) !important;
        }
        .position-div[correct="true"] .finger-box {
            background-color: #CFEFDD !important;
        }
        .staff-container {
            width: 550px;
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            grid-gap: 24px;
        }
        .staff-wrapper {
            padding: 6px 20px;
            background-color: white;
            outline: 2px solid #eeeeee;
            border-radius: 4px;
            width: 340px;
            position: relative;
            box-sizing: border-box;
        }
        .staff {
            position: relative;
            cursor: none !important;
        }
        .staff * {
            cursor: none !important;
        }
        .staff > div {
            position: relative;
            height: 10px;
            width: 100%;
        }
        .invisible-line {
            opacity: 0;
        }
        .mini-staff .invisible-line {
            opacity: 1;
        }
        .invisible-line::after {
            content: "";
            background-color: black;
            height: 1px;
            width: 40px;
            position: absolute;
            top: 50%;
            left: -39px;
            transform: translateY(-50%) scaleY(1.5);
            pointer-events: none;
            margin-left: inherit;
        }
        .staff > div[find="true"]::before {
            content: "";
            display: block;
            position: absolute;
            top: -4px;
            height: calc(100% + 8px);
            width: 100%;
            background-color: #D2E9FF;
            z-index: 0;
            border-radius: 3px;
        }
        .line::after {
            content: "";
            background-color: black;
            height: 1px;
            width: 100%;
            position: absolute;
            top: 50%;
            left: 0px;
            transform: translateY(-50%) scaleY(1.5);
            pointer-events: none;
        }
        .treble-cleff {
            z-index: 9;
            pointer-events: none;
            height: 140px;
            position: absolute;
            left: 14px;
            top: calc(50% + 4px);
            transform: translateY(-50%);
        }
        .h2 {
            font-size: 14px;
            font-weight: 500;
            color: var(--txt1);
        }
        .clef-nav {
            position: relative;
            display: grid;
            grid-template-columns: 1fr 1fr;
            column-gap: 5px;
            width: fit-content;
            margin: 0px auto;
        }
        .clef-nav > .h2 {
            padding: 4px 18px;
            text-align: center;
            cursor: pointer;
            position: relative;
            z-index: 9;
        }
        .clef-nav > .selector {
            position: absolute;
            width: 80px;
            height: 100%;
            left: 0px;
            top: 0px;
            background-color: var(--bg2);
            outline: 2px solid var(--str1);
            border-radius: 30px;
            transition: 0.15s ease transform, 0.15s ease width;
        }
        .move-nav {
            position: relative;
            display: grid;
            grid-template-rows: 1fr 1fr;
            row-gap: 12px;
            width: fit-content;
            height: fit-content;
            margin: auto 0px;
            margin-left: auto;
        }
        .move-nav > div {
            display: grid;
            cursor: pointer;
            place-content: center;
            padding: 14px 0px;
            position: relative;
            background-color: var(--bg2);
            outline: 2px solid var(--str1);
            border-radius: 30px;
        }
        .move-nav > div::after {
            content: attr(name);
            font-size: 13px;
            font-weight: 600;
            color: var(--txt2);
            position: absolute;
            left: -10px;
            opacity: 0;
            pointer-events: none;
            top: 50%;
            transform: translate(calc(-100% + 20px), -50%);
            transition: 0.2s ease;
        }
        .move-nav > div:hover::after {
            opacity: 1;
            transform: translate(-100%, -50%);
        }
        .move-nav svg {
            height: 20px;
            z-index: 9;
        }
        .move-nav svg path {
            stroke: var(--txt1);
        }
        .shadow {
            position: fixed;
            background-color: var(--bg1);
            height: max(100dvh, 100dvw);
            width: max(100dvh, 100dvw);
            top: 50%;
            left: 50%;
            z-index: 998;
            pointer-events: none;
            opacity: 0;
            transform: translate(-50%, -50%);
            transition: 0.2s opacity ease;
            display: grid;
            place-items: center;
        }
        .floating-card {
            background-color: transparent;
            position: fixed;
            z-index: 100;
            transition: 0.3s transform ease, 0.3s background-color ease;
        }
        .floating-card > .scale-svg-wrapper {
            border: 2px solid #E4E4E4;
            border-radius: 5px;
        }
        .listen-wrapper {
            position: fixed;
            width: calc(calc(100% - 630px) - 16px);
            box-sizing: border-box;
            height: fit-content;
            right: 16px;
            bottom: 0px;
            background-color: var(--bg2);
            border-top: 2px solid var(--str2);
            border-left: 2px solid var(--str2);
            z-index: 99;
            transition: 0.3s ease width, 0.3s ease transform;
            transform: translateY(calc(100% + 4px));
            display: grid;
            padding: 32px 0px;
            row-gap: 24px;
        }
        .listen-wrapper > .card {
            border: none;
            border-top: 2px solid var(--str2);
        }
        .listen-wrapper > .card > div:last-child {
            font-size: 14px;
            font-weight: 500;
            color: var(--txt2);
            height: 100px;
        }
        .listen-wrapper::before {
            content: "";
            width: calc(100% - 2px);
            height: 100dvh;
            position: absolute;
            top: -2px;
            left: 0px;
            transform: translateY(-100%);
            opacity: 0;
            pointer-events: none;
            transition: 0.3s ease opacity;
            background: rgba(var(--rgb), 0.2);
        }
        .listen-staff {
            overflow: hidden;
            height: 240px;
            border-radius: 5px;
            border: 2px solid #E4E4E4;
        }
        .listen-staff .position-div {
            width: 100px;
            background-color: transparent !important;
        }
        .listen-staff .position-div .selected-pill:first-child {
            margin-left: 4px;
        }
        #you-pill {
            transition: 0.2s ease transform, 0.2s ease opacity;
            opacity: 0;
            position: absolute;
            top: 0px;
            left: 50%;
            margin: 0px auto;
        }
        .listen-wrapper::after {
            content: "";
            position: absolute;
            left: 50%;
            top: 8px;
            transform: translateX(-50%);
            height: 5px;
            width: 60px;
            background: grey;
            border-radius: 10px;
        }
        .listen-wrapper[active="true"] {
            transform: translateY(0px);
        }
        .listen-wrapper[active="true"]::before {
            opacity: 1;
            pointer-events: auto;
        }
        .filler {
            transition: 0.3s ease;
            width: 100%;
            grid-column: -1/1;
        }
        .listen-content {
            height: 100%;
            background: var(--bg1);
            border-radius: 6px;
            border: 2px solid var(--str2);
            box-sizing: border-box;
            position: relative;
            display: grid;
            grid-template-rows: 1fr auto;
            overflow: hidden;
        }
        .listen-content > div:first-child {
            padding: 16px 20px;
            font-size: 15px;
            font-weight: 500;
            color: var(--txt1);
        }
        .click-text {
            cursor: pointer;
            text-decoration: underline;
        }
        .expanded {
            transform-origin: center center;
            width: max-content;
            max-width: unset;
            position: fixed;
            z-index: 999;
            padding: 2px;
            column-gap: 0px;
        }
        .expanded .scale-staff-wrapper {
            border-radius: calc(4px * var(--extended_scale)) 0px 0px calc(4px * var(--extended_scale));
        }
        .expanded-scale {
            height: fit-content !important;
            width: calc(100dvw - 20px) !important;
            padding: 0px !important;
            border: 2px solid #E4E4E4 !important;
            border-radius: 5px !important;
            box-sizing: border-box;
            overflow: visible;
        }
        .expanded-scale .scale-svg {
            border-radius: 10px;
        }
        .expanded-scale[orientation="horizontal"] {
            width: calc(100dvh - 20px) !important;
            transform: rotate(90deg);
            transform-origin: center center;
        }
        .expanded-scale[orientation="horizontal"] .shadow-nav {
            left: 50%;
            transform: translate(-50%, 16px);
        }
        .natural-nav {
            position: relative;
            display: grid;
            grid-template-rows: 1fr 1fr 1fr;
            row-gap: 5px;
            width: fit-content;
            height: fit-content;
            margin: auto 0px;
        }
        .natural-nav > div {
            display: grid;
            cursor: pointer;
            place-content: center;
            padding: 11px 5px;
            position: relative;
        }
        .natural-nav > div:not(.selector)::after {
            content: attr(name);
            font-size: 13px;
            font-weight: 600;
            color: var(--txt2);
            position: absolute;
            right: -10px;
            opacity: 0;
            pointer-events: none;
            top: 50%;
            transform: translate(calc(100% - 20px), -50%);
            transition: 0.2s ease;
        }
        .natural-nav .selected::after {
            opacity: 1 !important;
            transform: translate(100% , -50%) !important;
        }
        .natural-nav svg {
            height: 24px;
            z-index: 9;
        }
        .natural-nav svg path {
            fill: var(--txt1);
        }
        .natural-nav > .h2 {
            padding: 4px 18px;
            text-align: center;
            cursor: pointer;
            position: relative;
            z-index: 9;
        }
        .natural-nav > .selector {
            box-sizing: border-box;
            position: absolute;
            width: 100%;
            height: 5px;
            left: 0px;
            top: 0px;
            background-color: var(--bg2);
            outline: 2px solid var(--str1);
            border-radius: 30px;
            transition: 0.15s ease transform, 0.15s ease width;
        }
        .hover-pill::before, .selected-pill::before {
            content: "";
            background-repeat: no-repeat;
            display: block;
            height: 51px;
            aspect-ratio: 27/72;
            transform: translateX(-100%);
            bottom: -3px;
            left: -3px;
            position: absolute;
            opacity: 0;
        }
        .hover-pill::before {
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 9 24' fill='dodgerblue' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5.09732 11.3709C4.22946 11.3709 3.5269 11.6152 3.00085 11.9033C2.58627 12.1305 1.90143 11.8308 1.90741 11.3581L2.0444 0.530674C2.0444 0.226603 1.81782 0 1.50776 0H1.05459C0.744528 0 0.517944 0.226603 0.517944 0.530674L0.708752 23.4693C0.708752 23.7734 0.935335 24 1.2454 24C1.31695 24 1.47198 23.9642 1.5495 23.9284C4.829 22.2827 8.26353 19.1582 8.26353 15.2228C8.26353 13.2432 7.35125 11.3709 5.09732 11.3709ZM2.59184 21.4711C2.27036 21.7428 1.78566 21.5045 1.79207 21.0835L1.88859 14.7437C1.88911 14.7094 1.89257 14.6757 1.90233 14.6429C2.01848 14.2525 2.6057 13.2432 4.06577 13.2432C5.44317 13.2432 5.55644 14.5371 5.55644 15.3421C5.55644 18.3469 4.56962 19.7989 2.59184 21.4711Z'/%3E%3C/svg%3E");
        }
        .selected-pill::before {
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 9 24' fill='black' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M5.09732 11.3709C4.22946 11.3709 3.5269 11.6152 3.00085 11.9033C2.58627 12.1305 1.90143 11.8308 1.90741 11.3581L2.0444 0.530674C2.0444 0.226603 1.81782 0 1.50776 0H1.05459C0.744528 0 0.517944 0.226603 0.517944 0.530674L0.708752 23.4693C0.708752 23.7734 0.935335 24 1.2454 24C1.31695 24 1.47198 23.9642 1.5495 23.9284C4.829 22.2827 8.26353 19.1582 8.26353 15.2228C8.26353 13.2432 7.35125 11.3709 5.09732 11.3709ZM2.59184 21.4711C2.27036 21.7428 1.78566 21.5045 1.79207 21.0835L1.88859 14.7437C1.88911 14.7094 1.89257 14.6757 1.90233 14.6429C2.01848 14.2525 2.6057 13.2432 4.06577 13.2432C5.44317 13.2432 5.55644 14.5371 5.55644 15.3421C5.55644 18.3469 4.56962 19.7989 2.59184 21.4711Z'/%3E%3C/svg%3E");
        }
        .hover-pill::after, .selected-pill::after {
            content: "";
            background-repeat: no-repeat;
            display: block;
            height: 51px;
            aspect-ratio: 27/72;
            transform: translate(-100%, -50%);
            top: 50%;
            left: -4px;
            position: absolute;
            opacity: 0;
        }
        .hover-pill::after {
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 9 24' fill='dodgerblue' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8.38229 8.24175C8.60155 8.208 8.78145 7.95502 8.78145 7.73576V5.61631C8.78145 5.27616 8.55532 5.12695 8.25513 5.11167C8.22013 5.10989 8.1851 5.11404 8.15082 5.12135L7.62044 5.23446C7.30931 5.30081 7.01615 5.06358 7.01615 4.74545V0.5C7.01615 0.223858 6.78913 0 6.51299 0V0C6.23685 0 6.00982 0.223858 6.00982 0.5V5.16845C6.00982 5.40616 5.84246 5.611 5.60953 5.65841L3.40505 6.10704C3.09519 6.1701 2.80534 5.93329 2.80534 5.61708V1.65252C2.80534 1.37638 2.57832 1.15252 2.30218 1.15252V1.15252C2.02603 1.15252 1.79901 1.37638 1.79901 1.65252V6.03444C1.79901 6.27206 1.63178 6.47685 1.39896 6.52435L0.393534 6.72946C0.179901 6.76879 0 7.01615 0 7.23542V9.32116C0 9.69332 0.25642 9.81409 0.560051 9.82611C0.595077 9.8275 0.630074 9.82345 0.664356 9.81613L1.19472 9.70302C1.50585 9.63667 1.79901 9.8739 1.79901 10.192V15.1026C1.79901 15.3402 1.63178 15.545 1.39895 15.5925L0.393534 15.7976C0.179901 15.8314 0 16.0843 0 16.3036V18.3893C0 18.762 0.257064 18.8775 0.561194 18.8888C0.595465 18.89 0.629711 18.8862 0.663283 18.8792L1.19694 18.7679C1.50746 18.7031 1.79901 18.9401 1.79901 19.2573V23.5C1.79901 23.7761 2.02603 24 2.30218 24V24C2.57832 24 2.80534 23.7761 2.80534 23.5V18.8323C2.80534 18.5942 2.97313 18.3892 3.20645 18.3421L5.41093 17.8974C5.72056 17.8349 6.00982 18.0716 6.00982 18.3875V22.3531C6.00982 22.6293 6.23685 22.8531 6.51299 22.8531V22.8531C6.78913 22.8531 7.01615 22.6293 7.01615 22.3531V17.9788C7.01615 17.7378 7.1881 17.5311 7.4251 17.4872L8.38229 17.3099C8.60155 17.2706 8.78145 17.0232 8.78145 16.8039V14.6845C8.78145 14.3443 8.55533 14.1951 8.25513 14.1798C8.22013 14.178 8.1851 14.1822 8.15082 14.1895L7.62044 14.3026C7.30932 14.369 7.01615 14.1317 7.01615 13.8136V8.91064C7.01615 8.66962 7.18811 8.46289 7.42511 8.419L8.38229 8.24175ZM2.80534 9.76409C2.80534 9.52606 2.97313 9.32104 3.20645 9.27396L5.41094 8.8292C5.72056 8.76673 6.00982 9.00345 6.00982 9.31932V14.2408C6.00982 14.4766 5.84506 14.6804 5.61447 14.7297L3.40999 15.2016C3.09876 15.2682 2.80534 15.0309 2.80534 14.7126V9.76409Z'/%3E%3C/svg%3E");
        }
        .selected-pill::after {
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 9 24' fill='black' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M8.38229 8.24175C8.60155 8.208 8.78145 7.95502 8.78145 7.73576V5.61631C8.78145 5.27616 8.55532 5.12695 8.25513 5.11167C8.22013 5.10989 8.1851 5.11404 8.15082 5.12135L7.62044 5.23446C7.30931 5.30081 7.01615 5.06358 7.01615 4.74545V0.5C7.01615 0.223858 6.78913 0 6.51299 0V0C6.23685 0 6.00982 0.223858 6.00982 0.5V5.16845C6.00982 5.40616 5.84246 5.611 5.60953 5.65841L3.40505 6.10704C3.09519 6.1701 2.80534 5.93329 2.80534 5.61708V1.65252C2.80534 1.37638 2.57832 1.15252 2.30218 1.15252V1.15252C2.02603 1.15252 1.79901 1.37638 1.79901 1.65252V6.03444C1.79901 6.27206 1.63178 6.47685 1.39896 6.52435L0.393534 6.72946C0.179901 6.76879 0 7.01615 0 7.23542V9.32116C0 9.69332 0.25642 9.81409 0.560051 9.82611C0.595077 9.8275 0.630074 9.82345 0.664356 9.81613L1.19472 9.70302C1.50585 9.63667 1.79901 9.8739 1.79901 10.192V15.1026C1.79901 15.3402 1.63178 15.545 1.39895 15.5925L0.393534 15.7976C0.179901 15.8314 0 16.0843 0 16.3036V18.3893C0 18.762 0.257064 18.8775 0.561194 18.8888C0.595465 18.89 0.629711 18.8862 0.663283 18.8792L1.19694 18.7679C1.50746 18.7031 1.79901 18.9401 1.79901 19.2573V23.5C1.79901 23.7761 2.02603 24 2.30218 24V24C2.57832 24 2.80534 23.7761 2.80534 23.5V18.8323C2.80534 18.5942 2.97313 18.3892 3.20645 18.3421L5.41093 17.8974C5.72056 17.8349 6.00982 18.0716 6.00982 18.3875V22.3531C6.00982 22.6293 6.23685 22.8531 6.51299 22.8531V22.8531C6.78913 22.8531 7.01615 22.6293 7.01615 22.3531V17.9788C7.01615 17.7378 7.1881 17.5311 7.4251 17.4872L8.38229 17.3099C8.60155 17.2706 8.78145 17.0232 8.78145 16.8039V14.6845C8.78145 14.3443 8.55533 14.1951 8.25513 14.1798C8.22013 14.178 8.1851 14.1822 8.15082 14.1895L7.62044 14.3026C7.30932 14.369 7.01615 14.1317 7.01615 13.8136V8.91064C7.01615 8.66962 7.18811 8.46289 7.42511 8.419L8.38229 8.24175ZM2.80534 9.76409C2.80534 9.52606 2.97313 9.32104 3.20645 9.27396L5.41094 8.8292C5.72056 8.76673 6.00982 9.00345 6.00982 9.31932V14.2408C6.00982 14.4766 5.84506 14.6804 5.61447 14.7297L3.40999 15.2016C3.09876 15.2682 2.80534 15.0309 2.80534 14.7126V9.76409Z'/%3E%3C/svg%3E");
        }
        .hover-pill[accidental="sharp"]::after, .selected-pill[accidental="sharp"]::after {
            opacity: 1;
        }
        .hover-pill[accidental="flat"]::before, .selected-pill[accidental="flat"]::before {
            opacity: 1;
        }
        .hover-pill, .selected-pill {
            position: absolute;
            pointer-events: none;
            overflow: visible;
            left: 0px;
            top: 0px;
            transform: translateY(-50%);
        }
        .hover-pill {
            opacity: 0;
        }
        .hover-pill * {
            background-color: dodgerblue;
            fill: dodgerblue;
        }
        .selected-pill * {
            background-color: black;
            fill: black;
        }
        .pill {
            transform: translateY(0.5px);
            position: relative;
            z-index: 9;
            rotate: -36deg;
            height: 19px;
            width: 26px;
            border-radius: 50%;
        }
        .top-tail {
            pointer-events: none;
            opacity: 1;
            position: absolute;
            z-index: 9;
            height: 68px;
            width: 1px;
            right: 0px;
            bottom: 13px;
            transform: translate(-1.3px, 0.5px) scaleX(1.5);
            border-radius: 2px;
        }
        .hover-pill[tail="top"] .top-tail, .selected-pill[tail="top"] .top-tail {
            opacity: 1;
        }
        .hover-pill[tail="bottom"] .bottom-tail, .selected-pill[tail="bottom"] .bottom-tail {
            opacity: 1;
        }
        .top-tail {
            pointer-events: none;
            opacity: 0;
            position: absolute;
            z-index: 9;
            height: 68px;
            width: 1px;
            right: 0px;
            bottom: 0px;
            transform-origin: bottom;
            transform: rotate(36deg) translate(-4.7px, -3px) scaleX(1.5);
            border-radius: 2px;
        }
        .bottom-tail {
            pointer-events: none;
            opacity: 0;
            position: absolute;
            z-index: 9;
            height: 68px;
            width: 1px;
            left: 0px;
            top: 0px;
            transform-origin: top;
            transform: rotate(36deg) translate(4.5px, 3px) scaleX(1.5);
            border-radius: 2px;
        }
        .graph-wrapper {
            padding: 32px 40px;
            display: grid;
            place-items: center;
            position: relative;
        }
        .tuning-volume {
            position: absolute;
            left: 16px;
            bottom: 16px;
            height: 30%;
            width: 12px;
            border-radius: 20px;
            background: var(--bg2);
            transition: 0.05s ease height;
            display: grid;
            align-items: end;
        }
        .tuning-indicator {
            width: inherit;
            border-radius: inherit;
            background-color: var(--str2);
            transition: height;
            display: block;
        }
        .tuning-graphic {
            padding: 0px 2px;
            position: relative;
            width: fit-content;
            height: fit-content;
            margin: auto;
            display: flex;
            flex-direction: column;
            row-gap: 14px;
            align-items: center;
        }
        .tuning-graphic > div {
            height: 1px;
            transform: scaleY(1.5);
            position: relative;
            border-radius: 10px;
        }
        .tuning-graphic[waiting="true"] > div::after, .tuning-graphic[waiting="true"] > div::before {
            opacity: 0;
        }
        .medium-mark {
            background-color: var(--txt2);
            width: 55px;
        }
        .small-mark {
            background-color: var(--txt3);
            width: 32px;
        }
        .big-mark {
            background-color: var(--txt1);
            width: 80px;
        }
        .tuning-selector {
            width: 100%;
            height: 6px;
            background-color: transparent;
            outline: 3px solid;
            border-radius: 1px;
            position: absolute;
            left: 0px;
            bottom: -3px;
            transition: transform 0.08s ease, outline-color 0.1s ease;
        }
        .tuning-selector[status="good"] {
            outline-color: #0DAD57;
        }
        .tuning-selector[status="ok"] {
            outline-color: orange;
        }
        .tuning-selector[status="bad"] {
            outline-color: red;
        }
        .tuning-selector[status="waiting"] {
            outline-color: var(--txt1);
        }
        .tuning-selector[label]::after {
            content: attr(label);
            white-space: nowrap;
            position: absolute;
            right: -10px;
            font-size: 11px;
            color: var(--txt2);
            text-transform: capitalize;
            font-weight: 600;
            line-height: 0.9;
            top: calc(-0.5px + 50%);
            transform: translate(100%, -50%);
            transition: 0.2s ease opacity;
        }
        .tuning-selector[status="waiting"]::after {
            content: "Play a note";
            text-transform: none;
        }
        .medium-mark[marker]::before {
            content: attr(marker);
            white-space: nowrap;
            position: absolute;
            left: -25px;
            font-size: 11px;
            color: var(--txt2);
            text-transform: capitalize;
            font-weight: 600;
            line-height: 0.9;
            top: calc(-0.5px + 50%);
            transform: translate(-100%, -50%) scaleY(0.66);
            transition: 0.2s ease opacity;
        }
        .medium-mark[label]::before, .big-mark[label]::before {
            content: attr(label);
            white-space: nowrap;
            position: absolute;
            left: -25px;
            font-size: 11px;
            color: var(--txt2);
            text-transform: capitalize;
            font-weight: 600;
            line-height: 0.9;
            top: calc(-0.5px + 50%);
            transform: translate(-100%, calc(-50% + 5px)) scaleY(0.66);
            transition: 0.2s ease opacity;
        }
        .medium-mark[note]::after, .big-mark[note]::after {
            content: attr(note);
            white-space: nowrap;
            position: absolute;
            left: -25px;
            font-size: 16px;
            color: var(--txt1);
            text-transform: capitalize;
            font-weight: 700;
            line-height: 0.9;
            top: calc(-0.5px + 50%);
            transform: translate(-100%, calc(-50% - 5px)) scaleY(0.66);
            transition: 0.2s ease opacity;
        }
        .big-mark[label]::before, .big-mark[note]::after {
            left: -10px;
        }
        .beats-container {
            width: 100%;
            max-width: 100%;
            overflow: hidden;
            height: 100%;
            display: grid;
            place-items: center;
        }
        .beats-wrapper {
            display: grid;
            column-gap: 4px;
            padding: 16px;
            box-sizing: border-box;
            height: fit-content;
            width: fit-content;
            transition: 0.2s ease grid-template-columns;
            align-items: center;
        }
        .beats-wrapper > div {
            overflow: hidden;
            display: grid;
            row-gap: 4px;
            height: fit-content;
        }
        .box {
            width: 100%;
            box-sizing: border-box;
            aspect-ratio: 1;
            border-radius: 16%;
            background-color: var(--bg1);
            border: 2px solid var(--str2);
            transition: 0.1s ease background-color, 0.1s ease border-color;
            cursor: pointer;
        }
        .box[active="true"] {
            background-color: var(--str1);
        }
        .beats-wrapper > div[playing="true"] > .box {
            transition: 0s all !important;
            border-color: #1979D6;
        }
        .beats-wrapper > div[playing="true"] > .box[active="true"] {
            background-color: dodgerblue;
        }
        .bpm-scroll-wrapper {
            border-top: 2px solid var(--str2);
            width: 100%;
            height: fit-content;
            position: relative;
        }
        .bpm-scroll-wrapper::before {
            content: "";
            position: absolute;
            left: 0px;
            top: 0px;
            height: 100%;
            width: 40px;
            background-image: linear-gradient(to right, var(--bg2), transparent);
            z-index: 9;
        }
        .bpm-scroll-wrapper::after {
            content: "";
            position: absolute;
            right: 0px;
            top: 0px;
            height: 100%;
            width: 40px;
            background-image: linear-gradient(to left, var(--bg2), transparent);
            z-index: 9;
        }
        .bpm-selector {
            position: absolute;
            bottom: 12px;
            left: 50%;
            height: 58px;
            width: 6px;
            outline: 3px solid var(--txt1);
            border-radius: 1px;
            transform: translateX(-50%);
            z-index: 9;
        }
        .bpm-scroll {
            display: flex;
            width: 100%;
            overflow-x: auto;
            overflow-y: hidden;
            height: fit-content;
            column-gap: 8px;
            padding: 50%;
            padding-top: 28px;
            padding-bottom: 14px;
            align-items: center;
            box-sizing: border-box;
            scrollbar-height: none;
        }
        .bpm-scroll::-webkit-scrollbar {
            display: none;
        }
        .bpm-scroll > div {
            flex: none;
            width: 1px;
            position: relative;
            border-radius: 10px;
        }
        .medium-line {
            background-color: var(--txt3);
            height: 48px;
            transform: scaleX(1.5);
        }
        .small-line {
            background-color: grey;
            height: 36px;
            transform: scaleX(1.5);
        }
        .big-line {
            background-color: var(--txt2);
            height: 54px;
            transform: scaleX(1.8);
        }
        .big-line[label]::before {
            content: attr(label);
            display: block;
            position: absolute;
            left: 50%;
            top: -6px;
            transform: translate(-50%, -100%) scaleX(calc(1 / 1.8));
            color: var(--txt1);
            font-size: 10px;
            font-weight: 600;
        }
        .metro-bottom-nav {
            overflow: hidden;
            position: relative;
            display: grid;
            grid-template-columns: 1fr 1fr;
            height: fit-content;
            width: 100%;
            grid-template-rows: 1fr;
            aspect-ratio: 2;
            transition: 0.2s ease aspect-ratio;
        }
        .metro-bottom-nav:has(.time-sig-panel[active="true"]), .metro-bottom-nav:has(.sub-division-panel[active="true"]) {
            aspect-ratio: 3/2;
        }
        .time-sig-panel, .sub-division-panel {
            position: absolute;
            left: 0px;
            bottom: 0px;
            width: 100%;
            height: 100%;
            display: grid;
            grid-template-rows: auto 1fr 1fr;
            row-gap: 2px;
            background: var(--str2);
            border-top: 2px solid var(--str2);
            box-sizing: border-box;
            transform: translateY(100%);
            transition: transform 0.2s ease;
        }
        .time-sig-panel[active="true"], .sub-division-panel[active="true"] {
            transform: translateY(0px);
        }
        .panel-nav {
            background: var(--bg1);
            padding: 0px 16px;
            padding-right: 0px;
            display: grid;
            grid-template-columns: 1fr auto;
            align-items: center;
        }
        .panel-nav > .title {
            color: var(--txt1);
            font-size: 16px;
            font-weight: 500;
        }
        .panel-nav > .close-btn {
            height: 54px;
            padding: 0px 16px;
            width: fit-content;
            display: grid;
            place-items: center;
            cursor: pointer;
            user-select: none;
        }
        .panel-nav > .close-btn > svg {
            height: 20px;
            width: 20px;
        }
        .panel-nav > .close-btn > svg path {
            stroke: var(--txt1);
        }
        .time-top, .time-bottom {
            display: grid;
            height: 100%;
            width: 100%;
            background-color: var(--str2);
            column-gap: 2px;
        }
        .time-top > div, .time-bottom > div, .division-grid > div {
            display: grid;
            place-content: center;
            font-size: 20px;
            color: var(--txt1);
            font-weight: 700;
            font-family: "JetBrains Mono";
            background: var(--bg2);
            cursor: pointer;
            outline: 2px solid transparent;
            transition: 0.15s ease background-color, 0.15s ease color, 0.15s ease outline-color;
        }
        .time-top {
            grid-template-columns: repeat(8, 1fr);
        }
        .time-bottom {
            grid-template-columns: repeat(3, 1fr);
        }
        .sub-division-panel {
            grid-template-rows: auto 1fr;
        }
        .division-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-gap: 2px;
        }
        .division-grid > div svg {
            height: 50px;
        }
        .division-grid > div svg path {
            fill: var(--txt1);
            stroke: var(--txt1);
        }
        .division-grid > div svg g > path:nth-child(2), .division-grid > div svg g > path:nth-child(3) {
            fill: unset;
        }
        .time-top > div[active="true"], .time-bottom > div[active="true"], .division-grid > div[active="true"] {
            color: white;
            background: dodgerblue;
            outline-color: #1979D6;
        }
        .division-grid > div[active="true"] svg path {
            fill: white;
            stroke: white;
        }
        .division-grid > div[active="true"] svg g > path:nth-child(2), .division-grid > div[active="true"] svg g > path:nth-child(3) {
            fill: unset;
        }
        .tap {
            width: 100%;
            display: grid;
            place-items: center;
            color: grey;
            border-top: 2px solid var(--str2);
            box-sizing: border-box;
            cursor: pointer;
            user-select: none;
        }
        .start-metro {
            background-color: dodgerblue;
            border-top: 2px solid #1979D6;
            border-left: 2px solid #1979D6;
            width: 100%;
            display: grid;
            place-items: center;
            box-sizing: border-box;
            cursor: pointer;
        }
        .pause-icon {
            display: none;
        }
        .start-metro > svg {
            height: 24px;
            width: 24px;
        }
        .start-metro > svg path {
            stroke: white;
        }
        .start-metro[active="true"] > .pause-icon {
            display: block;
        }
        .start-metro[active="true"] > .play-icon {
            display: none;
        }
        .metro-middle-nav {
            display: grid;
            grid-template-columns: auto 1fr auto;
            grid-template-rows: 1fr;
            height: fit-content;
            width: 100%;
        }
        .time-signature, .note-type {
            border-top: 2px solid var(--str2);
            height: 120px;
            width: 120px;
            display: grid;
            place-items: center;
            cursor: pointer;
            user-select: none;
            z-index: 9;
            transition: 0.3s ease background-color;
        }
        .note-type[active="true"], .time-signature[active="true"] {
            background-color: var(--bg1);
            box-shadow: 0px 3px 0px var(--bg1);
        }
        .time-signature {
            font-size: 24px;
            line-height: 1;
            color: var(--txt1);
            font-weight: 700;
            font-family: "JetBrains Mono";
        }
        .note-type > svg {
            height: 40px;
        }
        .note-type svg path {
            fill: var(--txt1);
            stroke: var(--txt1);
        }
        .note-type svg g > path:nth-child(2), .note-type svg g > path:nth-child(3) {
            fill: unset;
        }
        .bpm {
            border: 2px solid var(--str2);
            border-bottom: none;
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            position: relative;
        }
        .bpm-display {
            font-size: 20px;
            font-weight: 500;
            color: var(--txt1);
            margin: auto;
        }
        .bpm-btn {
            display: grid;
            place-content: center;
            user-select: none;
            cursor: pointer;
        }
        .bpm-btn > svg {
            height: 24px;
            width: 24px;
        }
        .bpm-btn > svg path {
            stroke: var(--txt1);
        }
        @media screen and (min-width: 1101px) {
            .content::-webkit-scrollbar, .info-wrapper::-webkit-scrollbar {
                width: 16px;
                background-color: var(--bg2);
                border-radius: 2px 0px 0px 2px;
            }
            .content::-webkit-scrollbar-thumb, .info-wrapper::-webkit-scrollbar-thumb {
                border-radius: 0px;
                border: 3px solid transparent;
                background-clip: content-box;
                background-color: var(--bg3);
            }
            .scale-svg-wrapper::-webkit-scrollbar {
                height: 18px;
                background-color: #F4F4F4;
                border-top: 2px solid #E4E4E4;
                border-radius: 0px 0px 0px 3px;
            }
            .scale-svg-wrapper::-webkit-scrollbar-thumb {
                border-radius: 0px;
                border: 2px solid transparent;
                border-top: 4px solid transparent;
                background-clip: content-box;
                background-color: #C1C1C1;
            }
        }
        @media screen and (max-width: 1100px) {
            .chart-page, .tuner-page, .metronome-page {
                grid-template-columns: unset !important;
                overflow-y: auto;
            }
            .metronome-page, .tuner-page {
                grid-template-rows: 1fr auto;
            }
            .tuning-wrapper {
                border: none;
                border-top: 2px solid var(--str2);
                padding: 28px 22px;
                height: fit-content;
            }
            .tuning-volume {
                left: unset;
                right: 22px;
                bottom: 16px;
            }
            .info-wrapper {
                height: fit-content;
                border-left: none;
                border: 2px solid var(--str2);
            }
            .metronome-page .info-wrapper {
                width: 100dvw;
                height: fit-content;
                overflow: visible;
            }
            .card {
                border-right: none;
            }
            .staff-container {
                margin-top: 30px;
            }
            .listen-wrapper {
                grid-template-columns: 1fr;
                width: 100%;
                right: 0px;
                padding: 28px 0px;
                grid-gap: 16px;
                border-left: none;
            }
        }
        @media screen and (max-width: 630px) {
            body {
                grid-template-rows: 1fr auto;
            }
            .metro-bottom-nav {
                aspect-ratio: 2;
            }
            .metro-bottom-nav:has(.time-sig-panel[active="true"]), .metro-bottom-nav:has(.sub-division-panel[active="true"]) {
                aspect-ratio: 3/2;
            }
            .time-signature, .note-type {
                height: 90px;
                width: 90px;
            }
            .note-type > svg {
                height: 30px;
            }
            .note-card {
                grid-template-columns: 1fr auto auto;
            }
            .note-card > .h3 {
                display: none;
            }
            .clef-box {
                text-align: left;
                border-right: none;
            }
            .sharp, .flat {
                transform: translateX(-11px);
            }
            .progress {
                background-color: var(--bg1);
                padding: 3px;
            }
            .note-indicator {
                font-size: 54px;
            }
            .flat::before, .sharp::before {
                height: 40px;
                width: 15px;
                right: -6px;
            }
            .navigation {
                order: 2;
                padding: 10px;
                border-top: 2px solid var(--str2);
                border-bottom: none;
                grid-template-columns: 1fr;
                z-index: 8;
            }
            .title-wrapper, .account-wrapper {
                display: none;
            }
            .link-wrapper {
                display: grid;
                grid-template-columns: 1fr 1fr 1fr 1fr;
                column-gap: 0px;
                width: 100%;
                margin: auto;
            }
            .nav-icon {
                width: 60px;
                height: 26px;
                display: grid;
                place-content: center;
                transition: 0.2s ease background-color;
                border-radius: 30px;
                margin: auto;
            }
            .nav-icon > svg {
                display: block;
                height: 18px;
                width: 18px;
            }
            .nav-title {
                color: var(--txt2);
                font-size: 14px;
                text-align: center;
            }
            .nav-link {
                padding: 0px;
                background-color: transparent;
                border-radius: unset;
                transition: none;
                display: grid;
                justify-content: center;
                row-gap: 6px;
            }
            .nav-link[active="true"] {
                background-color: var(--bg2);
            }
            .nav-link[active="true"] > .nav-icon {
                background-color: var(--str2);
            }
            .nav-link[active="true"] > div {
                color: var(--txt1);
                font-weight: 700;
            }
            .natural-nav > div:not(.selector)::after {
                display: none;
            }
            .scale-nav {
                grid-template-rows: none;
                grid-template-columns: 1fr 1fr 1fr 1fr;
                width: calc(100% - 4px);
                margin-left: 0px;
                row-gap: 0px;
                column-gap: 2px;
                height: fit-content;
            }
            .scale-nav > .click-area > div {
                padding: 6px;
            }
            .scale-nav > .click-area:first-child {
                border-radius: 0px 0px 0px 5px;
            }
            .staff-container {
                width: 100%;
                margin-top: 0px;
                grid-template-columns: auto 1fr auto;
                grid-gap: 16px;
            }
            .clef-wrapper {
                padding: 40px 16px;
            }
            .scale-svg-wrapper {
                position: relative;
                box-sizing: border-box;
                padding-bottom: 0px !important;
                height: 180px;
                border: 2px solid #E4E4E4;
                border-bottom: none;
                border-radius: 5px 5px 0px 0px;
            }
            .scale-container {
                grid-template-columns: none;
            }
            .open-finger, .closed-finger {
                height: 24px;
                width: 24px;
            }
            .search-wrapper {
                max-width: 340px;
            }
            .move-nav, .natural-nav {
                height: 100%;
            }
            .move-nav > div {
                padding: 6px;
            }
            .natural-nav > div {
                padding: 11px;
            }
            .card {
                padding: 28px 22px;
            }
            .indicator-card {
                border-right: 2px solid var(--str2);
            }
            .octaves-grid {
                column-gap: 6px;
            }
            .octaves-grid > div {
                font-size: 13px;
            }
            .info-header > .card {
                border-top: 2px solid var(--str2);
            }
            .move-nav > div::after {
                display: none;
            }
            .info-wrapper {
                border: none;
            }
            .clef-wrapper {
                position: sticky;
                top: 0px;
            }
            .tuner-page .info-wrapper::before {
                content: "";
                position: absolute;
                left: 50%;
                top: 8px;
                transform: translateX(-50%);
                height: 5px;
                width: 60px;
                background: grey;
                border-radius: 10px;
            }
            .staff > div {
                height: 12px;
            }
            .staff-wrapper {
                width: 100%;
            }
            .staff-wrapper .pill {
                height: 21px;
                width: 29px;
                transform: translateY(2px);
            }
            .clef-wrapper > .h3 {
                display: none;
            }
            .listen-staff {
                height: 180px;
                background-color: white;
                display: grid;
                place-items: center;
            }
        }
    </style>

    <div class="shadow">
    </div>

    <div class="navigation">
        <div class="title-wrapper">
            <div class="h3">Trumpet Genie</div>
        </div>
        <div class="link-wrapper">
            <div class="nav-link" active="true" for="chart" onclick="page_nav('chart')">
                <div class="nav-icon">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 21L11.8999 20.8499C11.2053 19.808 10.858 19.287 10.3991 18.9098C9.99286 18.5759 9.52476 18.3254 9.02161 18.1726C8.45325 18 7.82711 18 6.57482 18H5.2C4.07989 18 3.51984 18 3.09202 17.782C2.71569 17.5903 2.40973 17.2843 2.21799 16.908C2 16.4802 2 15.9201 2 14.8V6.2C2 5.07989 2 4.51984 2.21799 4.09202C2.40973 3.71569 2.71569 3.40973 3.09202 3.21799C3.51984 3 4.07989 3 5.2 3H5.6C7.84021 3 8.96031 3 9.81596 3.43597C10.5686 3.81947 11.1805 4.43139 11.564 5.18404C12 6.03968 12 7.15979 12 9.4M12 21V9.4M12 21L12.1001 20.8499C12.7947 19.808 13.142 19.287 13.6009 18.9098C14.0071 18.5759 14.4752 18.3254 14.9784 18.1726C15.5467 18 16.1729 18 17.4252 18H18.8C19.9201 18 20.4802 18 20.908 17.782C21.2843 17.5903 21.5903 17.2843 21.782 16.908C22 16.4802 22 15.9201 22 14.8V6.2C22 5.07989 22 4.51984 21.782 4.09202C21.5903 3.71569 21.2843 3.40973 20.908 3.21799C20.4802 3 19.9201 3 18.8 3H18.4C16.1598 3 15.0397 3 14.184 3.43597C13.4314 3.81947 12.8195 4.43139 12.436 5.18404C12 6.03968 12 7.15979 12 9.4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div class="nav-title">Chart</div>
            </div>
            <div class="nav-link" for="tuner" onclick="page_nav('tuner')">
                <div class="nav-icon">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M17.7453 16C18.5362 14.8661 19 13.4872 19 12C19 11.4851 18.9444 10.9832 18.8389 10.5M6.25469 16C5.46381 14.8662 5 13.4872 5 12C5 8.13401 8.13401 5 12 5C12.4221 5 12.8355 5.03737 13.2371 5.10897M16.4999 7.5L11.9999 12M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12ZM13 12C13 12.5523 12.5523 13 12 13C11.4477 13 11 12.5523 11 12C11 11.4477 11.4477 11 12 11C12.5523 11 13 11.4477 13 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div class="nav-title">Tuner</div>
            </div>
            <div class="nav-link" for="metronome" onclick="page_nav('metronome')">
                <div class="nav-icon">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M9 18.5H15M6.6 2H17.4C17.9601 2 18.2401 2 18.454 2.10899C18.6422 2.20487 18.7951 2.35785 18.891 2.54601C19 2.75992 19 3.03995 19 3.6V5.67452C19 6.1637 19 6.40829 18.9447 6.63846C18.8957 6.84254 18.8149 7.03763 18.7053 7.21657C18.5816 7.4184 18.4086 7.59135 18.0627 7.93726L15.1314 10.8686C14.7354 11.2646 14.5373 11.4627 14.4632 11.691C14.3979 11.8918 14.3979 12.1082 14.4632 12.309C14.5373 12.5373 14.7354 12.7354 15.1314 13.1314L18.0627 16.0627C18.4086 16.4086 18.5816 16.5816 18.7053 16.7834C18.8149 16.9624 18.8957 17.1575 18.9447 17.3615C19 17.5917 19 17.8363 19 18.3255V20.4C19 20.9601 19 21.2401 18.891 21.454C18.7951 21.6422 18.6422 21.7951 18.454 21.891C18.2401 22 17.9601 22 17.4 22H6.6C6.03995 22 5.75992 22 5.54601 21.891C5.35785 21.7951 5.20487 21.6422 5.10899 21.454C5 21.2401 5 20.9601 5 20.4V18.3255C5 17.8363 5 17.5917 5.05526 17.3615C5.10425 17.1575 5.18506 16.9624 5.29472 16.7834C5.4184 16.5816 5.59135 16.4086 5.93726 16.0627L8.86863 13.1314C9.26465 12.7354 9.46265 12.5373 9.53684 12.309C9.6021 12.1082 9.6021 11.8918 9.53684 11.691C9.46266 11.4627 9.26464 11.2646 8.86863 10.8686L5.93726 7.93726C5.59136 7.59136 5.4184 7.4184 5.29472 7.21657C5.18506 7.03763 5.10425 6.84254 5.05526 6.63846C5 6.40829 5 6.1637 5 5.67452V3.6C5 3.03995 5 2.75992 5.10899 2.54601C5.20487 2.35785 5.35785 2.20487 5.54601 2.10899C5.75992 2 6.03995 2 6.6 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div class="nav-title">Metronome</div>
            </div>
            <div class="nav-link" for="settings" onclick="page_nav('settings')">
                <div class="nav-icon">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12.0005 15C13.6573 15 15.0005 13.6569 15.0005 12C15.0005 10.3431 13.6573 9 12.0005 9C10.3436 9 9.00049 10.3431 9.00049 12C9.00049 13.6569 10.3436 15 12.0005 15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M9.28957 19.3711L9.87402 20.6856C10.0478 21.0768 10.3313 21.4093 10.6902 21.6426C11.0492 21.8759 11.4681 22.0001 11.8962 22C12.3244 22.0001 12.7433 21.8759 13.1022 21.6426C13.4612 21.4093 13.7447 21.0768 13.9185 20.6856L14.5029 19.3711C14.711 18.9047 15.0609 18.5159 15.5029 18.26C15.9477 18.0034 16.4622 17.8941 16.9729 17.9478L18.4029 18.1C18.8286 18.145 19.2582 18.0656 19.6396 17.8713C20.021 17.6771 20.3379 17.3763 20.5518 17.0056C20.766 16.635 20.868 16.2103 20.8455 15.7829C20.823 15.3555 20.677 14.9438 20.4251 14.5978L19.5785 13.4344C19.277 13.0171 19.1159 12.5148 19.1185 12C19.1184 11.4866 19.281 10.9864 19.5829 10.5711L20.4296 9.40778C20.6814 9.06175 20.8275 8.65007 20.85 8.22267C20.8725 7.79528 20.7704 7.37054 20.5562 7C20.3423 6.62923 20.0255 6.32849 19.644 6.13423C19.2626 5.93997 18.833 5.86053 18.4074 5.90556L16.9774 6.05778C16.4667 6.11141 15.9521 6.00212 15.5074 5.74556C15.0645 5.48825 14.7144 5.09736 14.5074 4.62889L13.9185 3.31444C13.7447 2.92317 13.4612 2.59072 13.1022 2.3574C12.7433 2.12408 12.3244 1.99993 11.8962 2C11.4681 1.99993 11.0492 2.12408 10.6902 2.3574C10.3313 2.59072 10.0478 2.92317 9.87402 3.31444L9.28957 4.62889C9.0825 5.09736 8.73245 5.48825 8.28957 5.74556C7.84479 6.00212 7.33024 6.11141 6.81957 6.05778L5.38513 5.90556C4.95946 5.86053 4.52987 5.93997 4.14844 6.13423C3.76702 6.32849 3.45014 6.62923 3.23624 7C3.02206 7.37054 2.92002 7.79528 2.94251 8.22267C2.96499 8.65007 3.11103 9.06175 3.36291 9.40778L4.20957 10.5711C4.51151 10.9864 4.67411 11.4866 4.67402 12C4.67411 12.5134 4.51151 13.0137 4.20957 13.4289L3.36291 14.5922C3.11103 14.9382 2.96499 15.3499 2.94251 15.7773C2.92002 16.2047 3.02206 16.6295 3.23624 17C3.45036 17.3706 3.76727 17.6712 4.14864 17.8654C4.53001 18.0596 4.95949 18.1392 5.38513 18.0944L6.81513 17.9422C7.3258 17.8886 7.84034 17.9979 8.28513 18.2544C8.72966 18.511 9.08134 18.902 9.28957 19.3711Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
                <div class="nav-title">Settings</div>
            </div>
        </div>
        <div class="account-wrapper">

        </div>
    </div>

    <div class="page-wrapper">
        <div class="listen-wrapper">
            <div class="filler"></div>

            <div class="card">
                <div class="h3">Live Feedback</div>
                <div class="listen-feedback"></div>
            </div>

            <div class="listen-nav">
                <div class="click-area" disabled="true">
                    <div onclick="restart_listening()">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M2 10C2 10 4.00498 7.26822 5.63384 5.63824C7.26269 4.00827 9.5136 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.89691 21 4.43511 18.2543 3.35177 14.5M2 10V4M2 10H8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                </div>
                <div class="click-area">
                    <div onclick="close_listen(this.parentElement)">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M4 14H10M10 14V20M10 14L3 21M20 10H14M14 10V4M14 10L21 3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                </div>
            </div>
        </div>

        <div class="page chart-page">
            <div class="progress">
                <div class="inner"></div>
            </div>

            <div class="clef-wrapper">
                <div class="h3">Click on the staff to select a note</div>

                <div class="staff-container">
                    <div></div>
                    <div class="search-wrapper">
                        <input class="search-box" oninput="search_staff(this)" placeholder="Find a note">
                        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M21 21L16.65 16.65M19 11C19 15.4183 15.4183 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div></div>

                    <div class="move-nav">
                        <div name="Up" onclick="move_note('up')">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 20V4M12 4L6 10M12 4L18 10" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div name="Down" onclick="move_note('down')">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 4V20M12 20L18 14M12 20L6 14" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                    </div>

                    <div class="staff-wrapper" onmousemove="hover_note(event)" onclick="select_note(event)" onmouseleave="end_hover()">
                        <div class="staff">
                            <svg class="treble-cleff" viewBox="0 0 40 110" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M7.99791 100.527C7.99791 104.616 11.0911 110 19.4426 110C22.352 110 24.8942 109.256 27.1174 107.893C30.4619 105.544 31.3222 101.455 31.3222 97.5597C31.3222 95.1529 30.9549 92.369 30.3362 88.8409C30.1526 87.6037 29.7756 85.7478 29.4083 83.3312C35.4689 81.3497 39.983 75.0378 39.983 68.6678C39.983 59.3303 33.3617 53.0184 24.3336 53.0184C23.7149 49.3066 23.0963 45.6528 22.6034 42.1924C29.099 35.3198 33.613 27.5869 33.613 17.7565C33.613 12.1212 31.8828 7.54914 30.8872 5.3165C29.4083 2.1652 27.6104 0 26.4988 0C26.0638 0 24.15 0.744212 22.1104 3.1513C18.1473 7.85845 17.0357 15.775 17.0357 20.9657C17.0357 24.3101 17.345 27.3453 18.3986 34.2758C18.3309 34.3339 15.1121 37.6106 13.8169 38.6643C8.18158 43.8646 0.390686 51.4042 0.390686 63.7864C0.390686 75.3471 10.4724 84.4429 21.9848 84.4429C23.773 84.4429 25.4452 84.2592 26.8661 84.0079C28.0453 89.9525 28.7897 94.2829 28.7897 97.5597C28.7897 103.997 25.4452 107.4 19.2009 107.4C17.7123 107.4 16.4171 107.091 16.2914 107.091C16.2334 107.023 16.1078 106.965 16.1078 106.907C16.1078 106.781 16.2334 106.714 16.4171 106.714C19.3266 106.221 22.2264 103.746 22.2264 99.7926C22.2264 96.4481 19.6938 92.92 15.0541 92.92C10.7237 92.92 7.99791 96.4481 7.99791 100.527ZM20.9311 17.9402C21.4918 15.4657 24.3336 8.97007 27.5524 8.97007C28.4804 8.97007 29.9593 11.9375 29.9593 16.2679C29.9593 22.7056 25.2035 27.529 20.9311 31.7337C20.5638 29.2591 20.2545 26.8523 20.2545 24.2521C20.2545 21.9613 20.4382 19.854 20.9311 17.9402ZM26.3731 81.5334C25.1359 81.7847 23.9663 81.9103 22.787 81.9103C13.9426 81.9103 6.39333 75.724 6.39333 66.3769C6.39333 58.8374 11.7097 52.0905 17.1614 47.3831C18.2053 46.4551 19.2009 45.5949 20.1289 44.6669C20.6798 48.0017 21.1148 50.9112 21.5497 53.4534C15.9144 55.1256 12.0867 61.0606 12.0867 66.8796C12.0867 71.21 15.4891 77.145 20.4382 77.145C20.9311 77.145 21.4918 76.8937 21.4918 76.3427C21.4918 75.7821 20.8731 75.4727 20.1289 74.9797C17.7123 73.4912 16.3494 71.8866 16.3494 68.8515C16.3494 65.0817 19.2009 62.0465 22.787 61.1862L26.3731 81.5334ZM35.1596 70.0887C35.1596 74.4868 33.3617 79.0008 28.9733 80.7988C27.6781 73.3752 26.0058 63.5351 25.5708 60.8092C31.1385 60.8092 35.1596 64.5887 35.1596 70.0887Z" fill="black"/>
                            </svg>

                            <div id="E_3" highlight="4,5,6" linenum="3">
                                <div use="hover" linenum="6" class="invisible-line"></div>
                                <div use="selected" linenum="6" class="invisible-line"></div>
                            </div>
                            <div id="D_3" highlight="4,5"></div>
                            <div id="C_3" highlight="4,5" linenum="2">
                                <div use="hover" linenum="5" class="invisible-line"></div>
                                <div use="selected" linenum="5" class="invisible-line"></div>
                            </div>
                            <div id="B_3" highlight="4"></div>
                            <div id="A_3" highlight="4" linenum="1">
                                <div use="hover" linenum="4" class="invisible-line"></div>
                                <div use="selected" linenum="4" class="invisible-line"></div>
                            </div>
                            <div id="G_3"></div>
                            <div id="F_3" class="line"></div>
                            <div id="E_2"></div>
                            <div id="D_2" class="line"></div>
                            <div id="C_2"></div>
                            <div id="B_2" class="line"></div>
                            <div id="A_2"></div>
                            <div id="G_2" class="line"></div>
                            <div id="F_2"></div>
                            <div id="E_1" class="line"></div>
                            <div id="D_1"></div>
                            <div id="C_1" highlight="3">
                                <div use="hover" linenum="3" class="invisible-line"></div>
                                <div use="selected" linenum="3" class="invisible-line"></div>
                            </div>
                            <div id="B_1" highlight="3"></div>
                            <div id="A_1" highlight="3,2">
                                <div use="hover" linenum="2" class="invisible-line"></div>
                                <div use="selected" linenum="2" class="invisible-line"></div>
                            </div>
                            <div id="G_1" highlight="3,2"></div>
                            <div id="F_1" highlight="3,2,1">
                                <div use="hover" linenum="1" class="invisible-line"></div>
                                <div use="selected" linenum="1" class="invisible-line"></div>
                            </div>
                        </div>

                        <div class="hover-pill" accidental="natural" tail="bottom">
                            <div class="pill">
                                <div class="top-tail"></div>
                                <div class="bottom-tail"></div>
                            </div>
                        </div>

                        <div class="selected-pill" accidental="natural" tail="bottom">
                            <div class="pill">
                                <div class="top-tail"></div>
                                <div class="bottom-tail"></div>
                            </div>
                        </div>
                    </div>

                    <div class="natural-nav">
                        <div name="Sharp" onclick="switch_accidentals('sharp')">
                            <svg viewBox="0 0 9 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M8.38229 8.24175C8.60155 8.208 8.78145 7.95502 8.78145 7.73576V5.61631C8.78145 5.27616 8.55532 5.12695 8.25513 5.11167C8.22013 5.10989 8.1851 5.11404 8.15082 5.12135L7.62044 5.23446C7.30931 5.30081 7.01615 5.06358 7.01615 4.74545V0.5C7.01615 0.223858 6.78913 0 6.51299 0V0C6.23685 0 6.00982 0.223858 6.00982 0.5V5.16845C6.00982 5.40616 5.84246 5.611 5.60953 5.65841L3.40505 6.10704C3.09519 6.1701 2.80534 5.93329 2.80534 5.61708V1.65252C2.80534 1.37638 2.57832 1.15252 2.30218 1.15252V1.15252C2.02603 1.15252 1.79901 1.37638 1.79901 1.65252V6.03444C1.79901 6.27206 1.63178 6.47685 1.39896 6.52435L0.393534 6.72946C0.179901 6.76879 0 7.01615 0 7.23542V9.32116C0 9.69332 0.25642 9.81409 0.560051 9.82611C0.595077 9.8275 0.630074 9.82345 0.664356 9.81613L1.19472 9.70302C1.50585 9.63667 1.79901 9.8739 1.79901 10.192V15.1026C1.79901 15.3402 1.63178 15.545 1.39895 15.5925L0.393534 15.7976C0.179901 15.8314 0 16.0843 0 16.3036V18.3893C0 18.762 0.257064 18.8775 0.561194 18.8888C0.595465 18.89 0.629711 18.8862 0.663283 18.8792L1.19694 18.7679C1.50746 18.7031 1.79901 18.9401 1.79901 19.2573V23.5C1.79901 23.7761 2.02603 24 2.30218 24V24C2.57832 24 2.80534 23.7761 2.80534 23.5V18.8323C2.80534 18.5942 2.97313 18.3892 3.20645 18.3421L5.41093 17.8974C5.72056 17.8349 6.00982 18.0716 6.00982 18.3875V22.3531C6.00982 22.6293 6.23685 22.8531 6.51299 22.8531V22.8531C6.78913 22.8531 7.01615 22.6293 7.01615 22.3531V17.9788C7.01615 17.7378 7.1881 17.5311 7.4251 17.4872L8.38229 17.3099C8.60155 17.2706 8.78145 17.0232 8.78145 16.8039V14.6845C8.78145 14.3443 8.55533 14.1951 8.25513 14.1798C8.22013 14.178 8.1851 14.1822 8.15082 14.1895L7.62044 14.3026C7.30932 14.369 7.01615 14.1317 7.01615 13.8136V8.91064C7.01615 8.66962 7.18811 8.46289 7.42511 8.419L8.38229 8.24175ZM2.80534 9.76409C2.80534 9.52606 2.97313 9.32104 3.20645 9.27396L5.41094 8.8292C5.72056 8.76673 6.00982 9.00345 6.00982 9.31932V14.2408C6.00982 14.4766 5.84506 14.6804 5.61447 14.7297L3.40999 15.2016C3.09876 15.2682 2.80534 15.0309 2.80534 14.7126V9.76409Z"/>
                            </svg>
                        </div>
                        <div name="Natural" onclick="switch_accidentals('natural')">
                            <svg viewBox="0 0 7 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M6.41927 5.30055C6.39028 5.27078 6.3582 5.24338 6.32379 5.22009C6.26251 5.17861 6.18017 5.15647 6.08276 5.15168C6.0555 5.15035 6.0285 5.15662 6.00372 5.16806L5.98556 5.17645C5.97275 5.18237 5.9588 5.18543 5.94469 5.18543V5.18543C5.93587 5.18543 5.9271 5.18663 5.91861 5.18898L1.89476 6.30589C1.57618 6.39431 1.26103 6.15472 1.26103 5.8241V0.5C1.26103 0.223857 1.03717 0 0.761028 0H0.725098C0.448955 0 0.225098 0.223858 0.225098 0.5V18.3342C0.225098 18.7114 0.516136 18.8026 0.82254 18.8134C0.867707 18.815 0.912716 18.8084 0.956264 18.7963L4.92729 17.6941C5.24586 17.6057 5.56102 17.8453 5.56102 18.1759V23.5023C5.56102 23.7772 5.78385 24 6.05873 24V24C6.3336 24 6.55644 23.7771 6.55644 23.5022C6.55644 17.5372 6.55644 11.8316 6.55644 5.66579C6.55644 5.54238 6.50593 5.38953 6.41927 5.30055ZM1.89401 15.4569C1.57561 15.5447 1.26103 15.3052 1.26103 14.9749V9.93263C1.26103 9.7091 1.4094 9.51272 1.62444 9.45165L4.92443 8.51451C5.24366 8.42386 5.56102 8.66364 5.56102 8.99549V14.0644C5.56102 14.2893 5.41083 14.4866 5.194 14.5464L1.89401 15.4569Z"/>
                            </svg>
                        </div>
                        <div name="Flat" onclick="switch_accidentals('flat')">
                            <svg viewBox="0 0 9 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M5.09732 11.3709C4.22946 11.3709 3.5269 11.6152 3.00085 11.9033C2.58627 12.1305 1.90143 11.8308 1.90741 11.3581L2.0444 0.530674C2.0444 0.226603 1.81782 0 1.50776 0H1.05459C0.744528 0 0.517944 0.226603 0.517944 0.530674L0.708752 23.4693C0.708752 23.7734 0.935335 24 1.2454 24C1.31695 24 1.47198 23.9642 1.5495 23.9284C4.829 22.2827 8.26353 19.1582 8.26353 15.2228C8.26353 13.2432 7.35125 11.3709 5.09732 11.3709ZM2.59184 21.4711C2.27036 21.7428 1.78566 21.5045 1.79207 21.0835L1.88859 14.7437C1.88911 14.7094 1.89257 14.6757 1.90233 14.6429C2.01848 14.2525 2.6057 13.2432 4.06577 13.2432C5.44317 13.2432 5.55644 14.5371 5.55644 15.3421C5.55644 18.3469 4.56962 19.7989 2.59184 21.4711Z"/>
                            </svg>
                        </div>
                        <div class="selector"></div>
                    </div>
                </div>
            </div>
            <div class="info-wrapper">
                <div class="info-header">
                    <div class="card indicator-card">
                        <div class="h3">Note</div>
                        <div theme class="note-indicator">C</div>
                    </div>
                    <div class="card octave-card">
                        <div class="h3">Octave</div>
                        <div class="octaves-grid">
                            <div class="low-btn" onclick="toggle_octave(1)">Low</div>
                            <div class="middle-btn" onclick="toggle_octave(2)">Middle</div>
                            <div class="high-btn" onclick="toggle_octave(3)">High</div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="h3">Fingering</div>

                    <div class="note-card">
                        <div class="scale-container" id="hidden-note">

                        </div>
                        <div accidental="sharp" class="clef-box">
                            <svg class="sharp_svg" viewBox="0 0 28 74" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M26.4791 25.5687C27.146 25.466 27.6932 24.6965 27.6932 24.0296V17.5829C27.6932 16.5081 26.9509 16.0601 25.9848 16.0444C25.9497 16.0438 25.9146 16.0477 25.8803 16.055L22.9281 16.6846C22.6169 16.7509 22.3238 16.5137 22.3238 16.1956V0.999999C22.3238 0.723857 22.0999 0.5 21.8238 0.5H19.7628C19.4867 0.5 19.2628 0.723858 19.2628 1V17.0547C19.2628 17.2924 19.0955 17.4973 18.8626 17.5447L10.1156 19.3248C9.80573 19.3878 9.51588 19.151 9.51588 18.8348V4.50558C9.51588 4.22944 9.29202 4.00558 9.01588 4.00558H6.95497C6.67883 4.00558 6.45497 4.22944 6.45497 4.50558V19.6884C6.45497 19.926 6.28774 20.1308 6.05492 20.1783L2.17997 20.9688C1.53017 21.0884 0.982971 21.8408 0.982971 22.5077V28.8519C0.982971 30.0276 1.82432 30.3784 2.79406 30.3905C2.82911 30.391 2.86416 30.3872 2.89844 30.3799L5.85068 29.7502C6.16181 29.6839 6.45497 29.9211 6.45497 30.2392V47.2707C6.45497 47.5083 6.28774 47.7131 6.05491 47.7606L2.17997 48.5511C1.53017 48.6537 0.982971 49.4232 0.982971 50.0901V56.4341C0.982971 57.6104 1.82498 57.9445 2.79521 57.9558C2.8295 57.9562 2.8638 57.9526 2.89737 57.9456L5.8529 57.3293C6.16342 57.2645 6.45497 57.5015 6.45497 57.8187V73C6.45497 73.2761 6.67883 73.5 6.95497 73.5H9.01588C9.29202 73.5 9.51588 73.2761 9.51588 73V56.946C9.51588 56.708 9.68367 56.5029 9.91699 56.4559L18.664 54.6911C18.9736 54.6286 19.2628 54.8654 19.2628 55.1812V69.5116C19.2628 69.7877 19.4867 70.0116 19.7628 70.0116H21.8238C22.0999 70.0116 22.3238 69.7877 22.3238 69.5116V54.3364C22.3238 54.0954 22.4957 53.8887 22.7327 53.8448L26.4791 53.1509C27.146 53.0313 27.6932 52.2789 27.6932 51.612V45.1653C27.6932 44.0904 26.9509 43.6423 25.9848 43.6267C25.9497 43.6261 25.9146 43.63 25.8803 43.6373L22.9281 44.2669C22.6169 44.3332 22.3238 44.096 22.3238 43.7779V26.7541C22.3238 26.513 22.4957 26.3063 22.7327 26.2624L26.4791 25.5687ZM9.51588 29.3637C9.51588 29.1256 9.68367 28.9206 9.91699 28.8735L18.664 27.1088C18.9736 27.0463 19.2628 27.283 19.2628 27.5989V44.6413C19.2628 44.8771 19.0981 45.0808 18.8675 45.1302L10.1205 47.0024C9.8093 47.069 9.51588 46.8317 9.51588 46.5134V29.3637Z" fill="black"/>
                            </svg>
                            <svg class="natural_svg" viewBox="0 0 7 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M6.41927 5.30055C6.39028 5.27078 6.3582 5.24338 6.32379 5.22009C6.26251 5.17861 6.18017 5.15647 6.08276 5.15168C6.0555 5.15035 6.0285 5.15662 6.00372 5.16806L5.98556 5.17645C5.97275 5.18237 5.9588 5.18543 5.94469 5.18543V5.18543C5.93587 5.18543 5.9271 5.18663 5.91861 5.18898L1.89476 6.30589C1.57618 6.39431 1.26103 6.15472 1.26103 5.8241V0.5C1.26103 0.223857 1.03717 0 0.761028 0H0.725098C0.448955 0 0.225098 0.223858 0.225098 0.5V18.3342C0.225098 18.7114 0.516136 18.8026 0.82254 18.8134C0.867707 18.815 0.912716 18.8084 0.956264 18.7963L4.92729 17.6941C5.24586 17.6057 5.56102 17.8453 5.56102 18.1759V23.5023C5.56102 23.7772 5.78385 24 6.05873 24V24C6.3336 24 6.55644 23.7771 6.55644 23.5022C6.55644 17.5372 6.55644 11.8316 6.55644 5.66579C6.55644 5.54238 6.50593 5.38953 6.41927 5.30055ZM1.89401 15.4569C1.57561 15.5447 1.26103 15.3052 1.26103 14.9749V9.93263C1.26103 9.7091 1.4094 9.51272 1.62444 9.45165L4.92443 8.51451C5.24366 8.42386 5.56102 8.66364 5.56102 8.99549V14.0644C5.56102 14.2893 5.41083 14.4866 5.194 14.5464L1.89401 15.4569Z"/>
                            </svg>
                            <svg class="flat_svg" viewBox="0 0 9 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M5.09732 11.3709C4.22946 11.3709 3.5269 11.6152 3.00085 11.9033C2.58627 12.1305 1.90143 11.8308 1.90741 11.3581L2.0444 0.530674C2.0444 0.226603 1.81782 0 1.50776 0H1.05459C0.744528 0 0.517944 0.226603 0.517944 0.530674L0.708752 23.4693C0.708752 23.7734 0.935335 24 1.2454 24C1.31695 24 1.47198 23.9642 1.5495 23.9284C4.829 22.2827 8.26353 19.1582 8.26353 15.2228C8.26353 13.2432 7.35125 11.3709 5.09732 11.3709ZM2.59184 21.4711C2.27036 21.7428 1.78566 21.5045 1.79207 21.0835L1.88859 14.7437C1.88911 14.7094 1.89257 14.6757 1.90233 14.6429C2.01848 14.2525 2.6057 13.2432 4.06577 13.2432C5.44317 13.2432 5.55644 14.5371 5.55644 15.3421C5.55644 18.3469 4.56962 19.7989 2.59184 21.4711Z"/>
                            </svg>
                        </div>
                        <div class="h3"></div>
                        <div class="finger-box">
                            <div id="note-finger1" class="open-finger"></div>
                            <div id="note-finger2" class="closed-finger"></div>
                            <div id="note-finger3" class="open-finger"></div>
                        </div>
                        <div class="note-nav">
                            <div class="click-area" premium="true">
                                <div onclick="open_listen(this.parentElement, 'note')">
                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M19 10V12C19 15.866 15.866 19 12 19M5 10V12C5 15.866 8.13401 19 12 19M12 19V22M8 22H16M12 15C10.3431 15 9 13.6569 9 12V5C9 3.34315 10.3431 2 12 2C13.6569 2 15 3.34315 15 5V12C15 13.6569 13.6569 15 12 15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <div class="alt-icon" onclick="stop_listening()">
                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M3 7.8C3 6.11984 3 5.27976 3.32698 4.63803C3.6146 4.07354 4.07354 3.6146 4.63803 3.32698C5.27976 3 6.11984 3 7.8 3H16.2C17.8802 3 18.7202 3 19.362 3.32698C19.9265 3.6146 20.3854 4.07354 20.673 4.63803C21 5.27976 21 6.11984 21 7.8V16.2C21 17.8802 21 18.7202 20.673 19.362C20.3854 19.9265 19.9265 20.3854 19.362 20.673C18.7202 21 17.8802 21 16.2 21H7.8C6.11984 21 5.27976 21 4.63803 20.673C4.07354 20.3854 3.6146 19.9265 3.32698 19.362C3 18.7202 3 17.8802 3 16.2V7.8Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="click-area play-note-btn">
                                <div onclick="play_note(this.parentElement)">
                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M19.7479 4.99993C21.1652 6.97016 22 9.38756 22 11.9999C22 14.6123 21.1652 17.0297 19.7479 18.9999M15.7453 7.99993C16.5362 9.13376 17 10.5127 17 11.9999C17 13.4872 16.5362 14.8661 15.7453 15.9999M9.63432 4.36561L6.46863 7.5313C6.29568 7.70425 6.2092 7.79073 6.10828 7.85257C6.01881 7.9074 5.92127 7.9478 5.81923 7.9723C5.70414 7.99993 5.58185 7.99993 5.33726 7.99993H3.6C3.03995 7.99993 2.75992 7.99993 2.54601 8.10892C2.35785 8.20479 2.20487 8.35777 2.10899 8.54594C2 8.75985 2 9.03987 2 9.59993V14.3999C2 14.96 2 15.24 2.10899 15.4539C2.20487 15.6421 2.35785 15.7951 2.54601 15.8909C2.75992 15.9999 3.03995 15.9999 3.6 15.9999H5.33726C5.58185 15.9999 5.70414 15.9999 5.81923 16.0276C5.92127 16.0521 6.01881 16.0925 6.10828 16.1473C6.2092 16.2091 6.29568 16.2956 6.46863 16.4686L9.63431 19.6342C10.0627 20.0626 10.2769 20.2768 10.4608 20.2913C10.6203 20.3038 10.7763 20.2392 10.8802 20.1175C11 19.9773 11 19.6744 11 19.0686V4.9313C11 4.32548 11 4.02257 10.8802 3.88231C10.7763 3.76061 10.6203 3.69602 10.4608 3.70858C10.2769 3.72305 10.0627 3.93724 9.63432 4.36561Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                                <div class="alt-icon" onclick="stop_note(this.parentElement)">
                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M3 7.8C3 6.11984 3 5.27976 3.32698 4.63803C3.6146 4.07354 4.07354 3.6146 4.63803 3.32698C5.27976 3 6.11984 3 7.8 3H16.2C17.8802 3 18.7202 3 19.362 3.32698C19.9265 3.6146 20.3854 4.07354 20.673 4.63803C21 5.27976 21 6.11984 21 7.8V16.2C21 17.8802 21 18.7202 20.673 19.362C20.3854 19.9265 19.9265 20.3854 19.362 20.673C18.7202 21 17.8802 21 16.2 21H7.8C6.11984 21 5.27976 21 4.63803 20.673C4.07354 20.3854 3.6146 19.9265 3.32698 19.362C3 18.7202 3 17.8802 3 16.2V7.8Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <div class="h3">Major Scale</div>
                    <div class="error" id="major-scale-error"></div>
                    <div class="scale-container" id="major-scale"></div>
                </div>
                <div class="card">
                    <div class="h3">Natural Minor Scale</div>
                    <div class="error" id="natural-minor-scale-error"></div>
                    <div class="scale-container" id="natural-minor-scale"></div>
                </div>
                <div class="card">
                    <div class="h3">Melodic Minor Scale</div>
                    <div class="error" id="melodic-minor-scale-error"></div>
                    <div class="scale-container" id="melodic-minor-scale"></div>
                </div>
                <div class="card">
                    <div class="h3">Harmonic Minor Scale</div>
                    <div class="error" id="harmonic-minor-scale-error"></div>
                    <div class="scale-container" id="harmonic-minor-scale"></div>
                </div>
            </div>
        </div>

        <div class="page tuner-page">
            <div class="graph-wrapper">
                <div class="tuning-graphic">
                    <span class="tuning-selector" label></span>
                    <div class="medium-mark"></div>
                        <div class="small-mark"></div>
                        <div class="small-mark"></div>
                        <div class="small-mark"></div>
                        <div class="small-mark"></div>
                    <div class="medium-mark" marker="+40"></div>
                        <div class="small-mark"></div>
                        <div class="small-mark"></div>
                        <div class="small-mark"></div>
                        <div class="small-mark"></div>
                    <div class="medium-mark" marker="+20"></div>
                        <div class="small-mark"></div>
                        <div class="small-mark"></div>
                        <div class="small-mark"></div>
                        <div class="small-mark"></div>
                <div class="big-mark"></div>
                        <div class="small-mark"></div>
                        <div class="small-mark"></div>
                        <div class="small-mark"></div>
                        <div class="small-mark"></div>
                    <div class="medium-mark" marker="-20"></div>
                        <div class="small-mark"></div>
                        <div class="small-mark"></div>
                        <div class="small-mark"></div>
                        <div class="small-mark"></div>
                    <div class="medium-mark" marker="-40"></div>
                        <div class="small-mark"></div>
                        <div class="small-mark"></div>
                        <div class="small-mark"></div>
                        <div class="small-mark"></div>
                    <div class="medium-mark"></div>
                </div>

                <span class="tuning-volume">
                    <span class="tuning-indicator"></span>
                </span>
            </div>
            <div class="tuning-wrapper">
                <div class="h3">Live Feedback</div>
                <div class="h2 tuning-feedback"></div>
            </div>
        </div>

        <div class="page metronome-page">
            <div class="beats-container">
                <div class="beats-wrapper">

                </div>
            </div>
            <div class="info-wrapper">
                <div class="bpm-scroll-wrapper">
                    <div class="bpm-selector"></div>
                    <div class="bpm-scroll" onscroll="change_bpm(this)" onscrollend="stop_bpm()">
                    </div>
                </div>
                <div class="metro-middle-nav">
                    <div class="time-signature" onclick="open_panel('time', this)">

                    </div>
                    <div class="bpm">
                        <div class="bpm-btn" onclick="modify_bpm('minus')" ontouchstart="init_press('minus')" ontouchend="end_press()" oncontextmenu="return false;">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="bpm-display"></div>
                        <div class="bpm-btn" onclick="modify_bpm('plus')" ontouchstart="init_press('plus')" ontouchend="end_press()" oncontextmenu="return false;">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 5V19M5 12H19" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                    </div>
                    <div class="note-type" onclick="open_panel('division', this)">

                    </div>
                </div>
                <div class="metro-bottom-nav">
                    <div class="time-sig-panel">
                        <div class="panel-nav">
                            <div class="title">Time Signature</div>
                            <div class="close-btn" onclick="close_panel(this, 'time')">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M4 14H10M10 14V20M10 14L3 21M20 10H14M14 10V4M14 10L21 3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                        </div>
                        <div class="time-top">
                            <div value="1" onclick="update_boxes(this)">1</div>
                            <div value="2" onclick="update_boxes(this)">2</div>
                            <div value="3" onclick="update_boxes(this)">3</div>
                            <div value="4" onclick="update_boxes(this)">4</div>
                            <div value="5" onclick="update_boxes(this)">5</div>
                            <div value="6" onclick="update_boxes(this)">6</div>
                            <div value="7" onclick="update_boxes(this)">7</div>
                            <div value="8" onclick="update_boxes(this)">8</div>
                        </div>
                        <div class="time-bottom">
                            <div value="2" onclick="update_division_options(this)">2</div>
                            <div value="4" onclick="update_division_options(this)">4</div>
                            <div value="8" onclick="update_division_options(this)">8</div>
                        </div>
                    </div>
                    <div class="sub-division-panel">
                        <div class="panel-nav">
                            <div class="title">Sub Division</div>
                            <div class="close-btn" onclick="close_panel(this, 'division')">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M4 14H10M10 14V20M10 14L3 21M20 10H14M14 10V4M14 10L21 3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                        </div>
                        <div class="division-grid">
                            <div division="1" onclick="update_division(this)"></div>
                            <div division="2" onclick="update_division(this)"></div>
                            <div division="3" onclick="update_division(this)"></div>
                            <div division="4" onclick="update_division(this)"></div>
                        </div>
                    </div>
                    <div class="tap" onclick="start_tapping(this)">
                        Tap
                    </div>
                    <div class="start-metro" onclick="control_metronome(this)" active="false">
                        <svg class="play-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M5 4.98951C5 4.01835 5 3.53277 5.20249 3.2651C5.37889 3.03191 5.64852 2.88761 5.9404 2.87018C6.27544 2.85017 6.67946 3.11953 7.48752 3.65823L18.0031 10.6686C18.6708 11.1137 19.0046 11.3363 19.1209 11.6168C19.2227 11.8621 19.2227 12.1377 19.1209 12.383C19.0046 12.6635 18.6708 12.886 18.0031 13.3312L7.48752 20.3415C6.67946 20.8802 6.27544 21.1496 5.9404 21.1296C5.64852 21.1122 5.37889 20.9679 5.20249 20.7347C5 20.467 5 19.9814 5 19.0103V4.98951Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <svg class="pause-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8.5 21V3M15.5 21V3" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                </div>
            </div>
        </div>

        <div class="page settings-page">
            <div class="artwork-wrapper">
                <svg class="artwork" viewBox="0 0 800 500" fill="var(--txt1)" xmlns="http://www.w3.org/2000/svg">
                    <rect x="-1.5" y="-1.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="-1.5" y="81.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="-1.5" y="164.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="-1.5" y="247.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="-1.5" y="330.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="-1.5" y="413.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="-1.5" y="496.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="81.5" y="-1.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="81.5" y="81.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="81.5" y="164.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="81.5" y="247.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="81.5" y="330.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="81.5" y="413.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="81.5" y="496.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="164.5" y="-1.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="164.5" y="81.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="164.5" y="164.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="164.5" y="247.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="164.5" y="330.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="164.5" y="413.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="164.5" y="496.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="247.5" y="-1.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="247.5" y="81.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="247.5" y="164.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="247.5" y="247.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="247.5" y="330.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="247.5" y="413.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="247.5" y="496.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="330.5" y="-1.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="330.5" y="81.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="330.5" y="164.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="330.5" y="247.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="330.5" y="330.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="330.5" y="413.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="330.5" y="496.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="413.5" y="-1.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="413.5" y="81.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="413.5" y="164.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="413.5" y="247.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="413.5" y="330.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="413.5" y="413.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="413.5" y="496.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="496.5" y="-1.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="496.5" y="81.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="496.5" y="164.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="496.5" y="247.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="496.5" y="330.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="496.5" y="413.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="496.5" y="496.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="579.5" y="-1.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="579.5" y="81.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="579.5" y="164.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="579.5" y="247.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="579.5" y="330.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="579.5" y="413.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="579.5" y="496.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="662.5" y="-1.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="662.5" y="81.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="662.5" y="164.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="662.5" y="247.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="662.5" y="330.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="662.5" y="413.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="662.5" y="496.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="745.5" y="-1.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="745.5" y="81.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="745.5" y="164.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="745.5" y="247.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="745.5" y="330.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="745.5" y="413.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <rect x="745.5" y="496.5" width="83" height="83" stroke="var(--txt2)" stroke-width="3"/>
                    <path d="M209 234.5C265 374.5 0 221 0 221V0H321.5C321.5 0 153 94.5 209 234.5Z" fill="#E76D6D"/>
                    <path d="M209 234.5C265 374.5 0 221 0 221V0H321.5C321.5 0 153 94.5 209 234.5Z" fill="#E76D6D"/>
                    <path d="M172.921 203.006C219.254 324.203 0 191.319 0 191.319V0H266C266 0 126.588 81.8083 172.921 203.006Z" fill="black" fill-opacity="0.12"/>
                    <path d="M131.966 166.241C167.325 265.489 0 156.671 0 156.671V0H203C203 0 96.6065 66.9927 131.966 166.241Z" fill="black" fill-opacity="0.12"/>
                    <path d="M453 349.5C307.501 258.5 341.5 500 341.5 500H800.5V260.5C800.5 260.5 598.5 440.5 453 349.5Z" fill="#A7DAFF"/>
                    <path d="M466.363 380.605C326.668 308.413 359.311 500 359.311 500H800V310C800 310 606.058 452.797 466.363 380.605Z" fill="black" fill-opacity="0.12"/>
                    <path d="M491.912 412.653C362.914 359.839 393.058 500 393.058 500H800V361C800 361 620.91 465.468 491.912 412.653Z" fill="black" fill-opacity="0.12"/>
                    <path d="M343.856 179.5C285.355 92 482.356 0 482.356 0H689.856C689.856 0 730.855 382.5 611.356 250C491.856 117.5 402.356 267 343.856 179.5Z" fill="#FFB35C"/>
                    <path d="M398.568 141.667C352.397 72.6092 507.876 0 507.876 0H671.641C671.641 0 704 301.881 609.687 197.308C515.374 92.7346 444.738 210.725 398.568 141.667Z" fill="black" fill-opacity="0.12"/>
                    <path d="M451.388 105.633C416.962 54.1407 547 0 547 0H655.004C655.004 0 679.132 225.096 608.808 147.121C538.484 69.147 485.815 157.126 451.388 105.633Z" fill="black" fill-opacity="0.12"/>
                    <path d="M119 433.5C84.5 473.5 -0.5 383 -0.5 383V500.5H270.5C270.5 500.5 293.5 413 244 378.5C194.5 344 153.5 393.5 119 433.5Z" fill="#92FFC5"/>
                    <path d="M111.5 464C78.2905 492.439 0 416.461 0 416.461V500L252 500C252 500 279.648 424.529 232 400C184.352 375.471 144.71 435.561 111.5 464Z" fill="black" fill-opacity="0.12"/>
                    <path d="M207 438.5C168.5 428.088 152.68 484.861 121 499.113H225.89C225.89 499.113 245.5 448.912 207 438.5Z" fill="black" fill-opacity="0.12"/>
                </svg>
            </div>
            <div class="profile-wrapper">
                <div class="profile-pic">NC</div>
                <div class="profile-card">
                    <div class="h3">
                        Noah Crozier
                        <div class="tag">Basic</div>
                    </div>
                    <div class="h2">croznoah@gmail.com</div>
                </div>
                <div class="two-buttons">
                    <div class="button">Sign out</div>
                    <div class="button">Manager Subscription</div>
                </div>
            </div>
            <div class="card">
                <div class="h3">Upgrade to Pro</div>
            </div>
        </div>
    </div>

    <script>
        current_page = "chart";
        function page_nav(name) {
            if (name != current_page) {
                var page_wrapper = document.querySelector(".page-wrapper").querySelectorAll(".page");
                for (var i = 0; i < page_wrapper.length; i++) {
                    var page = page_wrapper[i];

                    if (page.classList.contains(`${name}-page`)) {
                        var new_index = i;
                    } else if (page.classList.contains(`${current_page}-page`)) {
                        var current_index = i;
                    }
                }

                var current_div = document.querySelector(`.${current_page}-page`);
                var new_div = document.querySelector(`.${name}-page`);

                new_div.style.transition = "none";
                if (current_index > new_index) {
                    current_div.style.transform = "translateX(100dvw)";
                    new_div.style.transform = "translateX(-100dvw)";
                } else if (current_index < new_index) {
                    current_div.style.transform = "translateX(-100dvw)";
                    new_div.style.transform = "translateX(100dvw)";
                }

                new_div.offsetWidth;
                new_div.style.transition = "";
                new_div.style.transform = "translateX(0px)";

                document.querySelector(".navigation").querySelectorAll(".nav-link").forEach(button => {
                    if (button.getAttribute("for") == name) {
                        button.setAttribute("active", "true");
                    } else {
                        button.setAttribute("active", "false");
                    }
                });

                if (name == "tuner") {
                    start_tuning();
                }

                if (current_page == "tuner") {
                    stop_tuning();
                }

                current_page = name;
            }
        }
        page_nav("settings");
        note_library = {
            "F_1_sharp, G_1_flat": {"fingering": [1, 1, 1], "frequency": 164.81},
            "G_1_natural": {"fingering": [1, 0, 1], "frequency": 174.61},
            "G_1_sharp, A_1_flat": {"fingering": [0, 1, 1], "frequency": 185.00},
            "A_1_natural": {"fingering": [1, 1, 0], "frequency": 196.00},
            "A_1_sharp, B_1_flat": {"fingering": [1, 0, 0], "frequency": 207.65},
            "B_1_natural, C_1_flat": {"fingering": [0, 1, 0], "frequency": 220.00},
            "C_1_natural, B_1_sharp": {"fingering": [0, 0, 0], "frequency": 233.08},
            "C_1_sharp, D_1_flat": {"fingering": [1, 1, 1], "frequency": 246.94},
            "D_1_natural": {"fingering": [1, 0, 1], "frequency": 261.83},
            "D_1_sharp, E_1_flat": {"fingering": [0, 1, 1], "frequency": 277.18},
            "E_1_natural, F_2_flat": {"fingering": [1, 1, 0], "frequency": 293.76},
            "F_2_natural, E_1_sharp": {"fingering": [1, 0, 0], "frequency": 311.13},
            "F_2_sharp, G_2_flat": {"fingering": [0, 1, 0], "frequency": 329.63},
            "G_2_natural": {"fingering": [0, 0, 0], "frequency": 349.23},
            "G_2_sharp, A_2_flat": {"fingering": [0, 1, 1], "frequency": 369.99},
            "A_2_natural": {"fingering": [1, 1, 0], "frequency": 392.00},
            "A_2_sharp, B_2_flat": {"fingering": [1, 0, 0], "frequency": 415.20},
            "B_2_natural, C_2_flat": {"fingering": [0, 1, 0], "frequency": 440.00},
            "C_2_natural, B_2_sharp": {"fingering": [0, 0, 0], "frequency": 466.16},
            "C_2_sharp, D_2_flat": {"fingering": [1, 1, 0], "frequency": 493.88},
            "D_2_natural": {"fingering": [1, 0, 0], "frequency": 523.25},
            "D_2_sharp, E_2_flat": {"fingering": [0, 1, 0], "frequency": 554.37},
            "E_2_natural, F_3_flat": {"fingering": [0, 0, 0], "frequency": 587.33},
            "F_3_natural, E_2_sharp": {"fingering": [1, 0, 0], "frequency": 622.25},
            "F_3_sharp, G_3_flat": {"fingering": [0, 1, 0], "frequency": 659.26},
            "G_3_natural": {"fingering": [0, 0, 0], "frequency": 698.46},
            "G_3_sharp, A_3_flat": {"fingering": [0, 1, 1], "frequency": 739.99},
            "A_3_natural": {"fingering": [1, 1, 0], "frequency": 783.99},
            "A_3_sharp, B_3_flat": {"fingering": [1, 0, 0], "frequency": 830.61},
            "B_3_natural, C_3_flat": {"fingering": [0, 1, 0], "frequency": 880.00},
            "C_3_natural, B_3_sharp": {"fingering": [0, 0, 0], "frequency": 932.33},
            "C_3_sharp, D_3_flat": {"fingering": [1, 1, 0], "frequency": 987.77},
            "D_3_natural": {"fingering": [1, 0, 0], "frequency": 1046.50},
            "D_3_sharp, E_3_flat": {"fingering": [0, 1, 0], "frequency": 1108.73},
            "E_3_natural": {"fingering": [0, 0, 0], "frequency": 1174.66},
        }
        function init_library() {
            library_array = Object.entries(note_library);
            for (let a = 0; a < library_array.length; a++) {
                var note_name = library_array[a][0];
                note_library[note_name]["position"] = a;
            }
        }
        init_library();
        function find_note(input_name) {
            if (input_name == "F_1_natural" || input_name == "F_1_flat") {
                var input_name = "F_1_sharp";
            } else if (input_name == "E_3_sharp") {
                var input_name = "E_3_natural";
            }
            for (let a = 0; a < library_array.length; a++) {
                var note_names = library_array[a][0].replace(/\s/g, "").split(",");
                if (note_names.indexOf(input_name) != -1) {
                    return library_array[a][1];
                }
            }
            return `Could not find: "${input_name}"`;
        }
        function find_frequency(input_frequency) {
            for (let a = 0; a < library_array.length; a++) {
                if (a > 0) {
                    var bottom_gap = (library_array[a][1]["frequency"] - library_array[a - 1][1]["frequency"]) / 2;
                } else {
                    var bottom_gap = (library_array[a + 1][1]["frequency"] - library_array[a][1]["frequency"]) / 2;
                }
                if (a < library_array.length - 1) {
                    var top_gap = (library_array[a + 1][1]["frequency"] - library_array[a][1]["frequency"]) / 2;
                } else {
                    var top_gap = (library_array[a][1]["frequency"] - library_array[a - 1][1]["frequency"]) / 2;
                }
                var bottom_range = library_array[a][1]["frequency"] - bottom_gap;
                var top_range = library_array[a][1]["frequency"] + top_gap;

                if (bottom_range < input_frequency && input_frequency < top_range) {
                    return library_array[a]
                }
            }
            return null
        }
        scale_patterns = {
            "major": [2,2,1,2,2,2,1],
            "natural_minor": [2,1,2,2,1,2,2],
            "melodic_minor": [2,1,2,2,2,2,1],
            "harmonic_minor": [2,1,2,2,1,3,1]
        };
        function stop_tuning() {
            should_stop = true;
            if (listening_animation) {
                cancelAnimationFrame(listening_animation);
                listening_animation = null;
            }
            if (mic_stream) {
                mic_stream.getTracks().forEach(track => track.stop());
                mic_stream = null;
            }
            if (listening_context) {
                listening_context.close();
                listening_context = null;
            }
        }
        function start_tuning() {
            should_stop = false;
            listening_context = new (window.AudioContext || window.webkitAudioContext)();
            analyser_node = listening_context.createAnalyser();
            listening_context.resume();

            navigator.mediaDevices.getUserMedia({ audio: {echoCancellation: false, noiseSuppression: false, autoGainControl: false,} }).then((stream) => {
                mic_stream = stream;
                listening_context.createMediaStreamSource(stream).connect(analyser_node);
                var detector = PitchDetector.forFloat32Array(analyser_node.fftSize);
                detector.minVolumeDecibels = -10;
                var input = new Float32Array(detector.inputLength);
                analyze_tuning(analyser_node, detector, input, listening_context.sampleRate);
            });

            document.querySelector(".tuning-graphic").setAttribute("waiting", "true");

            var move_y = document.querySelector(".tuning-graphic").offsetHeight / 2;
            document.querySelector(".tuning-selector").style.transform = `translateY(${-move_y}px)`;
            document.querySelector(".tuning-selector").setAttribute("status", "waiting");
            document.querySelector(".tuning-feedback").innerHTML = "Listening...<br><br><br>";
        }
        function get_cents(reading, actual) {
            return 1200 * Math.log2(reading / actual);
        }
        function analyze_tuning(analyser_node, detector, input, sample_rate) {
            if (should_stop) {
                return;
            }
            analyser_node.getFloatTimeDomainData(input);
            var [pitch, clarity] = detector.findPitch(input, sample_rate);
            var note = find_frequency(pitch);
            if (note == null) {
                var position = -1;
            } else {
                var position = note[1]["position"];
            }

            if (note != null && clarity > 0.5 && position > 0 && position < (library_array.length - 1)) {
                if (is_silent == true) {
                    document.querySelector(".tuning-graphic").setAttribute("waiting", "false");
                }
                is_silent = false;
                clearTimeout(silent_period);

                var next_note = library_array[position + 1];
                var prev_note = library_array[position - 1];

                var next_name = next_note[0].split(",");
                for (var i = 0; i < next_name.length; i++) {
                    var title = next_name[i];
                    if (title.includes("sharp")) {
                        var next_title = title.trim();
                    } else if (title.includes("natural")) {
                        var next_title = title.trim();
                        break;
                    }
                }

                var prev_name = prev_note[0].split(",");
                for (var i = 0; i < prev_name.length; i++) {
                    var title = prev_name[i];
                    if (title.includes("flat")) {
                        var prev_title = title.trim();
                    } else if (title.includes("natural")) {
                        var prev_title = title.trim();
                        break;
                    }
                }

                var actual_name = note[0].split(",");
                for (var i = 0; i < actual_name.length; i++) {
                    var title = actual_name[i];
                    if (title.includes("natural")) {
                        var actual_title = title.trim();
                        break;
                    } else {
                        var actual_title = title.trim();
                    }
                }

                var next_title = `${next_title.charAt(0)} ${next_title.substring(4, next_title.length)}`;
                var prev_title = `${prev_title.charAt(0)} ${prev_title.substring(4, prev_title.length)}`;
                var actual_title = `${actual_title.charAt(0)} ${actual_title.substring(4, actual_title.length)}`;

                var top = next_note[1]["frequency"];
                var bottom = prev_note[1]["frequency"];
                var middle = note[1]["frequency"];

                document.querySelectorAll(".medium-mark")[0].setAttribute("note", next_title);
                document.querySelectorAll(".medium-mark")[0].setAttribute("label", `${top.toFixed(1)} Hz`);

                document.querySelectorAll(".medium-mark")[5].setAttribute("note", prev_title);
                document.querySelectorAll(".medium-mark")[5].setAttribute("label", `${bottom.toFixed(1)} Hz`);

                document.querySelector(".big-mark").setAttribute("label", `${middle.toFixed(1)} Hz`);
                document.querySelector(".big-mark").setAttribute("note", actual_title);

                var offset_top = document.querySelectorAll(".medium-mark")[1].offsetTop;
                var offset_bottom = document.querySelectorAll(".medium-mark")[4].offsetTop;

                var accuracy = get_cents(pitch, middle);
                var move_y = ((accuracy / 40) * ((offset_bottom - offset_top) / 2)) + (3 * offset_top);

                var offset_accuracy = Math.abs(accuracy);
                if (offset_accuracy < 10) {
                    document.querySelector(".tuning-selector").setAttribute("status", "good");
                    var amount_tune = "slightly ";
                } else if (offset_accuracy < 20) {
                    document.querySelector(".tuning-selector").setAttribute("status", "ok");
                    var amount_tune = " ";
                } else {
                    document.querySelector(".tuning-selector").setAttribute("status", "bad");
                    var amount_tune = "very ";
                }

                if (Math.sign(accuracy) == 1) {
                    var tune_type = "sharp";
                    var tuning_action = "Pull out";
                } else if (Math.sign(accuracy) == -1) {
                    var tune_type = "flat";
                    var tuning_action = "Push in";
                }
                var slide_measurement = "<i>a quarter inch</i>";

                if (offset_accuracy > 5) {
                    document.querySelector(".tuning-feedback").innerHTML = `
                        Your <u>${actual_title}</u> is <u>${amount_tune}${tune_type}</u><br><br>

                        <u>${tuning_action}</u> your tuning slide and try again.
                    `;
                } else {
                    document.querySelector(".tuning-feedback").innerHTML = "Sound good!<br><br><br>";
                }

                document.querySelector(".tuning-selector").setAttribute("label", `${pitch.toFixed(1)} Hz`);
                document.querySelector(".tuning-selector").style.transform = `translateY(${-move_y}px)`;
            } else {
                if (is_silent == false) {
                    clearTimeout(silent_period);
                    silent_period = setTimeout(() => {
                        document.querySelector(".tuning-graphic").setAttribute("waiting", "true");

                        var move_y = document.querySelector(".tuning-graphic").offsetHeight / 2;
                        document.querySelector(".tuning-selector").style.transform = `translateY(${-move_y}px)`;
                        document.querySelector(".tuning-selector").setAttribute("status", "waiting");
                        document.querySelector(".tuning-feedback").innerHTML = "Listening...<br><br><br>";
                    }, 3000);
                }
                is_silent = true;
            }

            var volume_array =  new Uint8Array(analyser_node.frequencyBinCount);
            analyser_node.getByteFrequencyData(volume_array);

            var values = 0;
            var length = volume_array.length;
            for (var i = 0; i < length; i++) {
                values += volume_array[i];
            }
            var volume = (values / length) / 255;
            document.querySelector(".tuning-indicator").style.height = `${volume * 100}%`;

            listening_animation = requestAnimationFrame(() => analyze_tuning(analyser_node, detector, input, sample_rate));
        }
        function start_listening() {
            should_stop = false;
            listening_context = new (window.AudioContext || window.webkitAudioContext)();
            analyser_node = listening_context.createAnalyser();
            analyser_node.minDecibels = -100;
            analyser_node.maxDecibels = -10;
            analyser_node.smoothingTimeConstant = 0;
            listening_context.resume();

            navigator.mediaDevices.getUserMedia({ audio: {echoCancellation: false, noiseSuppression: false, autoGainControl: false, volume: 1} }).then((stream) => {
                mic_stream = stream;
                listening_context.createMediaStreamSource(stream).connect(analyser_node);
                var detector = PitchDetector.forFloat32Array(analyser_node.fftSize);
                detector.minVolumeDecibels = -10;
                var input = new Float32Array(detector.inputLength);
                analyze_frequency(analyser_node, detector, input, listening_context.sampleRate);
            });
            document.querySelector(".listen-feedback").innerHTML = "Listening...";

            prev_rendered_note = null;
            scale_listening_index = 0;
        }
        listened_notes = [1, 2, 3, 4, 5, 6];
        prev_listened_note = null;
        silent_period = null;
        waiting_period = null;
        is_silent = false;
        function analyze_frequency(analyser_node, detector, input, sample_rate) {
            if (should_stop) {
                return;
            }
            analyser_node.getFloatTimeDomainData(input);
            var [pitch, clarity] = detector.findPitch(input, sample_rate);

            var volume_array =  new Uint8Array(analyser_node.frequencyBinCount);
            analyser_node.getByteFrequencyData(volume_array);

            var values = 0;
            var length = volume_array.length;
            for (var i = 0; i < length; i++) {
                values += volume_array[i];
            }
            var volume = (values / length) / 255;

            var note_grid = document.querySelector(".floating-card").querySelector(".note-grid");
            if (note_grid.classList.contains("reverse")) {
                var position_divs = Array.from(note_grid.querySelectorAll(".position-div")).reverse();
            } else {
                var position_divs = note_grid.querySelectorAll(".position-div");
            }
            var volume_div = position_divs[scale_listening_index].querySelector(":scope > div:last-child").querySelector(".volume");
            volume_div.style.height = `calc(calc(100% + 40px) * ${volume})`;

            var note_name = find_frequency(pitch);
            listened_notes.shift();
            if (note_name != null && clarity > 0.5) {
                listened_notes.push(note_name);
            } else {
                listened_notes.push(null);
            }

            var all_equal = listened_notes.every(v => v == listened_notes[0]);
            var all_null = listened_notes.every(v => v == null);

            if (all_equal == true && all_null == false) {
                if (prev_listened_note != listened_notes[listened_notes.length - 1]) {
                    send_feedback(listened_notes[listened_notes.length - 1]);
                    if (scale_listening_index == listening_notes.length - 1) {
                        document.querySelector(".listen-nav").querySelector(".click-area").setAttribute("disabled", "false");
                        if (is_listening == "note") {
                            render_you_note(note_name[0].split(",")[0].trim());
                            note_grid.querySelector(".position-div").setAttribute("correct", "true");
                            note_grid.querySelector(".position-div").querySelector(".volume").style.height = "0px";
                        }
                    } else {
                        render_you_note(note_name[0].split(",")[0].trim());
                    }

                    is_silent = false;
                    clearTimeout(silent_period);
                    prev_listened_note = listened_notes[listened_notes.length - 1];
                }
            } else {
                if (is_silent == false) {
                    clearTimeout(silent_period);
                    silent_period = setTimeout(() => {
                        document.querySelector(".listen-feedback").innerHTML = "Listening...";
                    }, 3000);
                }
                is_silent = true;
            }

            listening_animation = requestAnimationFrame(() => analyze_frequency(analyser_node, detector, input, sample_rate));
        }
        function send_feedback(your_note) {
            var your_fingering = your_note[1]["fingering"];
            var actual_note = listening_notes[scale_listening_index];
            var actual_fingering = find_note(actual_note)["fingering"];

            var finger_names = ["pointer", "middle", "ring"];
            var action_words = ["press", "release"];
            var total_actions = {"release": [], "press": []};
            for (var i = 0; i < 3; i++) {
                if (actual_fingering[i] != your_fingering[i]) {
                    var word = action_words[your_fingering[i]];
                    var finger = finger_names[i];
                    total_actions[word].push(finger);
                }
            }

            var feedback_txt = "";
            for (var j = 0; j < 2; j++) {
                var action_array = total_actions[action_words[j]];
                if (j == 1 && feedback_txt != "" && action_array.length > 0) {
                    feedback_txt += " while ";
                }
                if (action_array.length > 0) {
                    if (feedback_txt.includes("while")) {
                        feedback_txt += `<u>releasing</u> your`;
                        feedback_txt = feedback_txt.replace("press", "press down");
                    } else {
                        feedback_txt += `<u>${action_words[j]}</u> your`;
                    }
                    if (total_actions[action_words[j]].length == 1) {
                        feedback_txt += ` <u>${action_array[0]}</u>`;
                    } else if (total_actions[action_words[j]].length == 2) {
                        feedback_txt += ` <u>${action_array[0]}</u> and <u>${action_array[1]}</u>`;
                    } if (total_actions[action_words[j]].length == 3) {
                        feedback_txt += ` <u>${action_array[0]}</u>, <u>${action_array[1]}</u>, and <u>${action_array[2]}</u>`;
                    }

                    if (action_array.length > 1) {
                        feedback_txt += " fingers";
                    } else {
                        feedback_txt += " finger";
                    }
                }
            }

            if (feedback_txt == "") {
                if (find_note(actual_note)["position"] > your_note[1]["position"]) {
                    var feedback_html = `You're playing too <u>low</u>. Tighten your lip muscles.`;
                } else if (find_note(actual_note)["position"] < your_note[1]["position"]) {
                    var feedback_html = `You're playing too <u>high</u>. Loosen your lip muscles.`;
                } else if (find_note(actual_note)["position"] == your_note[1]["position"]) {
                    var feedback_html = `
                        Sounds good!
                    `;

                    if (is_listening == "note") {
                        stop_listening();
                    } else if (is_listening == "scale") {
                        var note_grid = document.querySelector(".floating-card").querySelector(".note-grid");
                        if (note_grid.classList.contains("reverse")) {
                            var position_divs = Array.from(note_grid.querySelectorAll(".position-div")).reverse();
                        } else {
                            var position_divs = note_grid.querySelectorAll(".position-div");
                        }

                        var position_div = position_divs[scale_listening_index];
                        position_div.setAttribute("listening", "false");
                        position_div.setAttribute("correct", "true");
                        position_div.querySelector("#you-pill").style.opacity = "0";
                        position_div.querySelector(".volume").style.height = "0";
                        position_div.querySelectorAll(".helper_line").forEach(line => {
                            line.classList.remove("helper_line");
                        });

                        if (scale_listening_index == 7) {
                            stop_listening();

                            var new_box_x = Number(document.querySelector(".floating-card").querySelector("svg").getAttribute("viewBox").split(" ")[2]) - 100;
                            var box_y = document.querySelector(".floating-card").querySelector("svg").getAttribute("viewBox").split(" ")[3];
                            document.querySelector(".floating-card").querySelector("svg").setAttribute("viewBox", `0 0 ${new_box_x} ${box_y}`);
                        } else {
                            scale_listening_index++
                            move_listen(scale_listening_index);
                        }
                    }
                }
            } else {
                var feedback_html = feedback_txt.substring(0, 3) + feedback_txt.charAt(3).toUpperCase() + feedback_txt.substring(4, feedback_txt.length) + ".";
            }
            document.querySelector(".listen-feedback").innerHTML = feedback_html;
        }
        function restart_listening() {
            var wrapper = document.querySelector(".floating-card");
            wrapper.querySelectorAll(".position-div").forEach(item => {
                item.setAttribute("listening", "false");
                item.setAttribute("correct", "false");

                item.querySelector("#you-pill").style.opacity = "0";
                item.querySelector(".volume").style.height = "0px";
                item.querySelectorAll(".helper_line").forEach(line => {
                    line.classList.remove("helper_line");
                });
            });

            wrapper.querySelector(".scale-svg-wrapper").scrollTo({
                left: 0,
                behavior: "instant",
            });
            document.querySelector(".listen-nav").querySelector(".click-area").setAttribute("disabled", "true");
            prev_listened_note = null;

            move_listen(0);
            start_listening();
        }
        function stop_listening(action = false) {
            should_stop = true;
            if (listening_animation) {
                cancelAnimationFrame(listening_animation);
                listening_animation = null;
            }
            if (mic_stream) {
                mic_stream.getTracks().forEach(track => track.stop());
                mic_stream = null;
            }
            if (listening_context) {
                listening_context.close();
                listening_context = null;
            }

            var note_grid = document.querySelector(".floating-card").querySelector(".note-grid");
            if (note_grid.classList.contains("reverse")) {
                var position_divs = Array.from(note_grid.querySelectorAll(".position-div")).reverse();
            } else {
                var position_divs = note_grid.querySelectorAll(".position-div");
            }

            var wrapper = position_divs[scale_listening_index].querySelector(":scope > div:last-child");
            var you_pill = wrapper.querySelector("#you-pill");
            you_pill.setAttribute("tail", "top");
            you_pill.style.opacity = "0";

            document.querySelector(".floating-card").querySelector(".click-area").setAttribute("active", "false");

            if (action != false) {
                if (action == "auto") {
                    action_html = `
                        Microphone is off.<br><br>
                        <div class="click-text" onclick="start_listening()">
                            Start listening
                        </div>
                    `;
                }
                document.querySelector(".listen-feedback").innerHTML = action_html;
            }
        }
        prev_bpm = 0;
        bpm_scrolling = false;
        set_on_stop = null;
        function change_bpm(element) {
            requestAnimationFrame(() => update_bpm(element));
        }
        function update_bpm(element) {
            if (bpm_scrolling == false) {
                clearTimeout(set_on_stop);
                Haptics.selectionStart();
            }
            bpm_scrolling = true;

            var scroll_left = Math.round(element.scrollLeft);
            var left = Math.round(scroll_left + (element.offsetWidth / 2));

            for (i = -5; i <= 5; i++) {
                var div = element.querySelector(`[left="${left + i}"`);
                if (div) {
                    var bpm = Number(div.getAttribute("bpm"));
                    break;
                }
            }

            if (bpm != prev_bpm) {
                prev_bpm = bpm;
                Haptics.vibrate({ duration: 1 });
            }

            update_metronome_config("bpm", bpm);
            document.querySelector(".bpm-display").innerText = bpm;
        }
        function stop_bpm() {
            bpm_scrolling = false;
            set_on_stop = setTimeout(() => {
                set_bpm(metronome_config["bpm"], "smooth");
                Haptics.selectionEnd();
            }, 10);
        }
        function set_bpm(bpm, behavior = "instant") {
            if (bpm < 20) {
                var bpm = 20;
            } else if (bpm > 220) {
                var bpm = 220;
            }

            var scroll_wrapper = document.querySelector(".bpm-scroll");
            var div = scroll_wrapper.querySelector(`[bpm="${bpm}"`);

            var target_scroll = div.getBoundingClientRect().left + scroll_wrapper.scrollLeft - div.parentElement.getBoundingClientRect().left - (scroll_wrapper.getBoundingClientRect().width / 2);
            scroll_wrapper.scrollTo({
                left: target_scroll + 1.5,
                behavior: behavior
            });
        }
        function modify_bpm(direction) {
            if (direction == "plus") {
                update_metronome_config("bpm", metronome_config["bpm"] + 1);
            } else if (direction == "minus") {
                update_metronome_config("bpm", metronome_config["bpm"] - 1);
            }

            set_bpm(metronome_config["bpm"], "smooth");
        }
        function init_press(action) {
            press = setTimeout(() => {
                long_press(action);
            }, 300);
        }
        function long_press(action) {
            pressing = setInterval(() => {
                modify_bpm(action);
            }, 100);
        }
        function end_press() {
            clearTimeout(press);
            clearInterval(pressing);
        }
        function start_tapping(button) {
            button.setAttribute("onclick", "taping(this)");
            button.innerText = "Keep tapping";

            prev_tap = Date.now();
            tapping_bpm = [];

            taping_stopper = setTimeout(() => {
                stop_tapping(button);
            }, 2000);
        }
        function taping(button) {
            var now = Date.now();
            var displacement = now - prev_tap;
            prev_tap = now;

            tapping_bpm.push(displacement);
            if (tapping_bpm.length == 5) {
                var sum = tapping_bpm.reduce((a, b) => a + b, 0);
                var avg = sum / tapping_bpm.length;
                var bpm = Math.round(60000 / avg);

                update_division(document.querySelector(".division-grid").querySelector("[division='1']"));
                update_metronome_config("bpm", bpm);
                set_bpm(bpm, "smooth");
                tapping_bpm.shift();
            }

            clearTimeout(taping_stopper);
            taping_stopper = setTimeout(() => {
                stop_tapping(button);
            }, 2000);
        }
        function stop_tapping(button) {
            button.innerText = "Tap";
            button.setAttribute("onclick", "start_tapping(this)");
        }
        function update_boxes(button) {
            var number = Number(button.getAttribute("value").trim());
            update_metronome_config("top", number);

            var wrapper = document.querySelector(".beats-wrapper");
            var space = wrapper.parentElement.getBoundingClientRect().width - (2 * Number(window.getComputedStyle(wrapper).getPropertyValue("padding").replace("px", "")));
            var gap = Number(window.getComputedStyle(wrapper).getPropertyValue("column-gap").replace("px", ""))
            var width = (space - (gap * (number - 1))) / number;

            var max_width = 100;
            if (width > max_width) {
                var width = max_width;
                var margin_right = gap * (8 - number)
            } else {
                var margin_right = 0;
            }

            var grid_columns = "";
            for (var a = 0; a < number; a++) {
                grid_columns += `${width}px `;
            }
            for (b = number; b < 8; b++) {
                grid_columns += "0px ";
            }

            wrapper.style.marginRight = `-${margin_right}px`;
            wrapper.style.gridTemplateColumns = grid_columns;

            button.parentElement.querySelectorAll("div").forEach(div => {
                if (div == button) {
                    div.setAttribute("active", "true");
                } else {
                    div.setAttribute("active", "false");
                }
            });
            update_signature();
        }
        function update_division_options(button) {
            var number = Number(button.getAttribute("value").trim());
            update_metronome_config("bottom", number);
            var layout = {
                2: [
                    [1, 2],
                    [2, 4],
                    [3, 4],
                    [4, 8]
                ],
                4: [
                    [1, 4],
                    [2, 8],
                    [3, 8],
                    [4, 16]
                ],
                8: [
                    [1, 8],
                    [2, 16],
                    [3, 16],
                    [4, 32]
                ]
            };

            var wrapper = document.querySelector(".division-grid").querySelectorAll(":scope > div");
            for (var i = 0; i < 4; i++) {
                wrapper[i].innerHTML = generate_svg(layout[number][i][0], layout[number][i][1]);
            }

            button.parentElement.querySelectorAll(":scope > div").forEach(div => {
                if (div == button) {
                    div.setAttribute("active", "true");
                } else {
                    div.setAttribute("active", "false");
                }
            });
            var division_btn = document.querySelector(".division-grid").querySelector(`[division="${metronome_config["division"]}"`);
            update_division(division_btn)
            update_signature();
        }
        function update_division(button) {
            number = Number(button.getAttribute("division"));
            update_metronome_config("division", number);

            button.parentElement.querySelectorAll(":scope > div").forEach(div => {
                if (div == button) {
                    div.setAttribute("active", "true");
                } else {
                    div.setAttribute("active", "false");
                }
            });

            document.querySelector(".note-type").innerHTML = button.innerHTML;
        }
        function update_box_sound(element) {
            var container = element.parentElement.querySelectorAll(".box");
            var found = false;
            var counter = 0;
            for (var i = 0; i < container.length; i++) {
                var div = container[i];
                if (element == div) {
                    var found = true;
                }

                if (found == true) {
                    counter++
                    div.setAttribute("active", "true");
                } else {
                    div.setAttribute("active", "false");
                }
            }

            var current_sounds = metronome_config["sounds"];
            var index = element.parentElement.getAttribute("index");
            current_sounds[index] = counter;
            update_metronome_config("sounds", current_sounds);
        }
        function open_panel(name, button) {
            if (name == "time") {
                var wrapper = document.querySelector(".time-sig-panel");
                var other_wrapper = document.querySelector(".sub-division-panel");
                var other_button = document.querySelector(".note-type");
            } else if (name == "division") {
                var wrapper = document.querySelector(".sub-division-panel");
                var other_wrapper = document.querySelector(".time-sig-panel");
                var other_button = document.querySelector(".time-signature");
            }

            button.setAttribute("active", "true");
            other_button.setAttribute("active", "false");

            wrapper.setAttribute("active", "true");
            other_wrapper.setAttribute("active", "false");
        }
        function close_panel(element, type) {
            var wrapper = element.parentElement.parentElement;
            wrapper.setAttribute("active", "false");

            if (type == "time") {
                var button = document.querySelector(".time-signature");
            } else if (type == "division") {
                var button = document.querySelector(".note-type");
            }
            button.setAttribute("active", "false");
        }
        function generate_scales(scale_type, starting_note, error = false) {
            var scale_pattern = scale_patterns[scale_type];
            if (Number(starting_note.charAt(2)) > 2) {
                var starting_note = starting_note.charAt(0) + "_2_" + starting_note.substring(4, starting_note.length);
            }

            var step = find_note(starting_note)["position"];
            var scale_notes = [library_array[step]];
            var final_scale = {"scale": []};

            scale_pattern.forEach(action => {
                step = step + action;
                scale_notes.push(library_array[step]);
            });

            var all_letters = ["A", "B", "C", "D", "E", "F", "G"];
            next_letter = starting_note.charAt(0);
            letter_position = all_letters.indexOf(next_letter);

            for (c = 0; c < scale_notes.length; c++) {
                var options = scale_notes[c][0].replace(/\s/g, "").split(",");
                note_found = false;
                options.forEach(item => {
                    var letter = item.charAt(0);
                    if (letter == next_letter) {
                        var mini_name = item.substring(0, 3);
                        var mini_accidental = item.substring(4, item.length);
                        if (letter == "E" && mini_accidental == "sharp") {
                            var mini_octave = Number(mini_name.charAt(2)) + 1;
                            var mini_fingering = find_note(`F_${mini_octave}_natural`)["fingering"];
                        } else if (letter == "B" && mini_accidental == "sharp") {
                            var mini_octave = Number(mini_name.charAt(2));
                            var mini_fingering = find_note(`C_${mini_octave}_natural`)["fingering"];
                        } else if (letter == "C" && mini_accidental == "flat") {
                            var mini_octave = Number(mini_name.charAt(2));
                            var mini_fingering = find_note(`B_${mini_octave}_natural`)["fingering"];
                        } else if (letter == "F" && mini_accidental == "flat") {
                            var mini_octave = Number(mini_name.charAt(2)) - 1;
                            var mini_fingering = find_note(`E_${mini_octave}_natural`)["fingering"];
                        } else {
                            var mini_fingering = find_note(`${mini_name}_${mini_accidental}`, "name")["fingering"];
                        }

                        final_scale["scale"].push([item, mini_fingering]);
                        note_found = true;
                    }
                });

                if (note_found == false) {
                    var note_accidental = starting_note.substring(4, starting_note.length);
                    var note_position = all_letters.indexOf(starting_note.charAt(0));
                    var note_octave = starting_note.charAt(2);
                    if (note_accidental == "sharp") {
                        var note_position = note_position + 1;
                        var new_accidental = "flat";
                    } else if (note_accidental == "flat") {
                        var note_position = note_position - 1;
                        var new_accidental = "sharp";
                    }
                    if (note_position > all_letters.length - 1) {
                        var note_position = 0;
                    } else if (note_position < 0) {
                        var note_position = all_letters.length - 1;
                    }

                    var new_letter = all_letters[note_position] + "_" + note_octave + "_" + new_accidental;
                    var new_note_name = all_letters[note_position] + "-" + new_accidental;
                    var old_note_name = starting_note.charAt(0) + "-" + note_accidental;
                    var error = `Displaying the <u>${new_note_name} ${scale_type.replaceAll("_", " ")} scale</u> instead of the <u>${old_note_name} ${scale_type.replaceAll("_", " ")} scale</u>, an equivalent scale that avoids the use of double ${note_accidental}s.`;
                    return generate_scales(scale_type, new_letter, error);
                }

                letter_position++;
                if (letter_position > all_letters.length - 1) {
                    letter_position = 0;
                }
                next_letter = all_letters[letter_position];
            }

            if (error != false) {
                final_scale["error"] = error;
            }

            return final_scale;
        }
        function render_scales(notes_array, wrapper) {
            wrapper.innerHTML = `
                <div class="scale-svg-wrapper">
                    <svg class="scale-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">
                        <foreignObject x="0" y="0" width="100%" height="100%">
                            <div class="scale-staff-wrapper">
                                <div class="listen-selector"></div>
                                <div class="note-grid">
                                    <div class="clef-position-div">
                                        <div id="E_3" highlight="4,5,6" linenum="6"></div>
                                        <div id="D_3" highlight="4,5"></div>
                                        <div id="C_3" highlight="4,5" linenum="5"></div>
                                        <div id="B_3" highlight="4"></div>
                                        <div id="A_3" highlight="4" linenum="4"></div>
                                        <div id="G_3"></div>
                                        <div id="F_3" class="line"></div>
                                        <div id="E_2"></div>
                                        <div id="D_2" class="line"></div>
                                        <div id="C_2"></div>
                                        <div id="B_2" class="line"></div>
                                        <div id="A_2"></div>
                                        <div id="G_2" class="line"></div>
                                        <div id="F_2"></div>
                                        <div id="E_1" class="line"></div>
                                        <div id="D_1"></div>
                                        <div id="C_1" highlight="3" linenum="3"></div>
                                        <div id="B_1" highlight="3"></div>
                                        <div id="A_1" highlight="3,2" linenum="2"></div>
                                        <div id="G_1" highlight="3,2"></div>
                                        <div id="F_1" highlight="3,2,1" linenum="1"></div>
                                        <svg class="mini-treble-cleff" viewBox="0 0 40 110" fill="none" xmlns="http://www.w3.org/2000/svg">
                                            <path d="M7.99791 100.527C7.99791 104.616 11.0911 110 19.4426 110C22.352 110 24.8942 109.256 27.1174 107.893C30.4619 105.544 31.3222 101.455 31.3222 97.5597C31.3222 95.1529 30.9549 92.369 30.3362 88.8409C30.1526 87.6037 29.7756 85.7478 29.4083 83.3312C35.4689 81.3497 39.983 75.0378 39.983 68.6678C39.983 59.3303 33.3617 53.0184 24.3336 53.0184C23.7149 49.3066 23.0963 45.6528 22.6034 42.1924C29.099 35.3198 33.613 27.5869 33.613 17.7565C33.613 12.1212 31.8828 7.54914 30.8872 5.3165C29.4083 2.1652 27.6104 0 26.4988 0C26.0638 0 24.15 0.744212 22.1104 3.1513C18.1473 7.85845 17.0357 15.775 17.0357 20.9657C17.0357 24.3101 17.345 27.3453 18.3986 34.2758C18.3309 34.3339 15.1121 37.6106 13.8169 38.6643C8.18158 43.8646 0.390686 51.4042 0.390686 63.7864C0.390686 75.3471 10.4724 84.4429 21.9848 84.4429C23.773 84.4429 25.4452 84.2592 26.8661 84.0079C28.0453 89.9525 28.7897 94.2829 28.7897 97.5597C28.7897 103.997 25.4452 107.4 19.2009 107.4C17.7123 107.4 16.4171 107.091 16.2914 107.091C16.2334 107.023 16.1078 106.965 16.1078 106.907C16.1078 106.781 16.2334 106.714 16.4171 106.714C19.3266 106.221 22.2264 103.746 22.2264 99.7926C22.2264 96.4481 19.6938 92.92 15.0541 92.92C10.7237 92.92 7.99791 96.4481 7.99791 100.527ZM20.9311 17.9402C21.4918 15.4657 24.3336 8.97007 27.5524 8.97007C28.4804 8.97007 29.9593 11.9375 29.9593 16.2679C29.9593 22.7056 25.2035 27.529 20.9311 31.7337C20.5638 29.2591 20.2545 26.8523 20.2545 24.2521C20.2545 21.9613 20.4382 19.854 20.9311 17.9402ZM26.3731 81.5334C25.1359 81.7847 23.9663 81.9103 22.787 81.9103C13.9426 81.9103 6.39333 75.724 6.39333 66.3769C6.39333 58.8374 11.7097 52.0905 17.1614 47.3831C18.2053 46.4551 19.2009 45.5949 20.1289 44.6669C20.6798 48.0017 21.1148 50.9112 21.5497 53.4534C15.9144 55.1256 12.0867 61.0606 12.0867 66.8796C12.0867 71.21 15.4891 77.145 20.4382 77.145C20.9311 77.145 21.4918 76.8937 21.4918 76.3427C21.4918 75.7821 20.8731 75.4727 20.1289 74.9797C17.7123 73.4912 16.3494 71.8866 16.3494 68.8515C16.3494 65.0817 19.2009 62.0465 22.787 61.1862L26.3731 81.5334ZM35.1596 70.0887C35.1596 74.4868 33.3617 79.0008 28.9733 80.7988C27.6781 73.3752 26.0058 63.5351 25.5708 60.8092C31.1385 60.8092 35.1596 64.5887 35.1596 70.0887Z" fill="black"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </foreignObject>
                    </svg>
                </div>
                <div class="scale-nav">
                    <div class="click-area" premium="true">
                        <div onclick="open_listen(this.parentElement, 'scale')">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M19 10V12C19 15.866 15.866 19 12 19M5 10V12C5 15.866 8.13401 19 12 19M12 19V22M8 22H16M12 15C10.3431 15 9 13.6569 9 12V5C9 3.34315 10.3431 2 12 2C13.6569 2 15 3.34315 15 5V12C15 13.6569 13.6569 15 12 15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                            </svg>
                        </div>
                        <div class="alt-icon" onclick="stop_listening()">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3 7.8C3 6.11984 3 5.27976 3.32698 4.63803C3.6146 4.07354 4.07354 3.6146 4.63803 3.32698C5.27976 3 6.11984 3 7.8 3H16.2C17.8802 3 18.7202 3 19.362 3.32698C19.9265 3.6146 20.3854 4.07354 20.673 4.63803C21 5.27976 21 6.11984 21 7.8V16.2C21 17.8802 21 18.7202 20.673 19.362C20.3854 19.9265 19.9265 20.3854 19.362 20.673C18.7202 21 17.8802 21 16.2 21H7.8C6.11984 21 5.27976 21 4.63803 20.673C4.07354 20.3854 3.6146 19.9265 3.32698 19.362C3 18.7202 3 17.8802 3 16.2V7.8Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                    </div>
                    <div class="click-area">
                        <div onclick="play_scale(this.parentElement)">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M19.7479 4.99993C21.1652 6.97016 22 9.38756 22 11.9999C22 14.6123 21.1652 17.0297 19.7479 18.9999M15.7453 7.99993C16.5362 9.13376 17 10.5127 17 11.9999C17 13.4872 16.5362 14.8661 15.7453 15.9999M9.63432 4.36561L6.46863 7.5313C6.29568 7.70425 6.2092 7.79073 6.10828 7.85257C6.01881 7.9074 5.92127 7.9478 5.81923 7.9723C5.70414 7.99993 5.58185 7.99993 5.33726 7.99993H3.6C3.03995 7.99993 2.75992 7.99993 2.54601 8.10892C2.35785 8.20479 2.20487 8.35777 2.10899 8.54594C2 8.75985 2 9.03987 2 9.59993V14.3999C2 14.96 2 15.24 2.10899 15.4539C2.20487 15.6421 2.35785 15.7951 2.54601 15.8909C2.75992 15.9999 3.03995 15.9999 3.6 15.9999H5.33726C5.58185 15.9999 5.70414 15.9999 5.81923 16.0276C5.92127 16.0521 6.01881 16.0925 6.10828 16.1473C6.2092 16.2091 6.29568 16.2956 6.46863 16.4686L9.63431 19.6342C10.0627 20.0626 10.2769 20.2768 10.4608 20.2913C10.6203 20.3038 10.7763 20.2392 10.8802 20.1175C11 19.9773 11 19.6744 11 19.0686V4.9313C11 4.32548 11 4.02257 10.8802 3.88231C10.7763 3.76061 10.6203 3.69602 10.4608 3.70858C10.2769 3.72305 10.0627 3.93724 9.63432 4.36561Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                            </svg>
                        </div>
                        <div class="alt-icon" onclick="stop_scale(this.parentElement)">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3 7.8C3 6.11984 3 5.27976 3.32698 4.63803C3.6146 4.07354 4.07354 3.6146 4.63803 3.32698C5.27976 3 6.11984 3 7.8 3H16.2C17.8802 3 18.7202 3 19.362 3.32698C19.9265 3.6146 20.3854 4.07354 20.673 4.63803C21 5.27976 21 6.11984 21 7.8V16.2C21 17.8802 21 18.7202 20.673 19.362C20.3854 19.9265 19.9265 20.3854 19.362 20.673C18.7202 21 17.8802 21 16.2 21H7.8C6.11984 21 5.27976 21 4.63803 20.673C4.07354 20.3854 3.6146 19.9265 3.32698 19.362C3 18.7202 3 17.8802 3 16.2V7.8Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                    </div>
                    <div class="click-area">
                        <div onclick="switch_order(this.parentElement)">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M6 6L18 18M18 18V10M18 18H10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                    </div>
                    <div class="click-area">
                        <div onclick="expand_scale(this.parentElement)">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M16 8L21 3M21 3H16M21 3V8M8 8L3 3M3 3L3 8M3 3L8 3M8 16L3 21M3 21H8M3 21L3 16M16 16L21 21M21 21V16M21 21H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                    </div>
                </div>
            `;
            var note_grid = wrapper.querySelector(".note-grid");

            var notes_atr = [];
            notes_array["scale"].forEach(note => {
                notes_atr.push(note[0]);

                var position_div = document.createElement("DIV");
                position_div.setAttribute("class", "position-div");

                var line_id = note[0].substring(0, 3);
                var note_accidental = note[0].substring(4, note[0].length);

                var note_position = find_note(note[0])["position"];
                if (note_position > 17) {
                    tail_orientation = "bottom";
                } else {
                    tail_orientation = "top";
                }

                position_div.innerHTML = `
                    <div>
                        <div id="E_3" highlight="4,5,6" linenum="6"></div>
                        <div id="D_3" highlight="4,5"></div>
                        <div id="C_3" highlight="4,5" linenum="5"></div>
                        <div id="B_3" highlight="4"></div>
                        <div id="A_3" highlight="4" linenum="4"></div>
                        <div id="G_3"></div>
                        <div id="F_3" class="line"></div>
                        <div id="E_2"></div>
                        <div id="D_2" class="line"></div>
                        <div id="C_2"></div>
                        <div id="B_2" class="line"></div>
                        <div id="A_2"></div>
                        <div id="G_2" class="line"></div>
                        <div id="F_2"></div>
                        <div id="E_1" class="line"></div>
                        <div id="D_1"></div>
                        <div id="C_1" highlight="3" linenum="3"></div>
                        <div id="B_1" highlight="3"></div>
                        <div id="A_1" highlight="3,2" linenum="2"></div>
                        <div id="G_1" highlight="3,2"></div>
                        <div id="F_1" highlight="3,2,1" linenum="1"></div>
                    </div>
                    <div>
                        <div id="E_3" highlight="4,5,6" linenum="6"></div>
                        <div id="D_3" highlight="4,5"></div>
                        <div id="C_3" highlight="4,5" linenum="5"></div>
                        <div id="B_3" highlight="4"></div>
                        <div id="A_3" highlight="4" linenum="4"></div>
                        <div id="G_3"></div>
                        <div id="F_3" class="line"></div>
                        <div id="E_2"></div>
                        <div id="D_2" class="line"></div>
                        <div id="C_2"></div>
                        <div id="B_2" class="line"></div>
                        <div id="A_2"></div>
                        <div id="G_2" class="line"></div>
                        <div id="F_2"></div>
                        <div id="E_1" class="line"></div>
                        <div id="D_1"></div>
                        <div id="C_1" highlight="3" linenum="3"></div>
                        <div id="B_1" highlight="3"></div>
                        <div id="A_1" highlight="3,2" linenum="2"></div>
                        <div id="G_1" highlight="3,2"></div>
                        <div id="F_1" highlight="3,2,1" linenum="1"></div>
                        <div class="selected-pill" id="you-pill">
                            <div class="pill">
                                <div class="top-tail"></div>
                                <div class="bottom-tail"></div>
                            </div>
                        </div>
                        <span class="volume"></span>
                    </div>
                `;
                note_grid.append(position_div);
                var line_div = position_div.querySelector("#" + line_id);

                line_div.innerHTML = `
                    <div class="selected-pill" tail=${tail_orientation} accidental="${note_accidental}">
                        <div class="pill">
                            <div class="top-tail"></div>
                            <div class="bottom-tail"></div>
                        </div>
                    </div>
                `;

                if (line_div.getAttribute("highlight")) {
                    var lines = line_div.getAttribute("highlight").split(",");
                    lines.forEach(div => {
                        var highlight_line = position_div.querySelector(`[linenum="${div}"]`);
                        highlight_line.classList.add("helper_line");
                    });
                }

                for (d = 0; d < note[1].length; d++) {
                    var fingering = note[1][d];
                    if (fingering == 1) {
                        window['finger_class' + (d + 1)] = "closed-finger";
                    } else if (fingering == 0) {
                        window['finger_class' + (d + 1)] = "open-finger";
                    }
                }

                if (note_position > 14) {
                    var finger_box_line = position_div.querySelector("#B_1");
                } else {
                    var finger_box_line = position_div.querySelector("#A_3");
                }

                finger_box_line.innerHTML = `
                    <div class="finger-box">
                        <div class="${finger_class1}"></div>
                        <div class="${finger_class2}"></div>
                        <div class="${finger_class3}"></div>
                    </div>
                `;
            });

            var notes_atr = notes_atr.join(",");
            wrapper.setAttribute("notes", notes_atr);

            if (document.querySelector("#" + wrapper.getAttribute("id") + "-error")) {
                if (typeof notes_array["error"] != "undefined") {
                    document.querySelector("#" + wrapper.getAttribute("id") + "-error").innerHTML = `
                        <div class="error-icon">
                            <svg height="20px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 8V12M12 16H12.01M22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <div class="h2">
                            ${notes_array["error"]}
                        </div>
                    `;
                    document.querySelector("#" + wrapper.getAttribute("id") + "-error").style.display = "";
                } else {
                    document.querySelector("#" + wrapper.getAttribute("id") + "-error").style.display = "none";
                }
            }

            var view_box = `0 0 ${note_grid.getBoundingClientRect().width} ${note_grid.getBoundingClientRect().height}`;
            wrapper.querySelector(".scale-svg").setAttribute("viewBox", view_box);
        }
        function render_listen_note(note, wrapper) {
            wrapper.innerHTML = `
                <svg class="scale-svg" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">
                    <foreignObject x="0" y="0" width="100%" height="100%">
                        <div class="scale-staff-wrapper">
                            <div class="note-grid">
                                <svg class="mini-treble-cleff" viewBox="0 0 40 110" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M7.99791 100.527C7.99791 104.616 11.0911 110 19.4426 110C22.352 110 24.8942 109.256 27.1174 107.893C30.4619 105.544 31.3222 101.455 31.3222 97.5597C31.3222 95.1529 30.9549 92.369 30.3362 88.8409C30.1526 87.6037 29.7756 85.7478 29.4083 83.3312C35.4689 81.3497 39.983 75.0378 39.983 68.6678C39.983 59.3303 33.3617 53.0184 24.3336 53.0184C23.7149 49.3066 23.0963 45.6528 22.6034 42.1924C29.099 35.3198 33.613 27.5869 33.613 17.7565C33.613 12.1212 31.8828 7.54914 30.8872 5.3165C29.4083 2.1652 27.6104 0 26.4988 0C26.0638 0 24.15 0.744212 22.1104 3.1513C18.1473 7.85845 17.0357 15.775 17.0357 20.9657C17.0357 24.3101 17.345 27.3453 18.3986 34.2758C18.3309 34.3339 15.1121 37.6106 13.8169 38.6643C8.18158 43.8646 0.390686 51.4042 0.390686 63.7864C0.390686 75.3471 10.4724 84.4429 21.9848 84.4429C23.773 84.4429 25.4452 84.2592 26.8661 84.0079C28.0453 89.9525 28.7897 94.2829 28.7897 97.5597C28.7897 103.997 25.4452 107.4 19.2009 107.4C17.7123 107.4 16.4171 107.091 16.2914 107.091C16.2334 107.023 16.1078 106.965 16.1078 106.907C16.1078 106.781 16.2334 106.714 16.4171 106.714C19.3266 106.221 22.2264 103.746 22.2264 99.7926C22.2264 96.4481 19.6938 92.92 15.0541 92.92C10.7237 92.92 7.99791 96.4481 7.99791 100.527ZM20.9311 17.9402C21.4918 15.4657 24.3336 8.97007 27.5524 8.97007C28.4804 8.97007 29.9593 11.9375 29.9593 16.2679C29.9593 22.7056 25.2035 27.529 20.9311 31.7337C20.5638 29.2591 20.2545 26.8523 20.2545 24.2521C20.2545 21.9613 20.4382 19.854 20.9311 17.9402ZM26.3731 81.5334C25.1359 81.7847 23.9663 81.9103 22.787 81.9103C13.9426 81.9103 6.39333 75.724 6.39333 66.3769C6.39333 58.8374 11.7097 52.0905 17.1614 47.3831C18.2053 46.4551 19.2009 45.5949 20.1289 44.6669C20.6798 48.0017 21.1148 50.9112 21.5497 53.4534C15.9144 55.1256 12.0867 61.0606 12.0867 66.8796C12.0867 71.21 15.4891 77.145 20.4382 77.145C20.9311 77.145 21.4918 76.8937 21.4918 76.3427C21.4918 75.7821 20.8731 75.4727 20.1289 74.9797C17.7123 73.4912 16.3494 71.8866 16.3494 68.8515C16.3494 65.0817 19.2009 62.0465 22.787 61.1862L26.3731 81.5334ZM35.1596 70.0887C35.1596 74.4868 33.3617 79.0008 28.9733 80.7988C27.6781 73.3752 26.0058 63.5351 25.5708 60.8092C31.1385 60.8092 35.1596 64.5887 35.1596 70.0887Z" fill="black"/>
                                </svg>
                            </div>

                            <div class="mini-staff">
                                <div id="E_3" highlight="4,5,6" linenum="6"></div>
                                <div id="D_3" highlight="4,5"></div>
                                <div id="C_3" highlight="4,5" linenum="5"></div>
                                <div id="B_3" highlight="4"></div>
                                <div id="A_3" highlight="4" linenum="4"></div>
                                <div id="G_3"></div>
                                <div id="F_3" class="line"></div>
                                <div id="E_2"></div>
                                <div id="D_2" class="line"></div>
                                <div id="C_2"></div>
                                <div id="B_2" class="line"></div>
                                <div id="A_2"></div>
                                <div id="G_2" class="line"></div>
                                <div id="F_2"></div>
                                <div id="E_1" class="line"></div>
                                <div id="D_1"></div>
                                <div id="C_1" highlight="3" linenum="3"></div>
                                <div id="B_1" highlight="3"></div>
                                <div id="A_1" highlight="3,2" linenum="2"></div>
                                <div id="G_1" highlight="3,2"></div>
                                <div id="F_1" highlight="3,2,1" linenum="1"></div>
                            </div>
                        </div>
                    </foreignObject>
                </svg>
            `;
            var note_grid = wrapper.querySelector(".note-grid");

            var position_div = document.createElement("DIV");
            position_div.setAttribute("class", "position-div");

            var line_id = note.substring(0, 3);
            var note_accidental = note.substring(4, note.length);
            var line_div = wrapper.querySelector("#" + line_id);

            var offset_y = line_div.offsetTop;

            var note_position = find_note(note)["position"];
            if (note_position > 17) {
                tail_orientation = "bottom";
            } else {
                tail_orientation = "top";
            }

            position_div.innerHTML = `
                <div class="selected-pill" tail=${tail_orientation} accidental="${note_accidental}" style="transform: translateY(${offset_y + 25}px)">
                    <div class="pill">
                        <div class="top-tail"></div>
                        <div class="bottom-tail"></div>
                    </div>
                </div>
                <div class="selected-pill" id="you-pill" >
                    <div class="pill">
                        <div class="top-tail"></div>
                        <div class="bottom-tail"></div>
                    </div>
                </div>
            `;
            note_grid.append(position_div);

            if (line_div.getAttribute("highlight")) {
                var lines = line_div.getAttribute("highlight").split(",");
                lines.forEach(div => {
                    var left_x = position_div.querySelector(".selected-pill").offsetLeft + (position_div.querySelector(".selected-pill").offsetWidth / 2);
                    var temp_line = document.createElement("DIV");

                    temp_line.setAttribute("class", "invisible-line");
                    temp_line.setAttribute("style", `margin-left: ${left_x}px;`);

                    wrapper.querySelector(".mini-staff").querySelector(`[linenum="${div}"]`).append(temp_line);
                });
            }

            wrapper.setAttribute("note", note);
            var view_box = `0 0 ${note_grid.offsetWidth} ${note_grid.offsetHeight}`;
            wrapper.querySelector(".scale-svg").setAttribute("viewBox", view_box);
        }
        prev_rendered_note = null;
        function render_you_note(note) {
            if (note != prev_rendered_note) {

                var note_grid = document.querySelector(".floating-card").querySelector(".note-grid");
                if (note_grid.classList.contains("reverse")) {
                    var position_divs = Array.from(note_grid.querySelectorAll(".position-div")).reverse();
                } else {
                    var position_divs = note_grid.querySelectorAll(".position-div");
                }
                var wrapper = position_divs[scale_listening_index].querySelector(":scope > div:last-child");
                var you_pill = wrapper.querySelector("#you-pill");

                var line_id = note.substring(0, 3);
                var note_accidental = note.substring(4, note.length);
                var line_div = wrapper.querySelector("#" + line_id);

                var offset_y = line_div.offsetTop;

                var note_position = find_note(note)["position"];
                if (note_position > 17) {
                    tail_orientation = "bottom";
                } else {
                    tail_orientation = "top";
                }

                you_pill.style.opacity = "1";
                you_pill.style.transform = `translate(-50%, ${offset_y}px)`;
                you_pill.setAttribute("accidental", note_accidental);
                you_pill.setAttribute("tail", tail_orientation);

                wrapper.querySelectorAll(".helper_line").forEach(line => {
                    line.classList.remove("helper_line");
                });
                if (line_div.getAttribute("highlight")) {
                    var lines = line_div.getAttribute("highlight").split(",");
                    lines.forEach(div => {
                        var highlight_line = wrapper.querySelector(`[linenum="${div}"]`);
                        highlight_line.classList.add("helper_line");
                    });
                }

                prev_rendered_note = note;
            }
        }
        listen_from = null;
        is_listening = false;
        function open_listen(button, type) {
            if (is_playing == false && is_listening == false) {
                listen_from = button.parentElement.parentElement;
                if (type == "note") {
                    var outline_offset = 2;
                } else if (type == "scale") {
                    var outline_offset = 0;
                }

                var copy_wrapper = listen_from.cloneNode(true);
                var offset_x = listen_from.getBoundingClientRect().left - outline_offset;
                var offset_y = listen_from.getBoundingClientRect().top - outline_offset;
                var width = listen_from.getBoundingClientRect().width;
                copy_wrapper.setAttribute("style", `transform: translate(${offset_x}px, ${offset_y}px); width: ${width}px;`);
                copy_wrapper.classList.add("floating-card");
                document.body.append(copy_wrapper);
                copy_wrapper.offsetWidth;

                var desired_y = (document.querySelector(".filler").getBoundingClientRect().top - document.querySelector(".listen-wrapper").getBoundingClientRect().height) - 2;
                listen_from.setAttribute("disabled", "true");
                document.querySelector(".listen-wrapper").setAttribute("active", "true");

                if (type == "scale") {
                    var nav = document.querySelector(".floating-card").querySelector(".scale-nav");
                    if (window.innerWidth > 630) {
                        listen_prev_nav_dem = nav.offsetWidth - 4;
                        nav.style.width = listen_prev_nav_dem + "px";

                        document.querySelector(".filler").style.height = copy_wrapper.offsetHeight + "px";
                        copy_wrapper.style.transform = `translate(${offset_x}px, calc(${-copy_wrapper.offsetHeight + desired_y - 4}px))`;
                    } else {
                        listen_prev_nav_dem = nav.offsetHeight - 4;
                        nav.style.height = listen_prev_nav_dem + "px";

                        document.querySelector(".filler").style.height = (copy_wrapper.offsetHeight - listen_prev_nav_dem) + "px";
                        copy_wrapper.style.transform = `translate(${offset_x}px, calc(${-copy_wrapper.offsetHeight - 4 + listen_prev_nav_dem}px + ${desired_y}px))`;
                    }
                    nav.style.transition = "0.3s all ease";
                    nav.offsetWidth;

                    if (window.innerWidth > 630) {
                        nav.style.width = "0px";
                        nav.style.paddingLeft = "0px";
                        nav.style.paddingRight = "0px";
                    } else {
                        nav.style.height = "0px";
                        nav.style.paddingTop = "0px";
                        nav.style.paddingRight = "0px";
                    }
                    nav.style.opacity = "0";
                    nav.style.pointerEvents = "none";

                    listening_notes = copy_wrapper.getAttribute("notes").split(",");

                    var note_grid = copy_wrapper.querySelector(".note-grid");
                    if (note_grid.classList.contains("reverse")) {
                        listening_notes = listening_notes.reverse();
                    }
                } else if (type == "note") {
                    var hidden_note = document.querySelector("#hidden-note");
                    var hidden_width = hidden_note.offsetWidth;
                    var hidden_height = hidden_note.offsetHeight;

                    var current_width = copy_wrapper.offsetWidth;
                    var current_height = copy_wrapper.offsetHeight;

                    var scale_x = hidden_width / current_width;
                    var scale_y = hidden_height / current_height;

                    document.querySelector(".filler").style.height = hidden_height + "px";
                    copy_wrapper.style.transform = `translate(${offset_x}px, calc(${-hidden_height + desired_y - 4}px)) scale(${scale_x}, ${scale_y})`;
                    copy_wrapper.style.outline = "none";

                    var hidden_scale_x = current_width / hidden_width;
                    var hidden_scale_y = current_height/ hidden_height;

                    var actual_hidden_note = copy_wrapper.querySelector("#hidden-note");
                    actual_hidden_note.style.transform = `scale(${hidden_scale_x}, ${hidden_scale_y})`;
                    actual_hidden_note.style.opacity = "1";
                    copy_wrapper.querySelectorAll(":scope > div:not(#hidden-note)").forEach(item => {
                        item.style.opacity = "0";
                        item.style.pointerEvents = "none";
                    });

                    listening_notes = [copy_wrapper.getAttribute("note")];
                }

                move_listen(0);
                var new_box_x = Number(document.querySelector(".floating-card").querySelector("svg").getAttribute("viewBox").split(" ")[2]) + 100;
                var box_y = document.querySelector(".floating-card").querySelector("svg").getAttribute("viewBox").split(" ")[3];
                document.querySelector(".floating-card").querySelector("svg").setAttribute("viewBox", `0 0 ${new_box_x} ${box_y}`);
                document.querySelector(".listen-nav").querySelector(".click-area").setAttribute("disabled", "true");

                setTimeout(() => {
                    start_listening();
                }, 200);

                is_listening = type;
            }
        }
        function move_listen(index) {
            var wrapper = document.querySelector(".floating-card");
            var note_grid = wrapper.querySelector(".note-grid");
            if (note_grid.classList.contains("reverse")) {
                var position_divs = Array.from(note_grid.querySelectorAll(".position-div")).reverse();
            } else {
                var position_divs = note_grid.querySelectorAll(".position-div");
            }
            var next_position = position_divs[index];

            var scroll_left = wrapper.querySelector(".scale-svg-wrapper").scrollLeft;
            var scroll_right = scroll_left + wrapper.querySelector(".scale-svg-wrapper").offsetWidth;

            var scroll_x = next_position.getBoundingClientRect().left - wrapper.querySelector(".scale-svg-wrapper").getBoundingClientRect().left + scroll_left - 6;
            var width = next_position.getBoundingClientRect().width + 4;

            if (scroll_right < (scroll_x + width)) {
                wrapper.querySelector(".scale-svg-wrapper").scrollTo({
                    left: scroll_x - 100,
                    behavior: "instant",
                });
            }

            document.querySelector(".floating-card").querySelectorAll(".position-div").forEach(div => {
                if (div == next_position) {
                    div.setAttribute("listening", "true");
                } else {
                    div.setAttribute("listening", "false");
                }
            });

            listening_for = listening_notes[index];
        }
        function close_listen(button) {
            stop_listening();
            var wrapper = document.querySelector(".floating-card");
            if (is_listening == "note") {
                var outline_offset = 2;
            } else if (is_listening == "scale") {
                var outline_offset = 0;
            }

            var offset_x = listen_from.getBoundingClientRect().left - outline_offset;
            var offset_y = listen_from.getBoundingClientRect().top - outline_offset;
            wrapper.style.transform = `translate(${offset_x}px, ${offset_y}px)`;
            document.querySelector(".listen-wrapper").setAttribute("active", "false");
            document.querySelector(".filler").style.height = "0px";
            listen_from.setAttribute("disabled", "false");

            if (is_listening == "scale") {
                wrapper.querySelector(".scale-nav").querySelector(".click-area").setAttribute("active", "false");

                wrapper.querySelectorAll(".position-div").forEach(item => {
                    item.setAttribute("listening", "false");
                });

                var nav = wrapper.querySelector(".scale-nav");
                nav.style.transition = "0.3s all ease";
                nav.offsetWidth;
                nav.style.opacity = "1";

                if (window.innerWidth > 630) {
                    nav.style.width = listen_prev_nav_dem + "px";
                    nav.style.paddingLeft = "";
                    nav.style.paddingRight = "";
                } else {
                    nav.style.height = listen_prev_nav_dem + "px";
                    nav.style.paddingTop = "";
                    nav.style.paddingBottom = "";
                }
            } else if (is_listening == "note") {
                var hidden_note = wrapper.querySelector("#hidden-note");
                hidden_note.style.transform = "";
                hidden_note.style.opacity = "";

                wrapper.querySelectorAll(":scope > div:not(#hidden-note)").forEach(item => {
                    item.style.opacity = "";
                });
            }

            setTimeout(() => {
                wrapper.remove();
            }, 300);

            is_listening = false;
        }
        expanded_from = null;
        function expand_scale(element) {
            if (is_playing == false) {
                expanded_from = element.parentElement.parentElement.querySelector(".scale-svg-wrapper");
                document.querySelector(".progress").style.top = "0px";
                document.querySelector(".progress").setAttribute("expanded", "true");

                var copy_scale = expanded_from.cloneNode(true);
                copy_scale.classList.add("expanded-scale");
                copy_scale.setAttribute("notes", element.parentElement.parentElement.getAttribute("notes"));

                if (expanded_from.querySelector(".reverse") == null) {
                    var reversed = false;
                } else {
                    var reversed = true;
                }

                var shadow_nav = document.createElement("DIV");
                shadow_nav.setAttribute("class", "shadow-nav");
                shadow_nav.innerHTML = `
                    <div class="click-area">
                        <div onclick="play_scale(this.parentElement)">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M19.7479 4.99993C21.1652 6.97016 22 9.38756 22 11.9999C22 14.6123 21.1652 17.0297 19.7479 18.9999M15.7453 7.99993C16.5362 9.13376 17 10.5127 17 11.9999C17 13.4872 16.5362 14.8661 15.7453 15.9999M9.63432 4.36561L6.46863 7.5313C6.29568 7.70425 6.2092 7.79073 6.10828 7.85257C6.01881 7.9074 5.92127 7.9478 5.81923 7.9723C5.70414 7.99993 5.58185 7.99993 5.33726 7.99993H3.6C3.03995 7.99993 2.75992 7.99993 2.54601 8.10892C2.35785 8.20479 2.20487 8.35777 2.10899 8.54594C2 8.75985 2 9.03987 2 9.59993V14.3999C2 14.96 2 15.24 2.10899 15.4539C2.20487 15.6421 2.35785 15.7951 2.54601 15.8909C2.75992 15.9999 3.03995 15.9999 3.6 15.9999H5.33726C5.58185 15.9999 5.70414 15.9999 5.81923 16.0276C5.92127 16.0521 6.01881 16.0925 6.10828 16.1473C6.2092 16.2091 6.29568 16.2956 6.46863 16.4686L9.63431 19.6342C10.0627 20.0626 10.2769 20.2768 10.4608 20.2913C10.6203 20.3038 10.7763 20.2392 10.8802 20.1175C11 19.9773 11 19.6744 11 19.0686V4.9313C11 4.32548 11 4.02257 10.8802 3.88231C10.7763 3.76061 10.6203 3.69602 10.4608 3.70858C10.2769 3.72305 10.0627 3.93724 9.63432 4.36561Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                            </svg>
                        </div>
                        <div class="alt-icon" onclick="stop_scale(this.parentElement)">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3 7.8C3 6.11984 3 5.27976 3.32698 4.63803C3.6146 4.07354 4.07354 3.6146 4.63803 3.32698C5.27976 3 6.11984 3 7.8 3H16.2C17.8802 3 18.7202 3 19.362 3.32698C19.9265 3.6146 20.3854 4.07354 20.673 4.63803C21 5.27976 21 6.11984 21 7.8V16.2C21 17.8802 21 18.7202 20.673 19.362C20.3854 19.9265 19.9265 20.3854 19.362 20.673C18.7202 21 17.8802 21 16.2 21H7.8C6.11984 21 5.27976 21 4.63803 20.673C4.07354 20.3854 3.6146 19.9265 3.32698 19.362C3 18.7202 3 17.8802 3 16.2V7.8Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                    </div>
                    <div class="click-area" active="${reversed}">
                        <div onclick="switch_order(this.parentElement)">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M6 6L18 18M18 18V10M18 18H10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                    </div>
                    <div class="click-area">
                        <div onclick="minimize_scale()">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M17 7L7 17M7 7L17 17" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                    </div>
                `;

                if (window.innerWidth > window.innerHeight) {
                    copy_scale.setAttribute("orientation", "vertical");
                    document.querySelector(".progress").setAttribute("rotated", "false");
                } else {
                    copy_scale.setAttribute("orientation", "horizontal");
                    document.querySelector(".progress").style.transition = "0s all";
                    document.querySelector(".progress").setAttribute("rotated", "true");
                    document.querySelector(".progress").offsetWidth;

                    document.querySelector(".progress").style.transition = "";
                }

                document.querySelector(".shadow").innerHTML = "";
                copy_scale.append(shadow_nav);
                document.querySelector(".shadow").append(copy_scale);
                document.querySelector(".shadow").style.opacity = "1";
                document.querySelector(".shadow").style.pointerEvents = "auto";
            }
        }
        function minimize_scale() {
            if (is_playing == false) {
                document.querySelector(".progress").setAttribute("expanded", "false");
                document.querySelector(".progress").style.transition = "0s all";
                document.querySelector(".progress").setAttribute("rotated", "false");
                document.querySelector(".progress").offsetWidth;

                document.querySelector(".progress").style.transition = "";

                document.querySelector(".shadow").style.opacity = "";
                document.querySelector(".shadow").style.pointerEvents = "";

                expanded_from = null;

                setTimeout(() => {
                    document.querySelector(".shadow").innerHTML = "";
                }, 200);
            }
        }
        function switch_order(button) {
            if (is_playing == false) {
                var element = button.parentElement.parentElement;

                if (element.querySelector(".note-grid").classList.contains("reverse")) {
                    element.querySelector(".note-grid").classList.remove("reverse");
                    button.setAttribute("active", "false");
                } else {
                    element.querySelector(".note-grid").classList.add("reverse");
                    button.setAttribute("active", "true");
                }

                if (expanded_from != null && expanded_from != element) {
                    if (expanded_from.querySelector(".note-grid").classList.contains("reverse")) {
                        expanded_from.querySelector(".note-grid").classList.remove("reverse");
                        expanded_from.parentElement.querySelector(".scale-nav").querySelectorAll(".click-area")[2].setAttribute("active", "false");
                    } else {
                        expanded_from.querySelector(".note-grid").classList.add("reverse");
                        expanded_from.parentElement.querySelector(".scale-nav").querySelectorAll(".click-area")[2].setAttribute("active", "true");
                    }
                }
            }
        }
        audio_context = null;
        function play_trumpet(frequency, duration) {
            if (audio_context == null) {
                audio_context = new (window.AudioContext || window.webkitAudioContext)();
            }
            var oscillator = audio_context.createOscillator();

            var real = new Float32Array([0, 0.6, 0.9, 0.4, 0.2, 0.1, 0.05, 0.02]);
            var imag = new Float32Array([0, 0, 0, 0, 0, 0, 0, 0]);
            var trumpet_wave = audio_context.createPeriodicWave(real, imag, {
                disableNormalization: false
            });

            oscillator.setPeriodicWave(trumpet_wave);
            oscillator.frequency.setValueAtTime(frequency, audio_context.currentTime);
            current_oscillator = oscillator;

            var gain_node = audio_context.createGain();
            gain_node.gain.setValueAtTime(0.3, audio_context.currentTime);
            gain_node.gain.linearRampToValueAtTime(1, audio_context.currentTime + (0.02 * duration));
            gain_node.gain.exponentialRampToValueAtTime(0.7, audio_context.currentTime + duration);

            oscillator.connect(gain_node).connect(audio_context.destination);
            oscillator.start();
            oscillator.stop(audio_context.currentTime + duration);
        }
        note_duration = 2000;
        scale_speed = 500;
        is_playing = false;
        function play_note(button) {
            if (is_playing == false) {
                is_playing = true;
                button.setAttribute("active", "true");

                var play_wrapper = button.parentElement.parentElement;
                var note_atr = play_wrapper.getAttribute("note");
                var note_frequency = find_note(note_atr)["frequency"];

                var progress = document.querySelector(".progress");
                progress.querySelector(".inner").style.transition = "0s all";
                progress.querySelector(".inner").style.width = "0%";
                progress.querySelector(".inner").offsetWidth;

                progress.querySelector(".inner").style.transition = (note_duration / 1000) + "s linear width";
                progress.querySelector(".inner").offsetWidth;
                progress.querySelector(".inner").style.width = "100%";

                progress.setAttribute("active", "true");

                play_trumpet(note_frequency, (note_duration - 20) / 1000);

                note_player_timeout = setTimeout(() => {
                    button.setAttribute("active", "false");
                    progress.setAttribute("active", "false");

                    is_playing = false;
                }, note_duration);
            }
        }
        function stop_note(button) {
            button.setAttribute("active", "false");

            var progress = document.querySelector(".progress");
            progress.setAttribute("active", "false");

            current_oscillator.stop();
            current_oscillator = null;
            clearTimeout(note_player_timeout);

            is_playing = false;
        }
        function play_scale(button) {
            if (is_playing == false) {
                if (is_listening != false) {
                    stop_listening("auto");
                }
                is_playing = true;

                button.setAttribute("active", "true");

                var progress = document.querySelector(".progress");
                progress.querySelector(".inner").style.transition = "0s all";
                progress.querySelector(".inner").style.width = "0%";
                progress.querySelector(".inner").offsetWidth;
                progress.setAttribute("active", "true");

                if (expanded_from == null) {
                    var play_wrapper = button.parentElement.parentElement;
                } else {
                    var play_wrapper = button.parentElement.parentElement;
                }
                var notes_atr = play_wrapper.getAttribute("notes").replace(/\s/g, "").split(",");
                var note_frequencies = [];

                notes_atr.forEach(note => {
                    note_frequencies.push(find_note(note)["frequency"]);
                });

                if (play_wrapper.querySelector(".reverse")) {
                    var note_frequencies = note_frequencies.reverse();
                    var position_divs = Array.from(play_wrapper.querySelectorAll(".position-div")).reverse();
                } else {
                    var position_divs = play_wrapper.querySelectorAll(".position-div");
                }

                progress.querySelector(".inner").style.transition = ((scale_speed / 1000) * note_frequencies.length) + "s linear width";
                progress.querySelector(".inner").offsetWidth;
                progress.querySelector(".inner").style.width = "100%";

                position_divs[0].setAttribute("active", "true");
                if (expanded_from == null) {
                    play_wrapper.querySelector(".scale-svg-wrapper").scrollTo({
                        left: 0,
                        behavior: "instant",
                    });
                }

                play_trumpet(note_frequencies[0], (scale_speed - 20) / 1000);
                var iterate = 1;

                scale_player_timeout = setInterval(() => {
                    position_divs[iterate - 1].setAttribute("active", "false");
                    position_divs[iterate].setAttribute("active", "true");

                    if (expanded_from == null) {
                        var scroll_left = play_wrapper.querySelector(".scale-svg-wrapper").scrollLeft;
                        var scroll_right = scroll_left + play_wrapper.querySelector(".scale-svg-wrapper").offsetWidth;

                        var scroll_x = position_divs[iterate].getBoundingClientRect().left - play_wrapper.querySelector(".scale-svg-wrapper").getBoundingClientRect().left + scroll_left - 6;
                        var width = position_divs[iterate].getBoundingClientRect().width + 4;

                        if (scroll_right < (scroll_x + width)) {
                            play_wrapper.querySelector(".scale-svg-wrapper").scrollTo({
                                left: scroll_x,
                                behavior: "smooth",
                            });
                        }
                    }

                    play_trumpet(note_frequencies[iterate], (scale_speed - 20) / 1000);

                    if (iterate == note_frequencies.length - 1) {
                        clearInterval(scale_player_timeout);

                        setTimeout(() => {
                            button.setAttribute("active", "false");

                            position_divs[iterate].setAttribute("active", "false");

                            if (expanded_from == null) {
                                play_wrapper.querySelector(".scale-svg-wrapper").scrollTo({
                                    left: 0,
                                    behavior: "smooth",
                                });
                            }

                            var progress = document.querySelector(".progress");
                            progress.setAttribute("active", "false");
                            is_playing = false;
                        }, scale_speed);
                    } else {
                        iterate++;
                    }
                }, scale_speed);
            }
        }
        function stop_scale(button) {
            button.setAttribute("active", "false");

            if (expanded_from == null) {
                var play_wrapper = button.parentElement.parentElement;
            } else {
                var play_wrapper = button.parentElement.parentElement;
            }
            play_wrapper.querySelectorAll(".position-div").forEach(div => {
                div.setAttribute("active", "false");
            });

            var progress = document.querySelector(".progress");
            progress.setAttribute("active", "false");

            if (expanded_from == null) {
                play_wrapper.querySelector(".scale-svg-wrapper").scrollTo({
                    left: 0,
                    behavior: "smooth",
                });
            }

            current_oscillator.stop();
            current_oscillator = null;
            clearInterval(scale_player_timeout);

            is_playing = false;
        }
        function check_scrollbar(element) {
            var res = !! element["scrollLeft"];
            if (!res) {
                element["scrollLeft"] = 1;
                res = !!element["scrollLeft"];
                element["scrollLeft"] = 0;
            }
            return res;
        }
        new ResizeObserver(scrolling_scales).observe(document.querySelector(".info-wrapper"));
        function scrolling_scales() {
            document.querySelectorAll(".scale-svg-wrapper").forEach(element => {
                if (check_scrollbar(element)) {
                    element.setAttribute("scrolling", "true");
                } else {
                    element.setAttribute("scrolling", "false");
                }
            });
        }
        function search_staff(search_element) {
            var fixed_value = search_element.value.charAt(search_element.value.length - 1).toUpperCase();
            search_element.value = fixed_value;

            document.querySelector(".staff").querySelectorAll(":scope > div").forEach(element => {
                var letter = element.getAttribute("id").charAt(0);
                if (letter == fixed_value) {
                    element.setAttribute("find", "true");
                } else {
                    element.setAttribute("find", "false");
                }
            });
        }
        function end_hover() {
            var hover_note = document.querySelector(".hover-pill");
            hover_note.style.opacity = 0;

            document.querySelectorAll(`.invisible-line[use="hover"]`).forEach(mini_line => {
                mini_line.style.opacity = 0;
            });
        }
        function hover_note(e) {
            var line_div = document.elementFromPoint(e.clientX, e.clientY);
            var hover_note = document.querySelector(".hover-pill");

            if (line_div.classList.contains("staff-wrapper") || line_div.classList.contains("staff-container")) {
                hover_note.style.opacity = 0;
            } else {
                hover_note.style.opacity = 1;

                var staff_div = document.querySelector(".staff-wrapper");

                var offset_x = e.clientX - staff_div.getBoundingClientRect().left;
                var offset_y = line_div.getBoundingClientRect().top - staff_div.getBoundingClientRect().top;
                hover_note.style.transform = `translate(calc(${offset_x}px - 50%), calc(${offset_y + 5}px - 50%))`;

                var note_position = find_note(line_div.getAttribute("id") + "_" + selected_accidental)["position"];
                if (note_position > 17) {
                    hover_note.setAttribute("tail", "bottom");
                } else {
                    hover_note.setAttribute("tail", "top");
                }
            }

            var invisible_divs = [1, 2, 3, 4, 5, 6];
            var highlights_attr = line_div.getAttribute("highlight");
            if (highlights_attr != null) {
                var highlights_array = highlights_attr.split(",");
                invisible_divs.forEach(line => {
                    var mini_line = document.querySelector(`.invisible-line[linenum="${line}"][use="hover"]`);
                    if (highlights_array.indexOf(line.toString()) == -1) {
                        mini_line.style.opacity = 0;
                    } else {
                        mini_line.style.opacity = 1;
                        mini_line.style.marginLeft = offset_x + "px";
                    }
                });
            } else {
                invisible_divs.forEach(line => {
                    var mini_line = document.querySelector(`.invisible-line[linenum="${line}"][use="hover"]`);
                    mini_line.style.opacity = 0;
                });
            }
        }
        function select_note(e) {
            var select_note = document.querySelector(".selected-pill");
            var hover_note = document.querySelector(".hover-pill");
            var staff_div = document.querySelector(".staff-wrapper");

            var line_div = document.elementFromPoint(e.clientX, e.clientY);
            selected_note = line_div.getAttribute("id");
            if (selected_note == "F_1") {
                switch_accidentals("sharp");
            } else if (selected_note == "E_3" && selected_accidental == "sharp") {
                switch_accidentals("natural");
            }

            if (selected_note.charAt(0) == "C" && selected_accidental == "flat") {
                selected_note = "B_" + selected_note.charAt(2);
                var line_div = document.querySelector("#" + selected_note);
                switch_accidentals("natural");
            } else if (selected_note.charAt(0) == "F" && selected_accidental == "flat") {
                selected_note = "E_" + (Number(selected_note.charAt(2)) - 1);
                var line_div = document.querySelector("#" + selected_note);
                switch_accidentals("natural");
            } else if (selected_note.charAt(0) == "E" && selected_accidental == "sharp") {
                selected_note = "F_" + (Number(selected_note.charAt(2)) + 1);
                var line_div = document.querySelector("#" + selected_note);
                switch_accidentals("natural");
            } else if (selected_note.charAt(0) == "B" && selected_accidental == "sharp") {
                selected_note = "C_" + selected_note.charAt(2);
                var line_div = document.querySelector("#" + selected_note);
                switch_accidentals("natural");
            }

            var note_position = find_note(selected_note + "_" + selected_accidental)["position"];
            if (note_position > 17) {
                select_note.setAttribute("tail", "bottom");
            } else {
                select_note.setAttribute("tail", "top");
            }

            hover_note.style.opacity = 0;
            var invisible_divs = [1, 2, 3, 4, 5, 6];
            invisible_divs.forEach(line => {
                var mini_line = document.querySelector(`.invisible-line[linenum="${line}"][use="hover"]`);
                mini_line.style.opacity = 0;
            });

            select_note.style.transition = "0s transform ease";

            var offset_x = e.clientX - staff_div.getBoundingClientRect().left;
            var offset_y = line_div.getBoundingClientRect().top - staff_div.getBoundingClientRect().top;
            select_note.style.transform = `translate(calc(${offset_x}px - 50%), calc(${offset_y + 5}px - 50%))`;
            select_note.offsetWidth;

            var new_offset_x = (staff_div.getBoundingClientRect().width / 2) + 10;

            select_note.style.transition = "0.15s transform ease";
            select_note.style.transform = `translate(calc(${new_offset_x}px - 50%), calc(${offset_y + 5}px - 50%))`;

            var line_elements = [];
            var invisible_divs = [1, 2, 3, 4, 5, 6];
            var highlights_attr = line_div.getAttribute("highlight");
            if (highlights_attr != null) {
                var highlights_array = highlights_attr.split(",");
                invisible_divs.forEach(line => {
                    var mini_line = document.querySelector(`.invisible-line[linenum="${line}"][use="selected"]`);
                    if (highlights_array.indexOf(line.toString()) == -1) {
                        mini_line.style.opacity = 0;
                    } else {
                        mini_line.style.transition = "";

                        mini_line.style.opacity = 1;
                        mini_line.style.marginLeft = offset_x + "px";
                        mini_line.offsetWidth;

                        mini_line.style.transition = "0.15s margin ease";
                        mini_line.style.marginLeft = new_offset_x + "px";
                    }
                });
            } else {
                invisible_divs.forEach(line => {
                    var mini_line = document.querySelector(`.invisible-line[linenum="${line}"][use="selected"]`);
                    mini_line.style.opacity = 0;
                });
            }

            var wrapper = document.querySelector(".octaves-grid").querySelectorAll(":scope > div");
            for (var i = 0; i < wrapper.length; i++) {
                var button = wrapper[i];
                if (i + 1 == Number(selected_note.charAt(2))) {
                    button.setAttribute("active", "true");
                } else {
                    button.setAttribute("active", "false");
                }
            }

            generate_details();
        }
        function toggle_octave(octave_num) {
            var new_note = `${selected_note.charAt(0)}_${octave_num}`;
            var current_note = `${selected_note}`;
            if (new_note != current_note) {
                select_from_line(new_note);
            }
        }
        function select_from_line(line_id) {
            var select_note = document.querySelector(".selected-pill");
            var hover_note = document.querySelector(".hover-pill");
            var staff_div = document.querySelector(".staff-wrapper");

            var line_div = document.querySelector("#" + line_id);
            selected_note = line_id;
            if (selected_note == "F_1") {
                switch_accidentals("sharp");
            }

            if (selected_note.charAt(0) == "C" && selected_accidental == "flat") {
                selected_note = "B_" + selected_note.charAt(2);
                var line_div = document.querySelector("#" + selected_note);
                switch_accidentals("natural");
            } else if (selected_note.charAt(0) == "F" && selected_accidental == "flat") {
                selected_note = "E_" + (Number(selected_note.charAt(2)) - 1);
                var line_div = document.querySelector("#" + selected_note);
                switch_accidentals("natural");
            } else if (selected_note.charAt(0) == "E" && selected_accidental == "sharp") {
                selected_note = "F_" + (Number(selected_note.charAt(2)) + 1);
                var line_div = document.querySelector("#" + selected_note);
                switch_accidentals("natural");
            } else if (selected_note.charAt(0) == "B" && selected_accidental == "sharp") {
                selected_note = "C_" + selected_note.charAt(2);
                var line_div = document.querySelector("#" + selected_note);
                switch_accidentals("natural");
            }

            var note_position = find_note(selected_note + "_" + selected_accidental)["position"];
            if (note_position > 17) {
                select_note.setAttribute("tail", "bottom");
            } else {
                select_note.setAttribute("tail", "top");
            }

            hover_note.style.opacity = 0;
            var invisible_divs = [1, 2, 3, 4, 5, 6];
            invisible_divs.forEach(line => {
                var mini_line = document.querySelector(`.invisible-line[linenum="${line}"][use="hover"]`);
                mini_line.style.opacity = 0;
            });

            select_note.style.transition = "0s transform ease";

            var new_offset_x = (staff_div.getBoundingClientRect().width / 2) + 10;
            var offset_y = line_div.getBoundingClientRect().top - staff_div.getBoundingClientRect().top;
            select_note.style.transform = `translate(calc(${new_offset_x}px - 50%), calc(${offset_y + 5}px - 50%))`;

            var line_elements = [];
            var invisible_divs = [1, 2, 3, 4, 5, 6];
            var highlights_attr = line_div.getAttribute("highlight");
            if (highlights_attr != null) {
                var highlights_array = highlights_attr.split(",");
                invisible_divs.forEach(line => {
                    var mini_line = document.querySelector(`.invisible-line[linenum="${line}"][use="selected"]`);
                    if (highlights_array.indexOf(line.toString()) == -1) {
                        mini_line.style.opacity = 0;
                    } else {
                        mini_line.style.transition = "";

                        mini_line.style.opacity = 1;
                        mini_line.style.marginLeft = new_offset_x + "px";
                    }
                });
            } else {
                invisible_divs.forEach(line => {
                    var mini_line = document.querySelector(`.invisible-line[linenum="${line}"][use="selected"]`);
                    mini_line.style.opacity = 0;
                });
            }

            var wrapper = document.querySelector(".octaves-grid").querySelectorAll(":scope > div");
            for (var i = 0; i < wrapper.length; i++) {
                var button = wrapper[i];
                if (i + 1 == Number(selected_note.charAt(2))) {
                    button.setAttribute("active", "true");
                } else {
                    button.setAttribute("active", "false");
                }
            }

            generate_details();
        }
        function move_note(direction) {
            var current_position = find_note(`${selected_note}_${selected_accidental}`)["position"];
            if (direction == "down") {
                if (current_position > 0) {
                    var new_position = current_position - 1;
                } else if (current_position == 0 && selected_note != "F_1") {
                    switch_accidentals("sharp");
                    select_from_line("F_1");
                    return;
                } else {
                    return;
                }
            } else if (direction == "up") {
                if (current_position + 1 < library_array.length) {
                    var new_position = current_position + 1;
                } else {
                    return;
                }
            }
            var new_note = library_array[new_position];
            var note_names = new_note[0].replace(/\s/g, "").split(",");
            for (let a = 0; a < note_names.length; a++) {
                var mini_note = note_names[a];
                if (direction == "up") {
                    if (mini_note.substring(4, mini_note.length) == "sharp") {
                        var final_note = mini_note;
                    } else if (mini_note.substring(4, mini_note.length) == "natural") {
                        var final_note = mini_note;
                        break;
                    }
                } else if (direction == "down") {
                    if (mini_note.substring(4, mini_note.length) == "flat") {
                        var final_note = mini_note;
                    } else if (mini_note.substring(4, mini_note.length) == "natural") {
                        var final_note = mini_note;
                        break;
                    }
                }
            }

            switch_accidentals(final_note.substring(4, final_note.length));
            select_from_line(final_note.substring(0, 3));
        }
        function switch_accidentals(type) {
            if (!(selected_note == "F_1" && type == "natural" || selected_note == "F_1" && type == "flat" || selected_note == "E_3" && type == "sharp")) {
                selected_accidental = type;
                var types = ["sharp", "natural", "flat"];

                var selector = document.querySelector(".natural-nav").querySelector(".selector");
                var button = document.querySelector(".natural-nav").querySelectorAll("div")[types.indexOf(type)];
                var top = button.offsetTop + "px";
                var height = button.offsetHeight + "px";

                document.querySelector(".natural-nav").querySelectorAll("div").forEach(item => {
                    if (item == button) {
                        item.classList.add("selected");
                    } else {
                        item.classList.remove("selected");
                    }
                });

                document.querySelectorAll(".pill").forEach(element => {
                    element.parentElement.setAttribute("accidental", type);
                });

                selector.style.transform = `translateY(${top})`;
                selector.style.height = height;

                if (selected_note.charAt(0) == "C" && selected_accidental == "flat") {
                    switch_accidentals("natural");
                    select_from_line("B_" + selected_note.charAt(2))
                } else if (selected_note.charAt(0) == "F" && selected_accidental == "flat") {
                    switch_accidentals("natural");
                    select_from_line("E_" + (Number(selected_note.charAt(2)) - 1));
                } else if (selected_note.charAt(0) == "E" && selected_accidental == "sharp") {
                    switch_accidentals("natural");
                    select_from_line("F_" + (Number(selected_note.charAt(2)) + 1));
                } else if (selected_note.charAt(0) == "B" && selected_accidental == "sharp") {
                    switch_accidentals("natural");
                    select_from_line("C_" + selected_note.charAt(2));
                }

                generate_details();
            }
        }
        function generate_details() {
            document.querySelector(".note-indicator").innerText = selected_note.charAt(0).toUpperCase();
            document.querySelector(".note-card").setAttribute("note", selected_note + "_" + selected_accidental);
            if (selected_accidental == "flat") {
                document.querySelector(".note-indicator").setAttribute("class", "note-indicator flat");
            } else if (selected_accidental == "sharp") {
                document.querySelector(".note-indicator").setAttribute("class", "note-indicator sharp");
            } else if (selected_accidental == "natural") {
                document.querySelector(".note-indicator").setAttribute("class", "note-indicator");
            }
            document.querySelector(".clef-box").setAttribute("accidental", selected_accidental);
            document.querySelector(".note-card").querySelector(".h3").innerText = selected_accidental;

            var letter = selected_note.charAt(0);
            if (letter == "E" && selected_accidental == "sharp") {
                var mini_octave = Number(selected_note.charAt(2)) + 1;
                var fingerconfig = find_note(`F_${mini_octave}_${selected_accidental}`)["fingering"];
            } else if (letter == "B" && selected_accidental == "sharp") {
                var mini_octave = Number(selected_note.charAt(2));
                var fingerconfig = find_note(`C_${mini_octave}_${selected_accidental}`)["fingering"];
            } else if (letter == "C" && selected_accidental == "flat") {
                var mini_octave = Number(selected_note.charAt(2));
                var fingerconfig = find_note(`B_${mini_octave}_${selected_accidental}`)["fingering"];
            } else if (letter == "F" && selected_accidental == "flat") {
                var mini_octave = Number(selected_note.charAt(2)) - 1;
                var fingerconfig = find_note(`E_${mini_octave}_${selected_accidental}`)["fingering"];
            } else {
                var fingerconfig = find_note(`${selected_note}_${selected_accidental}`)["fingering"];
            }

            for (a = 0; a < 3; a++) {
                element = document.querySelector("#note-finger" + (a + 1));
                if (fingerconfig[a] == 0) {
                    element.setAttribute("class", "open-finger");
                } else if (fingerconfig[a] == 1) {
                    element.setAttribute("class", "closed-finger");
                }
            }
            document.querySelector(".note-card").querySelector(".h3").innerText = selected_accidental;

            var specs = selected_note + "_" + selected_accidental;
            render_scales({scale: [[specs, [0, 0, 0]]]}, document.querySelector("#hidden-note"));
            render_scales(generate_scales("major", specs), document.querySelector("#major-scale"));
            render_scales(generate_scales("natural_minor", specs), document.querySelector("#natural-minor-scale"));
            render_scales(generate_scales("melodic_minor", specs), document.querySelector("#melodic-minor-scale"));
            render_scales(generate_scales("harmonic_minor", specs), document.querySelector("#harmonic-minor-scale"));
            scrolling_scales();
        }
        function update_signature() {
            document.querySelector(".time-signature").innerHTML = `${metronome_config["top"]}<br>${metronome_config["bottom"]}`;
        }
        function control_metronome(button) {
            if (button.getAttribute("active") == "false") {
                beat_index = 1 / metronome_config["division"];
                play_beat();

                button.setAttribute("active", "true");
            } else {
                clearTimeout(metronome_timer);
                var inactive_beats = document.querySelector(".beats-wrapper").querySelectorAll(":scope > div[playing='true']");
                inactive_beats.forEach(beat => {
                    beat.setAttribute("playing", "false");
                });

                button.setAttribute("active", "false");
            }
        }
        function play_beat() {
            var inactive_beats = document.querySelector(".beats-wrapper").querySelectorAll(":scope > div[playing='true']");
            inactive_beats.forEach(beat => {
                beat.setAttribute("playing", "false");
            });

            var active_beats = document.querySelector(".beats-wrapper").querySelectorAll(":scope > div")[Math.ceil(beat_index) - 1];
            active_beats.setAttribute("playing", "true");

            var sound = active_beats.querySelectorAll(".box[active='true']").length - 1;
            play_tick(sound);

            if (Math.floor(beat_index) == metronome_config["top"]) {
                beat_index = 1 / metronome_config["division"];
            } else {
                beat_index += 1 / metronome_config["division"];
            }
            var ms = (60000 / metronome_config["bpm"]) / metronome_config["division"]
            metronome_timer = setTimeout(() => {
                play_beat();
            }, ms);
        }
        beep_context = null;
        async function play_tick(sound_type) {
            if (beep_context == null) {
                beep_context = new (window.AudioContext || window.webkitAudioContext)();
            }

            var source = beep_context.createBufferSource();
            var audio_buffer = await fetch(`/tick_${sound_type}.wav`).then(res => res.arrayBuffer()).then(ArrayBuffer => beep_context.decodeAudioData(ArrayBuffer));

            source.buffer = audio_buffer;
            source.connect(beep_context.destination);
            source.start();
        }
        function update_metronome_config(atr, value) {
            metronome_config[atr] = value;
            var str = JSON.stringify(metronome_config);
            localStorage.setItem("metronome_config", str);
        }
        function init_metronome() {
            var scroll_wrapper = document.querySelector(".bpm-scroll");
            for (var i = 2; i < 22; i++) {
                scroll_wrapper.innerHTML += `
                    <div class="big-line" label="${i * 10}"></div>
                        <div class="small-line"></div>
                        <div class="small-line"></div>
                        <div class="small-line"></div>
                        <div class="small-line"></div>
                    <div class="medium-line"></div>
                        <div class="small-line"></div>
                        <div class="small-line"></div>
                        <div class="small-line"></div>
                        <div class="small-line"></div>
                `;
            }
            scroll_wrapper.innerHTML += `
                <div class="big-line" label="${i * 10}"></div>
            `;

            var init_bpm = 20;
            scroll_wrapper.querySelectorAll("div").forEach(line => {
                line.setAttribute("left", line.offsetLeft);
                line.setAttribute("bpm", init_bpm);
                init_bpm++;
            });

            var beats_wrapper = document.querySelector(".beats-wrapper");
            for (var i = 0; i < 8; i++) {
                beats_wrapper.innerHTML += `
                    <div index="${i}">
                        <div class="box" onclick="update_box_sound(this)"></div>
                        <div class="box" onclick="update_box_sound(this)"></div>
                        <div class="box" onclick="update_box_sound(this)"></div>
                    </div>
                `;
            }

            var json = localStorage.getItem("metronome_config");
            if (json == null) {
                metronome_config = {
                    "bpm": 90,
                    "top": 4,
                    "bottom": 4,
                    "division": 1,
                    "sounds": [3, 1, 1, 1, 1, 1, 1, 1]
                };
            } else {
                metronome_config = JSON.parse(json);
            }

            var beats_wrapper = document.querySelector(".beats-wrapper").querySelectorAll(":scope > div");
            for (var i = 0; i < metronome_config["sounds"].length; i++) {
                var sound = metronome_config["sounds"][i];
                var wrapper = Array.from(beats_wrapper[i].querySelectorAll(".box")).reverse();
                for (var a = 1; a <= sound; a++) {
                    wrapper[a - 1].setAttribute("active", "true");
                }
            }
            set_bpm(metronome_config["bpm"]);
            var top_btn = document.querySelector(".time-top").querySelector(`[value="${metronome_config["top"]}"`);
            update_boxes(top_btn);
            var bottom_btn = document.querySelector(".time-bottom").querySelector(`[value="${metronome_config["bottom"]}"`);
            update_division_options(bottom_btn);
        }
        function init_staff() {
            selected_note = "C_1";
            switch_accidentals("natural");
            select_from_line(selected_note);
            init_metronome();
        }
        function toggletheme() {
            if (apptheme == "dark") {
                light_theme();
            } else {
                dark_theme();
            }
        }
        async function dark_theme() {
            apptheme = "dark";
            document.querySelector(":root").style.setProperty("--bg1", "#161616");
            document.querySelector(":root").style.setProperty("--bg2", "#202020");
            document.querySelector(":root").style.setProperty("--bg3", "#686868");

            document.querySelector(":root").style.setProperty("--str1", "#282828");
            document.querySelector(":root").style.setProperty("--str2", "#313131");

            document.querySelector(":root").style.setProperty("--txt1", "white");
            document.querySelector(":root").style.setProperty("--txt2", "hsl(0, 0%, 80%)");
            document.querySelector(":root").style.setProperty("--txt3", "grey");

            document.querySelector(":root").style.setProperty("--rgb", "255, 255, 255");
            document.querySelector(":root").style.setProperty("--invtrgb", "0, 0, 0");

            document.querySelectorAll("[theme]").forEach(element => {
                element.setAttribute("theme", "dark");
            });

            (async() => {
                while(!window.hasOwnProperty("StatusBar")) {
                    await new Promise(resolve => setTimeout(resolve, 10));
                }
                if (Capacitor.getPlatform() != "web") {
                    StatusBar.setStyle({ style: Style.Dark });
                    StatusBar.setBackgroundColor({ color: "#161616"});
                    NavigationBar.setColor({ color: "#202020", darkButtons: false });
                }
            })();
        }
        async function light_theme() {
            apptheme = "light";
            document.querySelector(":root").style.setProperty("--bg1", "#FFFFFF");
            document.querySelector(":root").style.setProperty("--bg2", "#F9F9F9");
            document.querySelector(":root").style.setProperty("--bg3", "#C1C1C1");

            document.querySelector(":root").style.setProperty("--str1", "#EEEEEE");
            document.querySelector(":root").style.setProperty("--str2", "#E4E4E4");

            document.querySelector(":root").style.setProperty("--txt1", "black");
            document.querySelector(":root").style.setProperty("--txt2", "#444444");
            document.querySelector(":root").style.setProperty("--txt3", "#858585");

            document.querySelector(":root").style.setProperty("--rgb", "0, 0, 0");
            document.querySelector(":root").style.setProperty("--invtrgb", "255, 255, 255");

            document.querySelectorAll("[theme]").forEach(element => {
                element.setAttribute("theme", "light");
            });

            (async() => {
                while(!window.hasOwnProperty("StatusBar")) {
                    await new Promise(resolve => setTimeout(resolve, 10));
                }
                if (Capacitor.getPlatform() != "web") {
                    StatusBar.setStyle({ style: Style.Light });
                    StatusBar.setBackgroundColor({ color: "#FFFFFF"});
                    NavigationBar.setColor({ color: "#F4F4F4", darkButtons: true });
                }
            })();
        }
        function init_theme() {
            if (window.matchMedia && window.matchMedia("(prefers-color-scheme: dark)").matches) {
                dark_theme();
            } else {
                light_theme();
            }
            window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", event => {
                const color_scheme = event.matches ? "dark" : "light";
                if (color_scheme == "dark") {
                    dark_theme();
                } else if (color_scheme == "light") {
                    light_theme();
                }
            });
        }
        function generate_svg(number, type) {
            var svgs = {
                "1,2": `
                    <svg viewBox="0 0 33 101" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M31.376 83.03V0.197998" stroke="var(--txt1)" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M21.5106 73.9004C11.8851 73.9004 0.384033 81.9449 0.384033 91.1674C0.384033 95.4299 3.45303 100.188 11.4975 100.188C21.8051 100.188 32.624 91.7564 32.624 83.0299C32.624 77.1709 27.664 73.9004 21.5106 73.9004ZM7.82403 95.5229C4.55354 95.5229 3.85603 92.8569 3.85603 91.9579C3.85603 87.0909 20.5186 78.5659 25.184 78.5659C27.5711 78.5659 29.152 79.9609 29.152 82.1309C29.152 87.0909 12.3811 95.5229 7.82403 95.5229Z"/>
                    </svg>
                `,
                "1,4": `
                    <svg viewBox="0 0 33 101" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M31.6719 83.03V0.197998" stroke="var(--txt1)" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M0.679932 91.1674C0.679932 95.4299 3.74893 100.188 11.7934 100.188C22.101 100.188 32.9199 91.7564 32.9199 83.0299C32.9199 77.1709 27.9599 73.9004 21.8065 73.9004C12.181 73.9004 0.679932 82.0379 0.679932 91.1674Z"/>
                        </svg>
                `,
                "1,8": `
                    <svg viewBox="0 0 60 102" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M31.8599 84.03V1.39697" stroke="var(--txt1)" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M30.6201 23.7194C30.6201 24.0139 30.7131 24.603 31.4106 24.8044C35.6731 26.1994 44.2136 31.5624 50.6616 42.5674C52.4441 45.6364 55.3272 49.9144 55.3272 58.145C55.3272 65.2904 53.5292 72.6219 50.8632 79.7674C50.6616 80.3719 50.5532 80.8679 50.5532 81.2554C50.5532 81.953 50.9561 82.2474 51.6536 82.2474C52.2426 82.2474 52.7386 81.8599 53.1416 81.1624C57.6056 73.2264 59.2952 63.9884 59.2952 54.9674C58.7992 42.1644 51.4521 32.7404 51.4521 32.7404C51.7466 32.7404 42.3226 20.5419 39.6411 16.3724C35.9831 10.7149 34.2936 5.0729 34.0921 4.6699C33.9991 4.3754 33.1001 0.7949 33.1001 0.7949C33.0071 0.4074 32.5111 0.00439453 31.9066 0.00439453C31.2091 0.00439453 30.6201 0.6089 30.6201 1.2909V23.7194Z"/>
                        <path d="M0.870117 92.1674C0.870117 96.4299 3.93912 101.188 11.9836 101.188C22.2912 101.188 33.1101 92.7564 33.1101 84.0299C33.1101 78.1709 28.1501 74.9004 21.9966 74.9004C12.3712 74.9004 0.870117 83.0379 0.870117 92.1674Z"/>
                    </svg>
                `,
                "2,4": `
                    <svg viewBox="0 0 92 101" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M31.3301 83.03V6.39795" stroke="var(--txt1)" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M90.73 83.03V6.39795" stroke="var(--txt1)" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M59.73 91.1674C59.73 95.4299 62.799 100.188 70.8435 100.188C81.151 100.188 91.97 91.7564 91.97 83.0299C91.97 77.1709 87.01 73.9004 80.8565 73.9004C71.231 73.9004 59.73 82.0379 59.73 91.1674Z"/>
                        <path d="M0.339844 91.1674C0.339844 95.4299 3.40884 100.188 11.4533 100.188C21.7609 100.188 32.5798 91.7564 32.5798 83.0299C32.5798 77.1709 27.6198 73.9004 21.4664 73.9004C11.8409 73.9004 0.339844 82.0379 0.339844 91.1674Z"/>
                    </svg>
                `,
                "2,8": `
                    <svg viewBox="0 0 92 101" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M31.3301 83.03V6.39795" stroke="var(--txt1)" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M90.73 83.03V6.39795" stroke="var(--txt1)" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M59.73 91.1674C59.73 95.4299 62.799 100.188 70.8435 100.188C81.151 100.188 91.97 91.7564 91.97 83.0299C91.97 77.1709 87.01 73.9004 80.8565 73.9004C71.231 73.9004 59.73 82.0379 59.73 91.1674Z"/>
                        <path d="M0.339844 91.1674C0.339844 95.4299 3.40884 100.188 11.4533 100.188C21.7609 100.188 32.5798 91.7564 32.5798 83.0299C32.5798 77.1709 27.6198 73.9004 21.4664 73.9004C11.8409 73.9004 0.339844 82.0379 0.339844 91.1674Z"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M30.0898 0.197998H91.9698V12.598H30.0898V0.197998Z"/>
                    </svg>
                `,
                "2,16": `
                    <svg viewBox="0 0 92 101" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M31.3301 83.03V6.39795" stroke="var(--txt1)" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M90.73 83.03V6.39795" stroke="var(--txt1)" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M59.73 91.1674C59.73 95.4299 62.799 100.188 70.8435 100.188C81.151 100.188 91.97 91.7564 91.97 83.0299C91.97 77.1709 87.01 73.9004 80.8565 73.9004C71.231 73.9004 59.73 82.0379 59.73 91.1674Z"/>
                        <path d="M0.339844 91.1674C0.339844 95.4299 3.40884 100.188 11.4533 100.188C21.7609 100.188 32.5798 91.7564 32.5798 83.0299C32.5798 77.1709 27.6198 73.9004 21.4664 73.9004C11.8409 73.9004 0.339844 82.0379 0.339844 91.1674Z"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M30.0898 0.197998H91.9698V12.598H30.0898V0.197998Z"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M30.0898 18.7979H91.9698V31.1979H30.0898V18.7979Z"/>
                    </svg>
                `,
                "3,4": `
                    <svg viewBox="0 0 132 100" style="overflow: visible; margin-top: 10px; margin-bottom: -10px;" fill="none" xmlns="http://www.w3.org/2000/svg">

                        <g transform="translate(0, -50)">
                            <path d="M78.381 15.296C80.506 14.625 81.349 14.25 82.428 13.531C84.553 12.14 85.849 9.67101 85.849 7.14001C85.849 2.87501 82.428 0 77.396 0C72.49 0 68.349 3.046 68.349 6.75C68.349 8.593 69.474 9.84296 71.178 9.84296C72.662 9.84296 73.756 8.76501 73.756 7.28101C73.756 6.51501 73.521 5.98401 72.803 5.26501C72.349 4.85901 72.178 4.53096 72.178 4.21796C72.178 3.13996 74.428 2.01501 76.537 2.01501C79.553 2.01501 81.349 3.68696 81.349 6.46796C81.349 10.484 78.521 14.25 75.506 14.25C75.365 14.25 74.959 14.218 74.474 14.171C73.162 14.078 73.162 14.078 72.896 14.078C71.896 14.078 71.365 14.531 71.365 15.343C71.365 16.062 71.865 16.5 72.662 16.5C72.896 16.5 73.209 16.468 73.568 16.421C74.193 16.281 74.881 16.234 75.271 16.234C77.396 16.234 78.834 18.125 78.834 20.921C78.834 25.781 76.443 30.453 71.006 30.453C68.49 30.453 66.318 29.203 66.318 27.75C66.318 27.265 66.506 27.078 67.224 26.765C68.521 26.187 69.068 25.375 69.068 24.156C69.068 22.578 67.803 21.375 66.193 21.375C64.256 21.375 62.99 22.89 62.99 25.234C62.99 29.609 66.318 32.343 71.724 32.343C78.521 32.343 83.693 27.796 83.693 21.765C83.693 18.265 81.537 16.281 78.381 15.296Z"/>
                            <path d="M147 35V16H93" stroke="black" stroke-width="2.48" stroke-miterlimit="2"/>
                            <path d="M2 35V16H56" stroke="black" stroke-width="2.48" stroke-miterlimit="2"/>
                        </g>

                        <path d="M30.9929 82.63V0" stroke="black" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M80.8469 82.63V0" stroke="black" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M130.701 82.63V0" stroke="black" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M0 90.7705C0 95.033 3.069 99.7915 11.1135 99.7915C21.4211 99.7915 32.24 91.3595 32.24 82.633C32.24 76.774 27.28 73.5035 21.1265 73.5035C11.501 73.5035 0 81.641 0 90.7705Z"/>
                        <path d="M49.855 90.7705C49.855 95.033 52.924 99.7915 60.9685 99.7915C71.276 99.7915 82.095 91.3595 82.095 82.633C82.095 76.774 77.135 73.5035 70.9815 73.5035C61.356 73.5035 49.855 81.641 49.855 90.7705Z"/>
                        <path d="M99.709 90.7705C99.709 95.033 102.778 99.7915 110.822 99.7915C121.13 99.7915 131.949 91.3595 131.949 82.633C131.949 76.774 126.989 73.5035 120.836 73.5035C111.21 73.5035 99.709 81.641 99.709 90.7705Z"/>
                    </svg>
                `,
                "3,8": `
                    <svg viewBox="0 0 133 101" style="overflow: visible; margin-top: 10px; margin-bottom: -10px;" fill="none" xmlns="http://www.w3.org/2000/svg">

                        <g transform="translate(0, -50)">
                            <path d="M78.381 15.296C80.506 14.625 81.349 14.25 82.428 13.531C84.553 12.14 85.849 9.67101 85.849 7.14001C85.849 2.87501 82.428 0 77.396 0C72.49 0 68.349 3.046 68.349 6.75C68.349 8.593 69.474 9.84296 71.178 9.84296C72.662 9.84296 73.756 8.76501 73.756 7.28101C73.756 6.51501 73.521 5.98401 72.803 5.26501C72.349 4.85901 72.178 4.53096 72.178 4.21796C72.178 3.13996 74.428 2.01501 76.537 2.01501C79.553 2.01501 81.349 3.68696 81.349 6.46796C81.349 10.484 78.521 14.25 75.506 14.25C75.365 14.25 74.959 14.218 74.474 14.171C73.162 14.078 73.162 14.078 72.896 14.078C71.896 14.078 71.365 14.531 71.365 15.343C71.365 16.062 71.865 16.5 72.662 16.5C72.896 16.5 73.209 16.468 73.568 16.421C74.193 16.281 74.881 16.234 75.271 16.234C77.396 16.234 78.834 18.125 78.834 20.921C78.834 25.781 76.443 30.453 71.006 30.453C68.49 30.453 66.318 29.203 66.318 27.75C66.318 27.265 66.506 27.078 67.224 26.765C68.521 26.187 69.068 25.375 69.068 24.156C69.068 22.578 67.803 21.375 66.193 21.375C64.256 21.375 62.99 22.89 62.99 25.234C62.99 29.609 66.318 32.343 71.724 32.343C78.521 32.343 83.693 27.796 83.693 21.765C83.693 18.265 81.537 16.281 78.381 15.296Z"/>
                            <path d="M147 35V16H93" stroke="black" stroke-width="2.48" stroke-miterlimit="2"/>
                            <path d="M2 35V16H56" stroke="black" stroke-width="2.48" stroke-miterlimit="2"/>
                        </g>

                        <path d="M31.47 83V0.369995" stroke="black" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M81.324 83V0.369995" stroke="black" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M131.178 83V0.369995" stroke="black" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M0.477051 91.1405C0.477051 95.403 3.54605 100.162 11.5905 100.162C21.8981 100.162 32.7171 91.7295 32.7171 83.003C32.7171 77.144 27.7571 73.8735 21.6036 73.8735C11.9781 73.8735 0.477051 82.011 0.477051 91.1405Z"/>
                        <path d="M50.332 91.1405C50.332 95.403 53.401 100.162 61.4455 100.162C71.7531 100.162 82.572 91.7295 82.572 83.003C82.572 77.144 77.612 73.8735 71.4586 73.8735C61.8331 73.8735 50.332 82.011 50.332 91.1405Z"/>
                        <path d="M100.186 91.1405C100.186 95.403 103.255 100.162 111.3 100.162C121.607 100.162 132.426 91.7295 132.426 83.003C132.426 77.144 127.466 73.8735 121.313 73.8735C111.687 73.8735 100.186 82.011 100.186 91.1405Z"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M31 0H132V12H31V0Z"/>
                    </svg>
                `,
                "3,16": `
                    <svg viewBox="0 0 133 101" style="overflow: visible; margin-top: 10px; margin-bottom: -10px;" fill="none" xmlns="http://www.w3.org/2000/svg">

                        <g transform="translate(0, -50)">
                            <path d="M78.381 15.296C80.506 14.625 81.349 14.25 82.428 13.531C84.553 12.14 85.849 9.67101 85.849 7.14001C85.849 2.87501 82.428 0 77.396 0C72.49 0 68.349 3.046 68.349 6.75C68.349 8.593 69.474 9.84296 71.178 9.84296C72.662 9.84296 73.756 8.76501 73.756 7.28101C73.756 6.51501 73.521 5.98401 72.803 5.26501C72.349 4.85901 72.178 4.53096 72.178 4.21796C72.178 3.13996 74.428 2.01501 76.537 2.01501C79.553 2.01501 81.349 3.68696 81.349 6.46796C81.349 10.484 78.521 14.25 75.506 14.25C75.365 14.25 74.959 14.218 74.474 14.171C73.162 14.078 73.162 14.078 72.896 14.078C71.896 14.078 71.365 14.531 71.365 15.343C71.365 16.062 71.865 16.5 72.662 16.5C72.896 16.5 73.209 16.468 73.568 16.421C74.193 16.281 74.881 16.234 75.271 16.234C77.396 16.234 78.834 18.125 78.834 20.921C78.834 25.781 76.443 30.453 71.006 30.453C68.49 30.453 66.318 29.203 66.318 27.75C66.318 27.265 66.506 27.078 67.224 26.765C68.521 26.187 69.068 25.375 69.068 24.156C69.068 22.578 67.803 21.375 66.193 21.375C64.256 21.375 62.99 22.89 62.99 25.234C62.99 29.609 66.318 32.343 71.724 32.343C78.521 32.343 83.693 27.796 83.693 21.765C83.693 18.265 81.537 16.281 78.381 15.296Z"/>
                            <path d="M147 35V16H93" stroke="black" stroke-width="2.48" stroke-miterlimit="2"/>
                            <path d="M2 35V16H56" stroke="black" stroke-width="2.48" stroke-miterlimit="2"/>
                        </g>

                        <path d="M31.47 83V0.369995" stroke="black" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M81.324 83V0.369995" stroke="black" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M131.178 83V0.369995" stroke="black" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M0.477051 91.1405C0.477051 95.403 3.54605 100.162 11.5905 100.162C21.8981 100.162 32.7171 91.7295 32.7171 83.003C32.7171 77.144 27.7571 73.8735 21.6036 73.8735C11.9781 73.8735 0.477051 82.011 0.477051 91.1405Z"/>
                        <path d="M50.332 91.1405C50.332 95.403 53.401 100.162 61.4455 100.162C71.7531 100.162 82.572 91.7295 82.572 83.003C82.572 77.144 77.612 73.8735 71.4586 73.8735C61.8331 73.8735 50.332 82.011 50.332 91.1405Z"/>
                        <path d="M100.186 91.1405C100.186 95.403 103.255 100.162 111.3 100.162C121.607 100.162 132.426 91.7295 132.426 83.003C132.426 77.144 127.466 73.8735 121.313 73.8735C111.687 73.8735 100.186 82.011 100.186 91.1405Z"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M31 18H132V30H31V18Z"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M31 0H132V12H31V0Z"/>
                    </svg>
                `,
                "4,8": `
                    <svg viewBox="0 0 212 101" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M91.1401 83.6301V6.99805" stroke="var(--txt1)" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M209.94 83.6301V6.99805" stroke="var(--txt1)" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M150.54 83.6301V6.99805" stroke="var(--txt1)" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M31.75 83.6301V6.99805" stroke="var(--txt1)" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M178.94 91.7675C178.94 96.03 182.009 100.788 190.053 100.788C200.361 100.788 211.18 92.3565 211.18 83.63C211.18 77.771 206.22 74.5005 200.066 74.5005C190.441 74.5005 178.94 82.638 178.94 91.7675Z"/>
                        <path d="M0.76001 91.7675C0.76001 96.03 3.82901 100.788 11.8735 100.788C22.1811 100.788 33 92.3565 33 83.63C33 77.771 28.04 74.5005 21.8865 74.5005C12.2611 74.5005 0.76001 82.638 0.76001 91.7675Z"/>
                        <path d="M119.55 91.7675C119.55 96.03 122.619 100.788 130.664 100.788C140.971 100.788 151.79 92.3565 151.79 83.63C151.79 77.771 146.83 74.5005 140.677 74.5005C131.051 74.5005 119.55 82.638 119.55 91.7675Z"/>
                        <path d="M60.1499 91.7675C60.1499 96.03 63.2189 100.788 71.2634 100.788C81.571 100.788 92.3899 92.3565 92.3899 83.63C92.3899 77.771 87.4299 74.5005 81.2764 74.5005C71.651 74.5005 60.1499 82.638 60.1499 91.7675Z"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M30.51 0.797852H211.18V13.1979H30.51V0.797852Z"/>
                    </svg>
                `,
                "4,16": `
                    <svg viewBox="0 0 212 101" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M91.1401 83.6301V6.99805" stroke="var(--txt1)" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M209.94 83.6301V6.99805" stroke="var(--txt1)" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M150.54 83.6301V6.99805" stroke="var(--txt1)" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M31.75 83.6301V6.99805" stroke="var(--txt1)" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M178.94 91.7675C178.94 96.03 182.009 100.788 190.053 100.788C200.361 100.788 211.18 92.3565 211.18 83.63C211.18 77.771 206.22 74.5005 200.066 74.5005C190.441 74.5005 178.94 82.638 178.94 91.7675Z"/>
                        <path d="M0.76001 91.7675C0.76001 96.03 3.82901 100.788 11.8735 100.788C22.1811 100.788 33 92.3565 33 83.63C33 77.771 28.04 74.5005 21.8865 74.5005C12.2611 74.5005 0.76001 82.638 0.76001 91.7675Z"/>
                        <path d="M119.55 91.7675C119.55 96.03 122.619 100.788 130.664 100.788C140.971 100.788 151.79 92.3565 151.79 83.63C151.79 77.771 146.83 74.5005 140.677 74.5005C131.051 74.5005 119.55 82.638 119.55 91.7675Z"/>
                        <path d="M60.1499 91.7675C60.1499 96.03 63.2189 100.788 71.2634 100.788C81.571 100.788 92.3899 92.3565 92.3899 83.63C92.3899 77.771 87.4299 74.5005 81.2764 74.5005C71.651 74.5005 60.1499 82.638 60.1499 91.7675Z"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M30.51 0.797852H211.18V13.1979H30.51V0.797852Z"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M30.51 19.3979H211.18V31.7979H30.51V19.3979Z"/>
                    </svg>
                `,
                "4,32": `
                    <svg viewBox="0 0 212 101" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M91.1401 83.6301V6.99805" stroke="var(--txt1)" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M209.94 83.6301V6.99805" stroke="var(--txt1)" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M150.54 83.6301V6.99805" stroke="var(--txt1)" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M31.75 83.6301V6.99805" stroke="var(--txt1)" stroke-width="2.48" stroke-linejoin="bevel"/>
                        <path d="M178.94 91.7675C178.94 96.03 182.009 100.788 190.053 100.788C200.361 100.788 211.18 92.3565 211.18 83.63C211.18 77.771 206.22 74.5005 200.066 74.5005C190.441 74.5005 178.94 82.638 178.94 91.7675Z"/>
                        <path d="M0.76001 91.7675C0.76001 96.03 3.82901 100.788 11.8735 100.788C22.1811 100.788 33 92.3565 33 83.63C33 77.771 28.04 74.5005 21.8865 74.5005C12.2611 74.5005 0.76001 82.638 0.76001 91.7675Z"/>
                        <path d="M119.55 91.7675C119.55 96.03 122.619 100.788 130.664 100.788C140.971 100.788 151.79 92.3565 151.79 83.63C151.79 77.771 146.83 74.5005 140.677 74.5005C131.051 74.5005 119.55 82.638 119.55 91.7675Z"/>
                        <path d="M60.1499 91.7675C60.1499 96.03 63.2189 100.788 71.2634 100.788C81.571 100.788 92.3899 92.3565 92.3899 83.63C92.3899 77.771 87.4299 74.5005 81.2764 74.5005C71.651 74.5005 60.1499 82.638 60.1499 91.7675Z"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M30.51 0.797852H211.18V13.1979H30.51V0.797852Z"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M30.51 19.3979H211.18V31.7979H30.51V19.3979Z"/>
                        <path fill-rule="evenodd" clip-rule="evenodd" d="M30.51 38.3979H211.18V50.7979H30.51V38.3979Z"/>
                    </svg>
                `
            };
            var search_term = `${number},${type}`;
            return svgs[search_term];
        }
        init_theme();
    </script>
</body>
